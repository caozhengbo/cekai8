webpackJsonp([1],{"4Kr/":function(e,t){},"4ZFM":function(e,t){},"4yIp":function(e,t){},"5Fdu":function(e,t){},"5jK+":function(e,t){},"6Qis":function(e,t){},"7C+M":function(e,t){},"7JSB":function(e,t){},"8VFD":function(e,t){},E2U4:function(e,t){},GkGg:function(e,t){},JGkj:function(e,t){},Jp03:function(e,t){},KIIB:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={};a.d(n,"baseUrl",function(){return he}),a.d(n,"register",function(){return me}),a.d(n,"login",function(){return fe}),a.d(n,"adduicase",function(){return ve}),a.d(n,"getuicase",function(){return ge}),a.d(n,"getuicaseSingle",function(){return be}),a.d(n,"deluicase",function(){return _e}),a.d(n,"delAlluicase",function(){return ye}),a.d(n,"updateuicase",function(){return we}),a.d(n,"copyuicase",function(){return ke}),a.d(n,"runuicase",function(){return xe}),a.d(n,"runUIcaseByPk",function(){return Te}),a.d(n,"geuicasePaginationBypage",function(){return Se}),a.d(n,"runUIcaseTree",function(){return Ce}),a.d(n,"UItestPlanList",function(){return $e}),a.d(n,"getUITestPaginationBypage",function(){return De}),a.d(n,"addUITestPlan",function(){return Pe}),a.d(n,"updateUITestPlan",function(){return Fe}),a.d(n,"editUITest",function(){return Ie}),a.d(n,"copyUITest",function(){return Ne}),a.d(n,"deleteUITest",function(){return Re}),a.d(n,"delAllUITest",function(){return Ve}),a.d(n,"runSingleTestPlanSuite",function(){return Ae}),a.d(n,"runTestPlanByPk",function(){return je}),a.d(n,"runUIPlanSuiteTree",function(){return Le}),a.d(n,"addProject",function(){return Ee}),a.d(n,"deleteProject",function(){return ze}),a.d(n,"getProjectList",function(){return Be}),a.d(n,"getProjectDetail",function(){return qe}),a.d(n,"getPagination",function(){return Ue}),a.d(n,"updateProject",function(){return Oe}),a.d(n,"getDebugtalk",function(){return Me}),a.d(n,"updateDebugtalk",function(){return He}),a.d(n,"runDebugtalk",function(){return Je}),a.d(n,"getTree",function(){return Ke}),a.d(n,"updateTree",function(){return We}),a.d(n,"uploadFile",function(){return Ge}),a.d(n,"downloadTestdata",function(){return Ze}),a.d(n,"addAPI",function(){return Xe}),a.d(n,"updateAPI",function(){return Qe}),a.d(n,"apiList",function(){return Ye}),a.d(n,"delAPI",function(){return et}),a.d(n,"delAllAPI",function(){return tt}),a.d(n,"getAPISingle",function(){return at}),a.d(n,"getPaginationBypage",function(){return nt}),a.d(n,"deleteDataBase",function(){return st}),a.d(n,"updateDataBase",function(){return it}),a.d(n,"addDataBase",function(){return rt}),a.d(n,"getDataBaseList",function(){return ot}),a.d(n,"addTestCase",function(){return lt}),a.d(n,"updateTestCase",function(){return ct}),a.d(n,"testList",function(){return ut}),a.d(n,"deleteTest",function(){return dt}),a.d(n,"delAllTest",function(){return pt}),a.d(n,"coptTest",function(){return ht}),a.d(n,"editTest",function(){return mt}),a.d(n,"getTestPaginationBypage",function(){return ft}),a.d(n,"gettagcount",function(){return vt}),a.d(n,"getreporttail",function(){return gt}),a.d(n,"addConfig",function(){return bt}),a.d(n,"updateConfig",function(){return _t}),a.d(n,"configList",function(){return yt}),a.d(n,"copyConfig",function(){return wt}),a.d(n,"copyAPI",function(){return kt}),a.d(n,"deleteConfig",function(){return xt}),a.d(n,"delAllConfig",function(){return Tt}),a.d(n,"getConfigPaginationBypage",function(){return St}),a.d(n,"getAllConfig",function(){return Ct}),a.d(n,"runSingleAPI",function(){return $t}),a.d(n,"runAPIByPk",function(){return Dt}),a.d(n,"runAPITree",function(){return Pt}),a.d(n,"runSingleTestSuite",function(){return Ft}),a.d(n,"runSingleTest",function(){return It}),a.d(n,"runTestByPk",function(){return Nt}),a.d(n,"runSuiteTree",function(){return Rt}),a.d(n,"addVariables",function(){return Vt}),a.d(n,"variablesList",function(){return At}),a.d(n,"getVariablesPaginationBypage",function(){return jt}),a.d(n,"updateVariables",function(){return Lt}),a.d(n,"deleteVariables",function(){return Et}),a.d(n,"delAllVariabels",function(){return zt}),a.d(n,"reportList",function(){return Bt}),a.d(n,"uireportList",function(){return qt}),a.d(n,"deleteReports",function(){return Ut}),a.d(n,"getReportsPaginationBypage",function(){return Ot}),a.d(n,"getUIReportsPaginationBypage",function(){return Mt}),a.d(n,"getUIReportsdetail",function(){return Ht}),a.d(n,"deleteUIReports",function(){return Jt}),a.d(n,"deleteAllUIReports",function(){return Kt}),a.d(n,"delAllReports",function(){return Wt}),a.d(n,"watchSingleReports",function(){return Gt}),a.d(n,"addTask",function(){return Zt}),a.d(n,"copySchedule",function(){return Xt}),a.d(n,"updateTask",function(){return Qt}),a.d(n,"taskList",function(){return Yt}),a.d(n,"getTaskPaginationBypage",function(){return ea}),a.d(n,"deleteTasks",function(){return ta}),a.d(n,"deleteSelectTasks",function(){return aa}),a.d(n,"addHostIP",function(){return na}),a.d(n,"hostList",function(){return sa}),a.d(n,"updateHost",function(){return ia}),a.d(n,"deleteHost",function(){return ra}),a.d(n,"getHostPaginationBypage",function(){return oa}),a.d(n,"getAllHost",function(){return la}),a.d(n,"addPycode",function(){return ca}),a.d(n,"deletePycode",function(){return ua}),a.d(n,"delAllPycode",function(){return da}),a.d(n,"getPycodeList",function(){return pa}),a.d(n,"getPycodeListPaginationBypage",function(){return ha}),a.d(n,"getPycode",function(){return ma}),a.d(n,"runPycode",function(){return fa}),a.d(n,"updatePycode",function(){return va}),a.d(n,"runScheduleTest",function(){return ga}),a.d(n,"getTaskMetaDataList",function(){return ba}),a.d(n,"synchronizationapi",function(){return _a}),a.d(n,"gettokenmsg",function(){return ya});var s=a("7+uW"),i=a("zL8q"),r=a.n(i),o=(a("tvR6"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]});var l=a("VU/8")({name:"App"},o,!1,function(e){a("GkGg")},null,null).exports,c=a("/ocq"),u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"nav-header"},[a("span",{staticStyle:{color:"white","font-size":"25px","margin-left":"10px"}},[e._v("caozhengbo测试平台")]),e._v(" "),a("span",{staticClass:"right"},[a("div",{staticStyle:{float:"right",color:"#d9d9d9","margin-right":"100px"}},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v(" "),a("span",{staticStyle:{"padding-left":"5px","font-size":"large"},domProps:{textContent:e._s(this.$store.state.useractualname)}}),e._v(" "),a("a",{staticStyle:{"padding-left":"10px"},on:{click:e.handleLogOut}},[e._v("注 销")])])])])])},staticRenderFns:[]};var d=a("VU/8")({methods:{handleLogOut:function(){this.$store.commit("isLogin",null),this.setLocalValue("token",null),this.$router.push({name:"Login"})}},name:"Header"},u,!1,function(e){a("4Kr/")},"data-v-49344170",null).exports,p=new s.default,h={name:"Side",data:function(){return{side_menu:[{code:"el-icon-s-home",title:"首  页",index:"ProjectList"},{title:"项目概况",index:"ProjectDetail",code:"el-icon-collection"},{code:"el-icon-menu",index:"api",title:"API自动化",subs:[{title:"API 模板",index:"RecordApi"},{title:"测试用例",index:"AutoTest"},{title:"配置管理",index:"RecordConfig"},{title:"全局变量",index:"GlobalEnv"},{title:"域名管理",index:"HostIP"},{title:"驱动代码",index:"DebugTalk"},{title:"定时任务",index:"Task"},{title:"历史报告",index:"Reports"},{title:"异步回执",index:"TaskMeta"}]},{code:"el-icon-s-order",index:"webselemium",title:"web自动化",subs:[{index:"webtestcaselist",title:"UI用例管理"},{index:"UICaseTestPlan",title:"UI测试计划"},{index:"UIReportList",title:"UI测试报告"}]}]}},created:function(){var e=this;p.$on("collapse",function(t){e.collapse=t,p.$emit("collapse-content",t)})},methods:{select:function(e){this.$store.commit("setRouterName",e),this.$router.push({name:e}),this.setLocalValue("routerName",e)}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-menu",{staticClass:"common-side-bar",attrs:{"default-active":e.$store.state.routerName,"background-color":"#304056","text-color":"#BFCBD9","active-text-color":"#318DF1"},on:{select:e.select}},[e._l(e.side_menu,function(t){return[t.subs?[a("el-submenu",{key:t.index,attrs:{index:t.index,disabled:"ProjectList"===e.$store.state.routerName}},[a("template",{slot:"title"},[a("span",{class:t.code,attrs:{slot:"title"},slot:"title"}),e._v("  "+e._s(t.title)+"\n                    ")]),e._v(" "),e._l(t.subs,function(t){return[t.subs?a("el-submenu",{key:t.index,attrs:{index:t.index}},[a("template",{slot:"title"},[e._v(e._s(t.title))]),e._v(" "),e._l(t.subs,function(t,n){return a("el-menu-item",{key:n,attrs:{index:t.index}},[e._v(e._s(t.title))])})],2):a("el-menu-item",{key:t.index,attrs:{index:t.index}},[e._v(e._s(t.title))])]})],2)]:"项目概况"==t.title?[a("el-menu-item",{key:t.index,attrs:{index:t.index,disabled:"ProjectList"===e.$store.state.routerName}},[a("template",{slot:"title"},[a("span",{class:t.code,attrs:{slot:"title"},slot:"title"}),e._v("  "+e._s(t.title)+"\n                    ")])],2)]:[a("el-menu-item",{key:t.index,attrs:{index:t.index}},[a("template",{slot:"title"},[a("span",{class:t.code,attrs:{slot:"title"},slot:"title"}),e._v("  "+e._s(t.title)+"\n                    ")])],2)]]})],2)},staticRenderFns:[]};var f={name:"Home",components:{HomeHeader:d,HomeSide:a("VU/8")(h,m,!1,function(e){a("qzGr")},"data-v-7d3092b4",null).exports}},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-container",[t("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[t("home-header")],1),this._v(" "),t("el-container",[t("el-aside",{staticStyle:{width:"202px"}},[t("home-side")],1),this._v(" "),t("el-main",[t("router-view")],1)],1)],1)},staticRenderFns:[]};var g=a("VU/8")(f,v,!1,function(e){a("m2dO")},"data-v-4d031dd8",null).exports,b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"login"},[a("el-header",[a("el-row",[a("el-col",{attrs:{span:4,offset:1}},[a("div")])],1)],1),e._v(" "),a("el-main",{staticStyle:{padding:"0px"}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("div",[a("div",{attrs:{id:"form-title"}},[e._v("caozhengbo自动化平台")]),e._v(" "),a("form",{attrs:{id:"submit-form"}},[a("div",{attrs:{id:"form-content"}},[a("div",{staticStyle:{"text-align":"center"},attrs:{id:"form-msg"}},[e._v("注册账号")]),e._v(" "),a("div",{attrs:{id:"form-inputs"}},[a("div",{staticClass:"form-input-div"},[a("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"438px","padding-left":"10px"}},[e._v("")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.username,expression:"registerForm.username"}],attrs:{placeholder:"用户名",type:"text",id:"user"},domProps:{value:e.registerForm.username},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"username",t.target.value)}}}),e._v(" "),a("div",{staticClass:"err_msg",attrs:{id:"user_err"},domProps:{innerHTML:e._s(e.usernameInvalid)},on:{mouseover:function(t){e.usernameInvalid=""}}})]),e._v(" "),a("div",{staticClass:"form-input-div"},[a("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"375px","padding-left":"10px"}},[e._v("")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.name,expression:"registerForm.name"}],attrs:{placeholder:"姓名",type:"text",id:"name"},domProps:{value:e.registerForm.name},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"name",t.target.value)}}}),e._v(" "),a("div",{staticClass:"err_msg",attrs:{id:"user_name"},domProps:{innerHTML:e._s(e.nameInvalid)},on:{mouseover:function(t){e.nameInvalid=""}}})]),e._v(" "),a("div",{staticClass:"form-input-div"},[a("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"312px","padding-left":"10px"}},[e._v("")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.password,expression:"registerForm.password"}],attrs:{placeholder:"密码",type:"password",id:"pwd"},domProps:{value:e.registerForm.password},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"password",t.target.value)}}}),e._v(" "),a("div",{staticClass:"err_msg",attrs:{id:"pwd_err"},domProps:{innerHTML:e._s(e.passwordInvalid)},on:{mouseover:function(t){e.passwordInvalid=""}}})]),e._v(" "),a("div",{staticClass:"form-input-div"},[a("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"250px","padding-left":"10px"}},[e._v("")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.repwd,expression:"registerForm.repwd"}],attrs:{placeholder:"确认密码",type:"password",id:"repwd"},domProps:{value:e.registerForm.repwd},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"repwd",t.target.value)}}}),e._v(" "),a("div",{staticClass:"err_msg",attrs:{id:"repwd_err"},domProps:{innerHTML:e._s(e.repwdInvalid)},on:{mouseover:function(t){e.repwdInvalid=""}}})]),e._v(" "),a("div",{staticClass:"form-input-div"},[a("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"190px","padding-left":"10px"}},[e._v("")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerForm.email,expression:"registerForm.email"}],attrs:{placeholder:"邮箱",type:"email",id:"email"},domProps:{value:e.registerForm.email},on:{input:function(t){t.target.composing||e.$set(e.registerForm,"email",t.target.value)}}}),e._v(" "),a("div",{staticClass:"err_msg",attrs:{id:"email_err"},domProps:{innerHTML:e._s(e.emailInvalid)},on:{mouseover:function(t){e.emailInvalid=""}}})]),e._v(" "),a("div",{staticClass:"form-submit"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",id:"submitBtn"},on:{click:e.submitForm}},[e._v("立即注册\n                                    ")])])]),e._v(" "),a("div",{staticClass:"form-foot"},[a("span",[e._v("已有账户，"),a("router-link",{attrs:{to:"/testrunner/login"}},[e._v("立即登陆")])],1)])])])])])],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")({name:"Register",data:function(){return{registerForm:{username:"",password:"",name:"",repwd:"",email:""},passwordInvalid:"",usernameInvalid:"",repwdInvalid:"",emailInvalid:"",nameInvalid:""}},rules:{name:[{min:1,max:20,message:"最多不超过20个字符",trigger:"blur"}]},methods:{validateUser:function(){return!!/^[a-zA-Z0-9_-]{4,16}$/.test(this.registerForm.username)||(this.usernameInvalid="用户名4到16位,只能是字母,数字,下划线,连字符",!1)},validatePassword:function(){return!!/^[a-zA-Z\d_]{6,}$/.test(this.registerForm.password)||(this.passwordInvalid="密码至少6位数",!1)},validateRepwd:function(){return this.registerForm.password===this.registerForm.repwd||(this.repwdInvalid="确认密码和密码不一致",!1)},validateEmail:function(){return!!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(this.registerForm.email)||(this.emailInvalid="邮箱格式不正确",!1)},handleRegisterSuccess:function(e){e.success?(this.$message.success({message:e.msg,duration:2e3,center:!0}),this.$router.push("/testrunner/login")):this.$message.error({message:e.msg,duration:2e3,center:!0})},submitForm:function(e){var t=this;this.validateUser()&&this.validatePassword()&&this.validateRepwd()&&this.validateEmail()&&this.$api.register(this.registerForm).then(function(e){t.handleRegisterSuccess(e)})}}},b,!1,function(e){a("uM/c")},"data-v-708de1b1",null).exports,y={name:"Login",data:function(){return{loginForm:{username:"",password:""},usernameInvalid:"",passwordInvalid:""}},methods:{validateUserName:function(){return""!==this.loginForm.username.replace(/(^\s*)/g,"")||(this.usernameInvalid="用户名不能为空",!1)},validatePassword:function(){return""!==this.loginForm.password.replace(/(^\s*)/g,"")||(this.passwordInvalid="密码不能为空",!1)},handleLoginSuccess:function(e){e.success?(console.log(e.user),console.log("-------------------------------1"),this.$router.push({name:"ProjectList"}),this.$store.commit("isLogin",e.token),this.$store.commit("setUser",e.user),this.$store.commit("setUseractualname",e.name),this.$store.commit("setRouterName","ProjectList"),this.setLocalValue("token",e.token),this.setLocalValue("user",e.user),this.setLocalValue("routerName","ProjectList"),this.setLocalValue("useractualname",e.name)):(console.log(e.user),console.log("-------------------------------2"),this.$message.error({message:e.msg,duration:2e3,center:!0}))},submitForm:function(){var e=this;this.validateUserName()&&this.validatePassword()&&this.$api.login(this.loginForm).then(function(t){e.handleLoginSuccess(t)})}}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{staticClass:"login login-wrap-nighttime"},[n("div",{staticClass:"login-box "},[n("div",{staticClass:"login-box-left"},[n("img",{attrs:{src:a("O7CB"),alt:""}}),e._v(" "),n("div",{staticClass:"box-left-content"},[n("div",{staticClass:"slogan"},[e._v("caozhengbo自动化平台")])])]),e._v(" "),n("div",{staticClass:"login-box-right"},[n("div",{staticClass:"login-box-content"},[n("div",{staticClass:"login-box-inp"},[n("form",{attrs:{id:"submit-form"}},[n("div",{staticStyle:{"text-align":"center"},attrs:{id:"form-msg"}},[e._v("登录账号")]),e._v(" "),n("div",{attrs:{id:"form-inputs"}},[n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"215px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.username,expression:"loginForm.username"}],attrs:{placeholder:"用户名",type:"text",id:"email"},domProps:{value:e.loginForm.username},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"username",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"email_err"},domProps:{innerHTML:e._s(e.usernameInvalid)},on:{mouseover:function(t){e.usernameInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-input-div"},[n("i",{staticClass:"iconfont",staticStyle:{position:"absolute",bottom:"155px","padding-left":"10px"}},[e._v("")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.loginForm.password,expression:"loginForm.password"}],attrs:{placeholder:"密码",type:"password",id:"pwd"},domProps:{value:e.loginForm.password},on:{input:function(t){t.target.composing||e.$set(e.loginForm,"password",t.target.value)}}}),e._v(" "),n("div",{staticClass:"err_msg",attrs:{id:"pwd_err"},domProps:{innerHTML:e._s(e.passwordInvalid)},on:{mouseover:function(t){e.passwordInvalid=""}}})]),e._v(" "),n("div",{staticClass:"form-submit"},[n("button",{staticClass:"btn btn-primary",staticStyle:{"border-radius":"5px!important"},attrs:{type:"button",id:"submitBtn"},on:{click:e.submitForm}},[e._v("立即登录\n                                    ")])])]),e._v(" "),n("div",{staticClass:"form-foot"},[n("span",[e._v("没有账户，"),n("router-link",{attrs:{to:"/testrunner/register"}},[e._v("立即注册")])],1)])])])])])]),e._v(" "),n("el-footer",{staticClass:"copyright"},[n("span",[e._v("©Copyright 2021 caozhengbo")])])],1)},staticRenderFns:[]};var k=a("VU/8")(y,w,!1,function(e){a("TI4a")},"data-v-7ac632b0",null).exports,x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#F7F7F7",padding:"0",height:"50px"}},[a("div",[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    添加项目\n                ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"info",round:"",size:"small",icon:"el-icon-d-arrow-left",disabled:null===e.projectData.previous},on:{click:function(t){return e.getPagination(e.projectData.previous)}}},[e._v("\n                    上一页\n                ")]),e._v(" "),a("el-button",{attrs:{type:"info",round:"",size:"small",disabled:null===e.projectData.next},on:{click:function(t){return e.getPagination(e.projectData.next)}}},[e._v("\n                    下一页\n                    "),a("i",{staticClass:"el-icon-d-arrow-right"})]),e._v(" "),a("el-dialog",{attrs:{title:"添加项目",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"projectForm",staticClass:"project",attrs:{model:e.projectForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目描述",prop:"desc"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.desc,callback:function(t){e.$set(e.projectForm,"desc",t)},expression:"projectForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("projectForm")}}},[e._v("确 定")])],1)],1)],1)])]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.projectData.results,border:"",stripe:"","show-header":e.projectData.results.length>0,"highlight-current-row":""}},[a("el-table-column",{attrs:{label:"项目名称",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"font-size":"18px","font-weight":"bold",cursor:"pointer"},on:{click:function(a){return e.handleCellClick(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"负责人",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.responsible))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"项目描述",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"medium"},on:{click:function(a){return e.handleCellClick(t.row)}}},[e._v("详情\n                        ")]),e._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                        ")]),e._v(" "),a("el-dialog",{attrs:{title:"编辑项目",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"projectForm",staticClass:"project",attrs:{model:e.projectForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.name,callback:function(t){e.$set(e.projectForm,"name",t)},expression:"projectForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"项目描述",prop:"desc"}},[a("el-input",{attrs:{clearable:""},model:{value:e.projectForm.desc,callback:function(t){e.$set(e.projectForm,"desc",t)},expression:"projectForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("projectForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                        ")])]}}])})],1)],1)],1)],1)},staticRenderFns:[]};var T=a("VU/8")({data:function(){return{dialogVisible:!1,editVisible:!1,projectData:{results:[]},projectForm:{name:"",desc:"",responsible:this.$store.state.useractualname,id:""},rules:{name:[{required:!0,message:"请输入项目名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}],desc:[{required:!0,message:"简要描述下该项目",trigger:"blur"},{min:1,max:100,message:"最多不超过100个字符",trigger:"blur"}]}}},methods:{handleCellClick:function(e){this.$store.commit("setRouterName","ProjectDetail"),this.setLocalValue("routerName","ProjectDetail"),this.$router.push({name:"ProjectDetail",params:{id:e.id}})},handleEdit:function(e,t){this.editVisible=!0,this.projectForm.name=t.name,this.projectForm.desc=t.desc,this.projectForm.id=t.id},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该项目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$api.deleteProject({data:{id:t.id}}).then(function(e){e.success?(a.success(e),a.getProjectList()):a.failure(e)})})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return""!==t.projectForm.id?t.editVisible=!0:t.dialogVisible=!0,!1;t.dialogVisible=!1,t.editVisible=!1,(""===t.projectForm.id?t.$api.addProject(t.projectForm):t.$api.updateProject(t.projectForm)).then(function(e){e.success?(t.success(e),t.getProjectList()):t.failure(e),t.projectForm.name="",t.projectForm.desc="",t.projectForm.id=""})})},success:function(e){this.$notify({message:e.msg,type:"success",duration:1e3})},failure:function(e){this.$notify.error({message:e.msg,duration:1e3})},getProjectList:function(){var e=this;this.$api.getProjectList().then(function(t){e.projectData=t})},getPagination:function(e){var t=this;this.$api.getPagination(e).then(function(e){t.projectData=e})}},mounted:function(){this.getProjectList()},name:"ProjectList"},x,!1,function(e){a("y3eU")},"data-v-3959ac16",null).exports,S={name:"ProjectDetail",data:function(){return{projectInfo:{},option:{title:{text:"用例类型分布"},tooltip:{},xAxis:{},yAxis:{},series:[]},runcasepotion:{title:{text:"用例运行情况"},tooltip:{},xAxis:{},yAxis:{},series:[]}}},methods:{gettagcount:function(){var e=this;this.$api.gettagcount({params:{project:this.$route.params.id}}).then(function(t){e.option.xAxis={data:t.typename},e.option.series=[{name:"",type:"bar",barWidth:"35%",data:t.countlist}],e.$echarts.init(document.getElementById("casetable")).setOption(e.option)})},getreporttail:function(){var e=this;this.$api.getreporttail({params:{project:this.$route.params.id}}).then(function(t){e.runcasepotion.xAxis={data:["通过","失败","异常","跳过"]},e.runcasepotion.series=[{name:"",type:"bar",color:"lightgreen",barWidth:"25%",data:[t.successes,t.failure,t.error,t.skippe]}],e.$echarts.init(document.getElementById("runcasetable")).setOption(e.runcasepotion)})},success:function(e){this.$notify({message:e.msg,type:"success",duration:1e3})},failure:function(e){this.$notify.error({message:e.msg,duration:1e3})},getProjectDetail:function(){var e=this;console.log(this.$route.params.id);var t=this.$route.params.id;this.$api.getProjectDetail(t).then(function(t){e.projectInfo=t})}},mounted:function(){this.gettagcount(),this.getProjectDetail(),this.getreporttail()}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ul",{staticClass:"title-project"},[a("li",{staticClass:"title-li",attrs:{title:"Test API Project"}},[a("b",[e._v(e._s(e.projectInfo.name))]),e._v(" "),a("b",{staticClass:"desc-li"},[e._v(e._s(e.projectInfo.desc))])])]),e._v(" "),a("ul",{staticClass:"project_detail"},[a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.api_count)+" 个接口")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("接口总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.case_count)+" 个用例")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("用例集总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.config_count)+" 套配置")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("配置总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.variables_count)+" 对变量")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("全局变量对数")])])]),e._v(" "),a("ul",{staticClass:"project_detail"},[a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.host_count)+" 套环境")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("环境总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.task_count)+" 项任务")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("定时任务个数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.report_count)+" 个报告")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("测试报告总数")])]),e._v(" "),a("li",{staticClass:"pull-left"},[a("p",{staticClass:"title-p"},[a("i",{staticClass:"iconfont"},[e._v("")]),e._v("  "+e._s(e.projectInfo.uitestplan)+" 个UI测试计划")]),e._v(" "),a("p",{staticClass:"desc-p"},[e._v("UI测试计划总数")])])]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{display:"table",height:"400px",width:"1000px","margin-top":"30px"}},[t("div",{attrs:{id:"casetable"}}),this._v(" "),t("div",{attrs:{id:"runcasetable"}})])}]};var $=a("VU/8")(S,C,!1,function(e){a("iipv")},"data-v-7b117ca6",null).exports,D={props:{id:{require:!0},save:Boolean,run:Boolean},watch:{save:function(){this.handleConfirm()},run:function(){this.handleRunCode()}},data:function(){return{codeHeight:500,requestData:{code:"",id:"",project:this.$route.params.id},resp:{msg:""}}},name:"PycodeDebug",methods:{handleRunCode:function(){var e=this;this.resp.msg="",this.$api.runPycode(this.requestData.id,{params:{project:this.$route.params.id}}).then(function(t){e.resp=t.data})},handleConfirm:function(){var e=this;this.$api.updatePycode(this.id,{project:this.$route.params.id},this.requestData).then(function(t){e.$notify.success("代码保存成功"),e.getPycode()})},editorInit:function(){a("R3yc"),a("2qnb"),a("eKfU"),a("SOV9")},getPycode:function(){var e=this;this.$api.getPycode(this.id,{params:{project:this.$route.params.id}}).then(function(t){e.requestData=t.data})}},components:{editor:a("o4sT")},mounted:function(){this.$nextTick(function(){this.getPycode(),this.codeHeight=window.screen.height-284})}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",{staticStyle:{height:"600px"}},[a("editor",{attrs:{lang:"python",theme:"monokai",options:{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}},on:{init:e.editorInit},model:{value:e.requestData.code,callback:function(t){e.$set(e.requestData,"code",t)},expression:"requestData.code"}})],1),e._v(" "),a("el-footer",{staticStyle:{height:"50px"}},[a("editor",{attrs:{lang:"text",theme:"monokai",height:e.codeHeight},model:{value:e.resp.msg,callback:function(t){e.$set(e.resp,"msg",t)},expression:"resp.msg"}})],1)],1)},staticRenderFns:[]};var F={components:{PycodeDebug:a("VU/8")(D,P,!1,function(e){a("n4kb")},"data-v-2b10ac8c",null).exports},data:function(){return{back:!1,del:!1,save:!1,run:!1,PycodedebugActivate:!1,respConfig:"",dialogVisible:!1,editVisible:!1,pycodefileForm:{name:"",desc:"",project:this.$route.params.id,id:""},search:"",pycodeData:{count:0,results:[]},currentRow:"",currentPage:1,selectTestData:[],rules:{name:[{required:!0,message:"请输入文件全称",trigger:"blur"},{min:1,max:30,message:"最多不超过30个字符",trigger:"blur"}],desc:[{required:!1,message:"简要描述下该文件",trigger:"blur"},{min:0,max:100,message:"最多不超过100个字符",trigger:"blur"}]},pycodeid:"",loading:!0}},methods:{quitEditPycode:function(){var e=this;this.$confirm("请确认是否已保存最新代码，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.PycodedebugActivate=!1})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleSelectionChange:function(e){this.selectTestData=e},handleEditPycode:function(e){this.PycodedebugActivate=!0,this.pycodeid=e},handlecancle:function(){this.editVisible=!1,this.pycodefileForm.name="",this.pycodefileForm.desc="",this.pycodefileForm.id=""},handleDelPycode:function(e){var t=this;this.$confirm("此操作将永久删除该测试文件，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deletePycode(e,{params:{project:t.$route.params.id}}).then(function(e){t.$notify.success("删除成功"),t.PycodeList()})})},delSelectionPycodefile:function(){var e=this;0!==this.selectTestData.length?this.$confirm("此操作将永久删除勾选的文件，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllPycode(e.selectTestData,{project:e.$route.params.id}).then(function(t){e.$notify.success("删除成功"),e.PycodeList()})}):this.$notify.warning({message:"请至少勾选一个文件"})},handleCurrentChange:function(e){var t=this;this.$api.getPycodeListPaginationBypage({params:{page:this.currentPage,project:this.pycodefileForm.project,search:this.search}}).then(function(e){t.pycodeData=e.data})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return""!==t.pycodefileForm.id?t.editVisible=!0:t.dialogVisible=!0,!1;t.dialogVisible=!1,t.editVisible=!1;(""===t.pycodefileForm.id?t.$api.addPycode(t.pycodefileForm,{project:t.$route.params.id}):t.$api.updatePycode(t.pycodefileForm.id,{project:t.$route.params.id},t.pycodefileForm)).then(function(e){""===t.pycodefileForm.id?t.$notify.success("添加成功"):t.$notify.success("更新成功"),t.PycodeList(),t.pycodefileForm.name="",t.pycodefileForm.desc="",t.pycodefileForm.id=""})})},handleEditPycodeData:function(e,t){this.editVisible=!0,this.pycodefileForm.name=t.name,this.pycodefileForm.desc=t.desc,this.pycodefileForm.id=t.id},PycodeList:function(){var e=this;this.$api.getPycodeList({params:{project:this.$route.params.id,search:this.search}}).then(function(t){e.pycodeData=t.data,e.loading=!1})}},name:"RecordPycode",mounted:function(){this.$nextTick(function(){this.PycodeList()})}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"20px"}},[a("el-button",{attrs:{disabled:e.PycodedebugActivate,type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增文件\n                ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:e.PycodedebugActivate,type:"danger",icon:"el-icon-delete",size:"mini",title:"批量删除"},on:{click:e.delSelectionPycodefile}},[e._v("批量删除")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.PycodedebugActivate,expression:"PycodedebugActivate"}],attrs:{type:"primary",size:"mini",icon:"el-icon-lock",round:""},on:{click:function(t){e.save=!e.save}}},[e._v("保存\n                ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.PycodedebugActivate,expression:"PycodedebugActivate"}],attrs:{icon:"el-icon-caret-right",type:"success",size:"mini",round:""},on:{click:function(t){e.run=!e.run}}},[e._v("运行\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"添加文件",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"pycodefileForm",staticClass:"project",attrs:{model:e.pycodefileForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"文件名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pycodefileForm.name,callback:function(t){e.$set(e.pycodefileForm,"name",t)},expression:"pycodefileForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"文件描述",prop:"desc"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pycodefileForm.desc,callback:function(t){e.$set(e.pycodefileForm,"desc",t)},expression:"pycodefileForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("pycodefileForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑文件信息",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"pycodefileForm",staticClass:"project",attrs:{model:e.pycodefileForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"修改名称",prop:"name"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pycodefileForm.name,callback:function(t){e.$set(e.pycodefileForm,"name",t)},expression:"pycodefileForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"修改描述",prop:"desc"}},[a("el-input",{attrs:{clearable:""},model:{value:e.pycodefileForm.desc,callback:function(t){e.$set(e.pycodefileForm,"desc",t)},expression:"pycodefileForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handlecancle}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("pycodefileForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:!e.PycodedebugActivate,type:"text"},on:{click:e.quitEditPycode}},[e._v("返回列表")])],1)])]),e._v(" "),a("el-container",[e.PycodedebugActivate?a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("PycodeDebug",{attrs:{id:e.pycodeid,save:e.save,run:e.run}})],1):e._e()],1),e._v(" "),a("el-container",{directives:[{name:"show",rawName:"v-show",value:!e.PycodedebugActivate,expression:"!PycodedebugActivate"}]},[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-top":"8px","padding-left":"30px",overflow:"hidden"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入变量名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.PycodeList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.pycodeData.count,expression:"pycodeData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.pycodeData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"230px",top:"150px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"正在玩命加载","highlight-current-row":"",data:e.pycodeData.results,"show-header":0!==e.pycodeData.results.length,stripe:"",height:"600px"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"文件名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"简要描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"260",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.pycodeData.count&&"debugtalk.py"!==t.row.name,expression:"pycodeData.count !== 0 && scope.row.name !== 'debugtalk.py' "}],attrs:{type:"info",size:"mini",title:"编辑基本信息"},on:{click:function(a){return e.handleEditPycodeData(t.$index,t.row)}}},[e._v("编辑\n                                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.pycodeData.count,expression:"pycodeData.count !== 0"}],attrs:{type:"success",size:"mini",title:"编辑脚本内容"},on:{click:function(a){return e.handleEditPycode(t.row.id)}}},[e._v("脚本\n                                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.pycodeData.count&&"debugtalk.py"!==t.row.name,expression:"pycodeData.count !== 0 && scope.row.name !== 'debugtalk.py'"}],attrs:{type:"danger",size:"mini",title:"删除"},on:{click:function(a){return e.handleDelPycode(t.row.id)}}},[e._v("\n                                    删除\n                                    ")])],1)]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var N=a("VU/8")(F,I,!1,function(e){a("tpsR")},"data-v-7e0966be",null).exports,R=a("BO1k"),V=a.n(R),A={props:{save:Boolean,header:{require:!1}},methods:{querySearch:function(e,t){var a=this.headerOptions;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseHeader:function(){var e={header:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.tableData);!(t=(s=i.next()).done);t=!0){var r=s.value;""!==r.key&&""!==r.value&&(e.header[r.key]=r.value,e.desc[r.key]=r.desc)}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e}},watch:{save:function(){this.$emit("header",this.parseHeader(),this.tableData)},header:function(){0!==this.header.length&&(this.tableData=this.header)}},computed:{height:function(){return window.screen.height-440}},data:function(){return{headerOptions:[{value:"Accept"},{value:"Accept-Charset"},{value:"Accept-Language"},{value:"Accept-Datetime"},{value:"Authorization"},{value:"Cache-Control"},{value:"Connection"},{value:"Cookie"},{value:"Content-Length"},{value:"Content-MD5"},{value:"Content-Type"},{value:"Expect"},{value:"Date"},{value:"From"},{value:"Host"},{value:"If-Match"},{value:"If-Modified-Since"},{value:"If-None-Match"},{value:"If-Range"},{value:"If-Unmodified-Since"},{value:"Max-Forwards"},{value:"Origin"},{value:"Pragma"},{value:"Proxy-Authorization"},{value:"Range"},{value:"Referer"},{value:"TE"},{value:"User-Agent"},{value:"Upgrade"},{value:"Via"},{value:"Warning"}],currentRow:"",tableData:[{key:"",value:"",desc:""}]}},name:"Header"},j={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableData,height:e.height,border:!1,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"标签",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-autocomplete",{attrs:{clearable:"","fetch-suggestions":e.querySearch,placeholder:"头部标签"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"内容",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"头部内容"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"头部信息简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var L=a("VU/8")(A,j,!1,function(e){a("NI1z")},"data-v-7646cb79",null).exports,E={props:{save:Boolean,request:{require:!1}},computed:{height:function(){return window.screen.height-464}},name:"Request",components:{editor:a("o4sT")},watch:{save:function(){this.$emit("request",{form:this.parseForm(),json:this.parseJson(),params:this.parseParams(),files:this.parseFile()},{data:this.formData,params:this.paramsData,json_data:this.jsonData})},request:function(){0!==this.request.length&&(this.formData=this.request.data,this.jsonData=this.request.json_data,this.paramsData=this.request.params)}},methods:{editorInit:function(){a("R3yc"),a("NbQv"),a("hzkg"),a("5WxL")},uploadSuccess:function(e,t,a){var n=t.size;n=n>=1048576?(n/1048576).toFixed(2).toString()+"MB":n>=1024?(n/1024).toFixed(2).toString()+"KB":n.toString()+"Byte",this.formData[this.currentIndex].value=t.name,this.formData[this.currentIndex].size=n,this.fileList=[],e.success||this.$message.error(t.name+e.msg)},uploadFile:function(e){return this.$api.uploadFile()},uploadError:function(e){401===e.status?this.$router.replace({name:"Login"}):this.$message.error("Sorry，文件上传失败啦, 请重试！")},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){("data"===this.dataType?this.formData:this.paramsData).push({key:"",value:"",type:1,desc:""})},handleDelete:function(e,t){("data"===this.dataType?this.formData:this.paramsData).splice(e,1)},parseFile:function(){var e={files:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.formData);!(t=(s=i.next()).done);t=!0){var r=s.value;""!==r.key&&5===r.type&&(e.files[r.key]=r.value,e.desc[r.key]=r.desc)}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e},parseForm:function(){var e={data:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.formData);!(t=(s=i.next()).done);t=!0){var r=s.value;if(""!==r.key&&5!==r.type){var o=this.parseType(r.type,r.value);if("exception"===o)continue;e.data[r.key]=o,e.desc[r.key]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e},parseParams:function(){var e={params:{},desc:{}},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.paramsData);!(t=(s=i.next()).done);t=!0){var r=s.value;""!==r.key&&(e.params[r.key]=r.value,e.desc[r.key]=r.desc)}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e},parseJson:function(){var e={};if(""!==this.jsonData)try{e=JSON.parse(this.jsonData)}catch(e){this.$notify.error({title:"json错误",message:"不是标准的json数据格式",duration:2e3})}return e},parseType:function(e,t){var a=void 0,n=t+" => "+this.dataTypeOptions[e-1].label+" 转换异常, 该数据自动剔除";switch(e){case 1:a=t;break;case 2:a=parseInt(t);break;case 3:a=parseFloat(t);break;case 4:if("False"!==t&&"True"!==t)return this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception";a={True:!0,False:!1}[t]}return 0===a||a||4===e||1===e?a:(this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception")}},data:function(){return{fileList:[],currentIndex:0,currentRow:"",jsonData:"",formData:[{key:"",value:"",type:1,desc:""}],paramsData:[{key:"",value:"",type:"",desc:""}],dataTypeOptions:[{label:"String",value:1},{label:"Integer",value:2},{label:"Float",value:3},{label:"Boolean",value:4},{label:"File",value:5}],dataOptions:[{label:"data",value:"表单"},{label:"json",value:"json"},{label:"params",value:"params"}],dataType:"json"}}},z={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-left":"200px"}},[a("el-radio-group",{model:{value:e.dataType,callback:function(t){e.dataType=t},expression:"dataType"}},e._l(e.dataOptions,function(t){return a("el-radio",{key:t.value,attrs:{label:t.label}},[e._v(e._s(t.value)+"\n            ")])}),1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-table",{directives:[{name:"show",rawName:"v-show",value:"json"!==e.dataType,expression:"dataType !== 'json' "}],staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:"data"===e.dataType?e.formData:e.paramsData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"请求Key",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"Key"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),"data"===e.dataType?a("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.dataTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}],null,!1,2747676114)}):e._e(),e._v(" "),a("el-table-column",{attrs:{label:"请求Value",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{directives:[{name:"show",rawName:"v-show",value:5!==t.row.type,expression:"scope.row.type !== 5"}],attrs:{clearable:"",placeholder:"Value"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}}),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:5===t.row.type,expression:"scope.row.type === 5"}]},[a("el-col",{attrs:{span:7}},[a("el-upload",{attrs:{"show-file-list":!1,action:e.uploadFile(t.row),limit:1,type:"small","file-list":e.fileList,"on-error":e.uploadError,"on-success":e.uploadSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.currentIndex=t.$index}}},[e._v("选择文件\n                                ")])],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-badge",{staticStyle:{"margin-top":"8px"},attrs:{value:t.row.size}},[a("i",{staticClass:"el-icon-document",domProps:{textContent:e._s(t.row.value)}})])],1)],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"参数简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1),e._v(" "),a("editor",{directives:[{name:"show",rawName:"v-show",value:"json"===e.dataType,expression:"dataType === 'json' "}],attrs:{lang:"json",theme:"github",width:"100%",height:e.height},on:{init:e.editorInit},model:{value:e.jsonData,callback:function(t){e.jsonData=t},expression:"jsonData"}})],1)])},staticRenderFns:[]};var B=a("VU/8")(E,z,!1,function(e){a("zkLq")},"data-v-c31f6c52",null).exports,q={props:{save:Boolean,extract:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("extract",this.parseExtract(),this.tableData)},extract:function(){0!==this.extract.length&&(this.tableData=this.extract)}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseExtract:function(){var e={extract:[],desc:{}},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.tableData);!(t=(s=i.next()).done);t=!0){var r=s.value,o=r.key,l=r.value;if(""!==o&&""!==l){var c={};c[o]=l,e.extract.push(c),e.desc[o]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e}},data:function(){return{currentRow:"",tableData:[{key:"",value:"",desc:""}]}},name:"Extract"},U={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",strpe:"",height:e.height,data:e.tableData,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"变量名",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"接收抽取值后的变量名"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"抽取表达式",width:"420"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"抽取表达式"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"抽取值简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var O=a("VU/8")(q,U,!1,function(e){a("bRCp")},"data-v-d66549f6",null).exports,M={props:{save:Boolean,validate:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("validate",this.parseValidate(),this.tableData)},validate:function(){0!==this.validate.length&&(this.tableData=this.validate)}},methods:{querySearch:function(e,t){var a=this.validateOptions;t(e?a.filter(this.createFilter(e)):a)},createFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({expect:"",actual:"",comparator:"equals",type:1})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseType:function(e,t){var a=void 0,n=t+" => "+this.dataTypeOptions[e-1].label+" 转换异常, 该数据自动剔除";switch(e){case 1:a=t;break;case 2:a=parseInt(t);break;case 3:a=parseFloat(t);break;case 4:if("False"!==t&&"True"!==t)return this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception";a={True:!0,False:!1}[t];break;case 5:case 6:try{a=JSON.parse(t)}catch(e){a=!1}}return 0===a||a||4===e||1===e?a:(this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception")},parseValidate:function(){var e={validate:[]},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.tableData);!(t=(s=i.next()).done);t=!0){var r=s.value;if(""!==r.actual){var o={},l=this.parseType(r.type,r.expect);if("exception"===l)continue;o[r.comparator]=[r.actual,l],e.validate.push(o)}}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e}},data:function(){return{currentValidate:"",currentRow:"",tableData:[{expect:"",actual:"",comparator:"equals",type:1}],dataTypeOptions:[{label:"String",value:1},{label:"Integer",value:2},{label:"Float",value:3},{label:"Boolean",value:4},{label:"List",value:5},{label:"Dict",value:6}],validateOptions:[{value:"equals"},{value:"less_than"},{value:"less_than_or_equals"},{value:"greater_than"},{value:"greater_than_or_equals"},{value:"not_equals"},{value:"string_equals"},{value:"length_equals"},{value:"length_greater_than"},{value:"length_greater_than_or_equals"},{value:"length_less_than"},{value:"length_less_than_or_equals"},{value:"contains"},{value:"contained_by"},{value:"type_match"},{value:"regex_match"},{value:"startswith"},{value:"endswith"}]}},name:"Validate"},H={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:e.tableData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"断言类型",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{effect:"dark",content:t.row.comparator,placement:"bottom",disabled:""===t.row.comparator&&"disabled"}},[a("el-autocomplete",{attrs:{clearable:"","fetch-suggestions":e.querySearch,placeholder:"请输入断言类型"},model:{value:t.row.comparator,callback:function(a){e.$set(t.row,"comparator",a)},expression:"scope.row.comparator"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"",label:"实际返回值",width:"370"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"实际返回值"},model:{value:t.row.actual,callback:function(a){e.$set(t.row,"actual",a)},expression:"scope.row.actual"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"期望类型",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.dataTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"期望返回值",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:1,clearable:"",placeholder:"期望返回值"},model:{value:t.row.expect,callback:function(a){e.$set(t.row,"expect",a)},expression:"scope.row.expect"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var J=a("VU/8")(M,H,!1,function(e){a("W0BZ")},"data-v-238416d0",null).exports,K={name:"Variables",props:{save:Boolean,variables:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("variables",this.parseVariables(),this.tableData)},variables:function(){0!==this.variables.length&&(this.tableData=this.variables)}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",type:1,desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parseType:function(e,t){var a=void 0,n=t+" => "+this.dataTypeOptions[e-1].label+" 转换异常, 该数据自动剔除";switch(e){case 1:a=t;break;case 2:a=parseInt(t);break;case 3:a=parseFloat(t);break;case 4:if("True"!==t&&"False"!==t)return this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception";a={True:!0,False:!1}[t];break;case 5:case 6:try{a=JSON.parse(t)}catch(e){a=!1}}return 0===a||a||4===e||1===e?a:(this.$notify.error({title:"类型转换错误",message:n,duration:2e3}),"exception")},parseVariables:function(){var e={variables:[],desc:{}},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.tableData);!(t=(s=i.next()).done);t=!0){var r=s.value;if(""!==r.key){var o={},l=this.parseType(r.type,r.value);if("exception"===l)continue;o[r.key]=l,e.variables.push(o),e.desc[r.key]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e}},data:function(){return{currentRow:"",tableData:[{key:"",value:"",type:1,desc:""}],dataTypeOptions:[{label:"String",value:1},{label:"Integer",value:2},{label:"Float",value:3},{label:"Boolean",value:4},{label:"List",value:5},{label:"Dict",value:6}],dataType:"data"}}},W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:e.tableData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"变量名",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"Key"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}},e._l(e.dataTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变量值",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:1,clearable:"",placeholder:"Value"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"内容",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"变量简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var G=a("VU/8")(K,W,!1,function(e){a("UD7K")},"data-v-05d88a45",null).exports,Z={props:{save:Boolean,hooks:{require:!1}},computed:{height:function(){return window.screen.height-440}},watch:{save:function(){this.$emit("hooks",this.parse_hooks(),this.tableData)},hooks:function(){0!==this.hooks.length&&(this.tableData=this.hooks)}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t,a){this.tableData.push({setup:"",teardown:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parse_hooks:function(){var e={setup_hooks:[],teardown_hooks:[]},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.tableData);!(t=(s=i.next()).done);t=!0){var r=s.value;""!==r.setup&&e.setup_hooks.push(r.setup),""!==r.teardown&&e.teardown_hooks.push(r.teardown)}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e}},data:function(){return{currentRow:"",tableData:[{setup:"",teardown:""}]}},name:"Hooks"},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"","cell-style":{paddingTop:"4px",paddingBottom:"4px"},strpe:"",height:e.height,data:e.tableData},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"测试之前执行的方法",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"${ setup_hooks function($request, *args, **kwargs) }"},model:{value:t.row.setup,callback:function(a){e.$set(t.row,"setup",a)},expression:"scope.row.setup"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测试之后执行的方法",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"${ teardown_hooks function(response, *args, **kwargs) }"},model:{value:t.row.teardown,callback:function(a){e.$set(t.row,"teardown",a)},expression:"scope.row.teardown"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var Q=a("VU/8")(Z,X,!1,function(e){a("qpjN")},"data-v-a01c28fe",null).exports,Y={name:"DebugReport",methods:{handleRequest:function(e){["start_timestamp"].forEach(function(t){delete e[t]});try{e.body=JSON.parse(e.body)}catch(e){}return e},handleContent:function(e){try{e=JSON.parse(e)}catch(e){}return e},handleResponse:function(e){return["response_time_ms","encoding","ok","reason","url","text","json","content_size","content_type"].forEach(function(t){delete e[t]}),e}},props:{summary:{require:!0}}},ee={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-y":"scroll",height:"800px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.summary],size:"medium",border:"",stripe:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"测试时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("timestampToTime")(t.row.time.start_at)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"持续时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.time.duration.toFixed(3)+" 秒")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Total",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.stat.testsRun))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Success",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.stat.successes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Failed",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.stat.failures))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Error",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.stat.errors))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Skipped",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.stat.skipped))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Platform"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("HttpRunner: "+e._s(t.row.platform.httprunner_version))]),e._v(" "),a("p",[e._v("Python: "+e._s(t.row.platform.python_version))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.platform.platform))])],1)])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),e._l(e.summary.details,function(t){return e._t("default",function(){return[a("div",[a("span",{staticStyle:{"font-weight":"bold","font-size":"medium"}},[e._v(e._s(t.name))]),e._v(" "),a("el-popover",{attrs:{placement:"top-start",width:"400",trigger:"hover"}},[a("pre",{staticClass:"code-block"},[e._v(e._s(t.in_out))]),e._v(" "),a("el-button",{attrs:{slot:"reference",round:"",type:"text"},slot:"reference"},[e._v("parameters & output")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.records,border:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"名 称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"请求地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.meta_data.request.url))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"请求方法"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.meta_data.request.method},[e._v(e._s(t.row.meta_data.request.method))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"响应时间 (ms)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.meta_data.response.elapsed_ms))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"测试结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:t.row.status},[e._v(e._s(t.row.status))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tabs",[a("el-tab-pane",{attrs:{label:"请求头"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(e.handleRequest(t.row.meta_data.request))}})]),e._v(" "),null!==t.row.meta_data.response.content?a("el-tab-pane",{attrs:{label:"内容"}},[a("pre",{staticClass:"code-block",domProps:{textContent:e._s(e.handleContent(t.row.meta_data.response.content))}})]):e._e(),e._v(" "),a("el-tab-pane",{attrs:{label:"响应结果"}},[a("pre",{staticClass:"code-block",domProps:{textContent:e._s(e.handleResponse(t.row.meta_data.response))}})]),e._v(" "),0!==t.row.meta_data.validators.length?a("el-tab-pane",{attrs:{label:"断言信息"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(t.row.meta_data.validators)}})]):e._e(),e._v(" "),""!==t.row.attachment?a("el-tab-pane",{attrs:{label:"异常信息"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(t.row.attachment)}})]):e._e()],1)]}}],null,!0)})],1)]})})],2)},staticRenderFns:[]};var te=a("VU/8")(Y,ee,!1,function(e){a("VZlN")},"data-v-9ed3d90e",null).exports,ae={components:{Headers:L,Request:B,Extract:O,Validate:J,Variables:G,Hooks:Q,Report:te},props:{host:{require:!1},nodeId:{require:!1},project:{require:!1},config:{require:!1},response:{require:!1}},methods:{reverseStatus:function(){this.save=!this.save,this.run=!0},handleHeader:function(e){this.header=e},handleRequest:function(e){this.request=e},handleValidate:function(e){this.validate=e},handleExtract:function(e){this.extract=e},handleVariables:function(e){this.variables=e},handleHooks:function(e){this.hooks=e,this.run?(this.runAPI(),this.run=!1):""===this.id?this.addAPI():this.updateAPI()},validateData:function(){return""===this.url?(this.$notify.error({title:"url错误",message:"接口请求地址不能为空",duration:1500}),!1):""!==this.name||(this.$notify.error({title:"name错误",message:"接口名称不能为空",duration:1500}),!1)},updateAPI:function(){var e=this;this.validateData()&&this.$api.updateAPI(this.id,{header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},runAPI:function(){var e=this;this.validateData()&&(this.loading=!0,this.$api.runSingleAPI({header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times,project:this.project,config:this.config,host:this.host}).then(function(t){e.summary=t,e.dialogTableVisible=!0,e.loading=!1}).catch(function(t){e.loading=!1}))},addAPI:function(){var e=this;this.validateData()&&this.$api.addAPI({header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times,nodeId:this.nodeId,project:this.project}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})}},watch:{response:function(){this.name=this.response.body.name,this.method=this.response.body.method,this.url=this.response.body.url,this.times=this.response.body.times,this.id=this.response.id}},data:function(){return{loading:!1,times:1,name:"",url:"",id:"",header:[],request:[],extract:[],validate:[],variables:[],hooks:[],method:"GET",dialogTableVisible:!1,save:!1,run:!1,summary:{},activeTag:"second",httpOptions:[{label:"GET"},{label:"POST"},{label:"PUT"},{label:"DELETE"},{label:"HEAD"},{label:"OPTIONS"},{label:"PATCH"}]}},name:"ApiBody"},ne={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{slot:"prepend"},[e._v("接口信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("保存\n                ")])],2),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary",disabled:e.loading},on:{click:e.reverseStatus}},[e._v("发送\n            ")])],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"600px","margin-top":"10px"},attrs:{placeholder:"请输入接口请求地址",clearable:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[a("el-select",{staticStyle:{width:"125px"},attrs:{slot:"prepend"},slot:"prepend",model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.httpOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"循环次数",placement:"bottom"}},[a("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:1,max:100},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1)],1)]),e._v(" "),a("div",{staticClass:"request"},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"请求头",name:"first"}},[a("headers",{attrs:{save:e.save,header:e.response?e.response.body.header:[]},on:{header:e.handleHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"请求体",name:"second"}},[a("request",{attrs:{save:e.save,request:e.response?e.response.body.request:[]},on:{request:e.handleRequest}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"提取器",name:"third"}},[a("extract",{attrs:{save:e.save,extract:e.response?e.response.body.extract:[]},on:{extract:e.handleExtract}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"断言",name:"fourth"}},[a("validate",{attrs:{save:e.save,validate:e.response?e.response.body.validate:[]},on:{validate:e.handleValidate}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"变量设置",name:"five"}},[a("variables",{attrs:{save:e.save,variables:e.response?e.response.body.variables:[]},on:{variables:e.handleVariables}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"前后置方法设置",name:"six"}},[a("hooks",{attrs:{save:e.save,hooks:e.response?e.response.body.hooks:[]},on:{hooks:e.handleHooks}})],1)],1)],1)])},staticRenderFns:[]};var se=a("VU/8")(ae,ne,!1,function(e){a("ntRI")},"data-v-ece47c76",null).exports,ie={components:{Report:te},name:"ApiList",props:{host:{require:!0},config:{require:!0},run:Boolean,back:Boolean,node:{require:!0},project:{require:!0},del:Boolean},data:function(){return{checked:!1,search:"",reportName:"",asyncs:!1,filterText:"",loading:!1,expand:"&#xe65f;",dataTree:{},dialogTreeVisible:!1,dialogTableVisible:!1,summary:{},selectAPI:[],currentRow:"",currentPage:1,apiData:{count:0,results:[]},defaultProps:{children:"children",label:"label"}}},watch:{filterText:function(e){this.$refs.tree.filter(e)},run:function(){this.asyncs=!1,this.reportName="",this.getTree()},back:function(){this.getAPIList()},node:function(){this.search="",this.getAPIList()},checked:function(){this.checked?this.toggleAll():this.toggleClear()},del:function(){var e=this;0!==this.selectAPI.length?this.$confirm("此操作将永久删除API，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllAPI({data:e.selectAPI}).then(function(t){e.getAPIList()})}):this.$notify.warning({title:"提示",message:"请至少选择一个接口",duration:1e3})}},methods:{handleCopyAPI:function(e){var t=this;this.$prompt("请输入接口名称","复制接口",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"接口名称不能为空"}).then(function(a){var n=a.value;t.$api.copyAPI(e,{name:n}).then(function(e){e.success?t.getAPIList():t.$message.error(e.msg)})})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},runTree:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys();0===t.length?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):this.$api.runAPITree({host:this.host,project:this.project,relation:t,async:this.asyncs,name:this.reportName,config:this.config}).then(function(t){t.hasOwnProperty("status")?e.$message.info({message:t.msg,duration:1500}):(e.summary=t,e.dialogTableVisible=!0)})},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:1}}).then(function(t){e.dataTree=t.tree,e.dialogTreeVisible=!0})},handleSelectionChange:function(e){this.selectAPI=e},toggleAll:function(){this.$refs.multipleTable.toggleAllSelection()},toggleClear:function(){this.$refs.multipleTable.clearSelection()},getAPIList:function(){var e=this;this.$api.apiList({params:{node:this.node,project:this.project,search:this.search}}).then(function(t){e.apiData=t})},handleCurrentChange:function(e){var t=this;this.$api.getPaginationBypage({params:{page:this.currentPage,node:this.node,project:this.project,search:this.search}}).then(function(e){t.apiData=e})},handleDelApi:function(e){var t=this;this.$confirm("此操作将永久删除该API，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.delAPI(e).then(function(e){e.success?t.getAPIList():t.$message.error(e.msg)})})},handleRowClick:function(e){var t=this;this.$api.getAPISingle(e.id).then(function(e){e.success?t.$emit("api",e):t.$message.error(e.msg)})},handleRunAPI:function(e){var t=this;this.loading=!0,this.$api.runAPIByPk(e,{params:{host:this.host,config:this.config}}).then(function(e){t.summary=e,t.dialogTableVisible=!0,t.loading=!1}).catch(function(e){t.loading=!1})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},mounted:function(){this.getAPIList()}},re={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-left":"10px"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:1}},[e.apiData.count>0?a("el-checkbox",{staticStyle:{"padding-top":"14px","padding-left":"2px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAPIList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.apiData.count,expression:"apiData.count !== 0 "}],staticStyle:{"margin-top":"5px"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.apiData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"运行接口",visible:e.dialogTreeVisible,width:"45%"},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[a("div",[a("div",[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:8}},[a("el-switch",{staticStyle:{"margin-top":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"异步执行","inactive-text":"同步执行"},model:{value:e.asyncs,callback:function(t){e.asyncs=t},expression:"asyncs"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.asyncs,expression:"asyncs"}],attrs:{clearable:"",placeholder:"请输入报告名称",disabled:!1},model:{value:e.reportName,callback:function(t){e.reportName=t},expression:"reportName"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{placeholder:"输入节点名称进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search",value:""},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{"overflow-y":"scroll",height:"400px"},attrs:{data:e.dataTree,"check-strictly":!1,"filter-node-method":e.filterNode,"show-checkbox":"","check-on-click-node":"","node-key":"id","highlight-current":"",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.runTree}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"500px",top:"160px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:"calc(100%)",data:e.apiData.results,"show-header":!1,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{"min-width":"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["POST"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_post"},[a("span",{staticClass:"block-method block_method_post block_method_color"},[e._v("POST")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(t.row.url))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(t.row.name))])]):e._e(),e._v(" "),"GET"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_get"},[a("span",{staticClass:"block-method block_method_get block_method_color"},[e._v("GET")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(t.row.url))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(t.row.name))])]):e._e(),e._v(" "),"PUT"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_put"},[a("span",{staticClass:"block-method block_method_put block_method_color"},[e._v("PUT")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(t.row.url))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(t.row.name))])]):e._e(),e._v(" "),"DELETE"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_delete"},[a("span",{staticClass:"block-method block_method_delete block_method_color"},[e._v("DELETE")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(t.row.url))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(t.row.name))])]):e._e(),e._v(" "),"PATCH"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_patch"},[a("span",{staticClass:"block-method block_method_patch block_method_color"},[e._v("PATCH")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(t.row.url))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(t.row.name))])]):e._e(),e._v(" "),"HEAD"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_head"},[a("span",{staticClass:"block-method block_method_head block_method_color"},[e._v("HEAD")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(t.row.url))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(t.row.name))])]):e._e(),e._v(" "),"OPTIONS"===t.row.method.toUpperCase()?a("div",{staticClass:"block block_options"},[a("span",{staticClass:"block-method block_method_options block_method_color"},[e._v("OPTIONS")]),e._v(" "),a("span",{staticClass:"block-method block_url"},[e._v(e._s(t.row.url))]),e._v(" "),a("span",{staticClass:"block-summary-description"},[e._v(e._s(t.row.name))])]):e._e()]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.handleRowClick(t.row)}}},[a("span",[e._v("编辑")])]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.handleCopyAPI(t.row.id)}}},[a("span",[e._v("复制")])]),e._v(" "),a("el-button",{attrs:{type:"primary ",size:"mini"},on:{click:function(a){return e.handleRunAPI(t.row.id)}}},[a("span",[e._v("运行")])]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelApi(t.row.id)}}},[a("span",[e._v("删除")])])],1)]}}])})],1)],1)],1)],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(ie,re,!1,function(e){a("R7pj")},"data-v-4aa7a3fd",null).exports,le=a("//Fk"),ce=a.n(le),ue=a("mtWM"),de=a.n(ue),pe={routerName:null,token:null,user:null,useractualname:null},he="http://110.42.184.157";de.a.defaults.withCredentials=!0,de.a.defaults.baseURL=he,de.a.interceptors.request.use(function(e){return-1!==e.url.indexOf("/api/testrunner/project/?cursor=")||e.url.startsWith("/api/user/")||(e.url=e.url+"?token="+pe.token),e},function(e){return ce.a.reject(e)}),de.a.interceptors.response.use(function(e){return e},function(e){try{401===e.response.status&&Jn.replace({name:"Login"}),500===e.response.status&&i.Message.error({message:"服务器内部异常, 请检查",duration:1e3})}catch(e){i.Message.error({message:"服务器连接超时，请重试",duration:1e3})}});var me=function(e){return de.a.post("/api/user/register/",e).then(function(e){return e.data})},fe=function(e){return de.a.post("/api/user/login/",e).then(function(e){return e.data})},ve=function(e){return de.a.post("/api/testrunner/uicase/",e).then(function(e){return e.data})},ge=function(e){return de.a.get("/api/testrunner/uicase/",e).then(function(e){return e.data})},be=function(e){return de.a.get("/api/testrunner/uicase/"+e+"/").then(function(e){return e.data})},_e=function(e){return de.a.delete("/api/testrunner/uicase/"+e+"/").then(function(e){return e.data})},ye=function(e){return de.a.delete("/api/testrunner/uicase/",e).then(function(e){return e.data})},we=function(e,t){return de.a.patch("/api/testrunner/uicase/"+e+"/",t).then(function(e){return e.data})},ke=function(e,t){return de.a.post("/api/testrunner/uicase/"+e+"/",t).then(function(e){return e.data})},xe=function(e){return de.a.post("/api/testrunner/run_uicase/",e).then(function(e){return e.data})},Te=function(e,t){return de.a.get("/api/testrunner/run_uicase_pk/"+e+"/",t).then(function(e){return e.data})},Se=function(e){return de.a.get("/api/testrunner/uicase/",e).then(function(e){return e.data})},Ce=function(e){return de.a.post("/api/testrunner/run_uicase_tree/",e).then(function(e){return e.data})},$e=function(e){return de.a.get("/api/testrunner/uitest/",e).then(function(e){return e.data})},De=function(e){return de.a.get("/api/testrunner/uitest/",e).then(function(e){return e.data})},Pe=function(e){return de.a.post("/api/testrunner/uitest/",e).then(function(e){return e.data})},Fe=function(e,t){return de.a.patch("/api/testrunner/uitest/"+e+"/",t).then(function(e){return e.data})},Ie=function(e){return de.a.get("/api/testrunner/uitestplanstep/"+e+"/").then(function(e){return e.data})},Ne=function(e,t){return de.a.post("/api/testrunner/uitest/"+e+"/",t).then(function(e){return e.data})},Re=function(e){return de.a.delete("/api/testrunner/uitest/"+e+"/").then(function(e){return e.data})},Ve=function(e){return de.a.delete("/api/testrunner/uitest/",e).then(function(e){return e.data})},Ae=function(e){return de.a.post("/api/testrunner/run_testplansuite/",e).then(function(e){return e.data})},je=function(e,t){return de.a.get("/api/testrunner/run_testplansuite_pk/"+e+"/",t).then(function(e){return e.data})},Le=function(e){return de.a.post("/api/testrunner/run_testplansuite_tree/",e).then(function(e){return e.data})},Ee=function(e){return de.a.post("/api/testrunner/project/",e).then(function(e){return e.data})},ze=function(e){return de.a.delete("/api/testrunner/project/",e).then(function(e){return e.data})},Be=function(e){return de.a.get("/api/testrunner/project/").then(function(e){return e.data})},qe=function(e){return de.a.get("/api/testrunner/project/"+e+"/").then(function(e){return e.data})},Ue=function(e){return de.a.get(e).then(function(e){return e.data})},Oe=function(e){return de.a.patch("/api/testrunner/project/",e).then(function(e){return e.data})},Me=function(e){return de.a.get("/api/testrunner/debugtalk/"+e+"/").then(function(e){return e.data})},He=function(e){return de.a.patch("/api/testrunner/debugtalk/",e).then(function(e){return e.data})},Je=function(e){return de.a.post("/api/testrunner/debugtalk/",e).then(function(e){return e.data})},Ke=function(e,t){return de.a.get("/api/testrunner/tree/"+e+"/",t).then(function(e){return e.data})},We=function(e,t){return de.a.patch("/api/testrunner/tree/"+e+"/",t).then(function(e){return e.data})},Ge=function(e){return he+"/api/testrunner/file/?token="+pe.token},Ze=function(e){return de.a.post("/api/testrunner/download/",e,{responseType:"blob"})},Xe=function(e){return de.a.post("/api/testrunner/api/",e).then(function(e){return e.data})},Qe=function(e,t){return de.a.patch("/api/testrunner/api/"+e+"/",t).then(function(e){return e.data})},Ye=function(e){return de.a.get("/api/testrunner/api/",e).then(function(e){return e.data})},et=function(e){return de.a.delete("/api/testrunner/api/"+e+"/").then(function(e){return e.data})},tt=function(e){return de.a.delete("/api/testrunner/api/",e).then(function(e){return e.data})},at=function(e){return de.a.get("/api/testrunner/api/"+e+"/").then(function(e){return e.data})},nt=function(e){return de.a.get("/api/testrunner/api/",e).then(function(e){return e.data})},st=function(e){return de.a.delete("/api/testrunner/databaseconfig/"+e+"/").then(function(e){return e.data})},it=function(e,t){return de.a.put("/api/testrunner/databaseconfig/"+e+"/",t).then(function(e){return e.data})},rt=function(e){return de.a.post("/api/testrunner/databaseconfig/",e).then(function(e){return e.data})},ot=function(e,t){return de.a.get("/api/testrunner/databaseconfig/"+e+"/",t).then(function(e){return e.data})},lt=function(e){return de.a.post("/api/testrunner/test/",e).then(function(e){return e.data})},ct=function(e,t){return de.a.patch("/api/testrunner/test/"+e+"/",t).then(function(e){return e.data})},ut=function(e){return de.a.get("/api/testrunner/test/",e).then(function(e){return e.data})},dt=function(e){return de.a.delete("/api/testrunner/test/"+e+"/").then(function(e){return e.data})},pt=function(e){return de.a.delete("/api/testrunner/test/",e).then(function(e){return e.data})},ht=function(e,t){return de.a.post("/api/testrunner/test/"+e+"/",t).then(function(e){return e.data})},mt=function(e){return de.a.get("/api/testrunner/teststep/"+e+"/").then(function(e){return e.data})},ft=function(e){return de.a.get("/api/testrunner/test/",e).then(function(e){return e.data})},vt=function(e){return de.a.get("/api/testrunner/gettagcount/",e).then(function(e){return e.data})},gt=function(e){return de.a.get("/api/testrunner/getreporttail/",e).then(function(e){return e.data})},bt=function(e){return de.a.post("/api/testrunner/config/",e).then(function(e){return e.data})},_t=function(e,t){return de.a.patch("/api/testrunner/config/"+e+"/",t).then(function(e){return e.data})},yt=function(e){return de.a.get("/api/testrunner/config/",e).then(function(e){return e.data})},wt=function(e,t){return de.a.post("/api/testrunner/config/"+e+"/",t).then(function(e){return e.data})},kt=function(e,t){return de.a.post("/api/testrunner/api/"+e+"/",t).then(function(e){return e.data})},xt=function(e){return de.a.delete("/api/testrunner/config/"+e+"/").then(function(e){return e.data})},Tt=function(e){return de.a.delete("/api/testrunner/config/",e).then(function(e){return e.data})},St=function(e){return de.a.get("/api/testrunner/config/",e).then(function(e){return e.data})},Ct=function(e){return de.a.get("/api/testrunner/config/"+e+"/").then(function(e){return e.data})},$t=function(e){return de.a.post("/api/testrunner/run_api/",e).then(function(e){return e.data})},Dt=function(e,t){return de.a.get("/api/testrunner/run_api_pk/"+e+"/",t).then(function(e){return e.data})},Pt=function(e){return de.a.post("/api/testrunner/run_api_tree/",e).then(function(e){return e.data})},Ft=function(e){return de.a.post("/api/testrunner/run_testsuite/",e).then(function(e){return e.data})},It=function(e){return de.a.post("/api/testrunner/run_test/",e).then(function(e){return e.data})},Nt=function(e,t){return de.a.get("/api/testrunner/run_testsuite_pk/"+e+"/",t).then(function(e){return e.data})},Rt=function(e){return de.a.post("/api/testrunner/run_suite_tree/",e).then(function(e){return e.data})},Vt=function(e){return de.a.post("/api/testrunner/variables/",e).then(function(e){return e.data})},At=function(e){return de.a.get("/api/testrunner/variables/",e).then(function(e){return e.data})},jt=function(e){return de.a.get("/api/testrunner/variables/",e).then(function(e){return e.data})},Lt=function(e,t){return de.a.patch("/api/testrunner/variables/"+e+"/",t).then(function(e){return e.data})},Et=function(e){return de.a.delete("/api/testrunner/variables/"+e+"/").then(function(e){return e.data})},zt=function(e){return de.a.delete("/api/testrunner/variables/",e).then(function(e){return e.data})},Bt=function(e){return de.a.get("/api/testrunner/reports/",e).then(function(e){return e.data})},qt=function(e){return de.a.get("/api/testrunner/uireports/",e).then(function(e){return e.data})},Ut=function(e,t){return de.a.delete("/api/testrunner/reports/"+e+"/",t)},Ot=function(e){return de.a.get("/api/testrunner/reports/",e).then(function(e){return e.data})},Mt=function(e){return de.a.get("/api/testrunner/uireports/",e).then(function(e){return e.data})},Ht=function(e,t){return de.a.get("/api/testrunner/uireports/"+e+"/",t).then(function(e){return e.data})},Jt=function(e,t){return de.a.delete("/api/testrunner/uireports/"+e+"/",t)},Kt=function(e,t){return de()({url:"/api/testrunner/uireports/",method:"delete",params:t,data:data})},Wt=function(e,t){return de()({url:"/api/testrunner/reports/",method:"delete",params:t,data:e})},Gt=function(e,t){return de.a.get("/api/testrunner/reports/"+e+"/",t)},Zt=function(e,t){return de()({url:"/api/testrunner/schedule/",method:"POST",params:e,data:t})},Xt=function(e,t){return de()({url:"/api/testrunner/schedule/",method:"POST",params:e,data:t})},Qt=function(e,t,a){return de()({url:"/api/testrunner/schedule/"+e+"/",method:"PATCH",params:t,data:a})},Yt=function(e){return de.a.get("/api/testrunner/schedule/",e).then(function(e){return e.data})},ea=function(e){return de.a.get("/api/testrunner/schedule/",e).then(function(e){return e.data})},ta=function(e,t){return de.a.delete("/api/testrunner/schedule/"+e+"/",t)},aa=function(e,t){return de.a.delete("/api/testrunner/schedule/-1/",{params:e,data:t})},na=function(e){return de.a.post("/api/testrunner/host_ip/",e).then(function(e){return e.data})},sa=function(e){return de.a.get("/api/testrunner/host_ip/",e).then(function(e){return e.data})},ia=function(e,t){return de.a.patch("/api/testrunner/host_ip/"+e+"/",t).then(function(e){return e.data})},ra=function(e){return de.a.delete("/api/testrunner/host_ip/"+e+"/").then(function(e){return e.data})},oa=function(e){return de.a.get("/api/testrunner/host_ip/",e).then(function(e){return e.data})},la=function(e){return de.a.get("/api/testrunner/host_ip/"+e+"/").then(function(e){return e.data})},ca=function(e,t){return de()({url:"/api/testrunner/pycode/",method:"POST",data:e,params:t})},ua=function(e,t){return de.a.delete("/api/testrunner/pycode/"+e+"/",t)},da=function(e,t){return de.a.delete("/api/testrunner/pycode/",{data:e,params:t})},pa=function(e){return de.a.get("/api/testrunner/pycode/",e)},ha=function(e){return de.a.get("/api/testrunner/pycode/",e)},ma=function(e,t){return de.a.get("/api/testrunner/pycode/"+e+"/",t)},fa=function(e,t){return de.a.get("/api/testrunner/runpycode/"+e+"/",t)},va=function(e,t,a){return de()({url:"/api/testrunner/pycode/"+e+"/",method:"PATCH",params:t,data:a})},ga=function(e){return de.a.get("/api/testrunner/run_schedule_test/"+e+"/")},ba=function(e){return de.a.get("/api/testrunner/taskmeta/",e)},_a=function(e){return de.a.post("/api/testrunner/synchronization_api/",e)},ya=function(e){return de.a.post("/api/testrunner/gettokenmsg/",e)},wa={watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{ApiBody:se,ApiList:oe},computed:{initResponse:{get:function(){return this.addAPIFlag},set:function(e){this.addAPIFlag=e,this.response={id:"",body:{name:"",times:1,url:"",method:"POST",header:[{key:"",value:"",desc:""}],request:{data:[{key:"",value:"",desc:"",type:1}],params:[{key:"",value:"",desc:"",type:1}],json_data:""},validate:[{expect:"",actual:"",comparator:"equals",type:1}],variables:[{key:"",value:"",desc:"",type:1}],extract:[{key:"",value:"",desc:""}],hooks:[{setup:"",teardown:""}]}}}}},data:function(){return{loading:!1,configOptions:[],hostOptions:[],currentConfig:"请选择",currentHost:"请选择",back:!1,del:!1,run:!1,response:"",apiForm:{swaggerurl:"",token:""},nodeForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}],swaggerurl:[{required:!0,message:"请输入API地址",trigger:"blur"}],token:[{required:!0,message:"请输入token信息",trigger:"blur"}]},radio:"根节点",addAPIFlag:!1,treeId:"",maxId:"",rmid:"",dialogVisible:!1,tbdialogVisible:!1,currentNode:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[]}},methods:{quxiao:function(){this.nodeForm.name="",this.dialogVisible=!1},opentb:function(){this.apiForm={swaggerurl:"",token:""},this.tbdialogVisible=!0},handleBackList:function(){this.addAPIFlag=!1,this.back=!this.back},handleDragEnd:function(){this.updateTree(!1)},handleAddSuccess:function(){this.back=!this.back,this.addAPIFlag=!1},handleAPI:function(e){this.addAPIFlag=!0,this.response=e},synchronizationAPIConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&t.$confirm("此操作将覆盖所有分组和接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=i.Loading.service({text:"加载中..."});t.$api.synchronizationapi({project:t.$route.params.id,swaggerurl:t.apiForm.swaggerurl,token:t.apiForm.token,nodeid:t.currentNode.id}).then(function(a){e.close(),t.tbdialogVisible=!1,t.getTree})})})},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:1}}).then(function(t){e.dataTree=t.tree,e.treeId=t.id,e.maxId=t.max})},getConfig:function(){var e=this;this.$api.getAllConfig(this.$route.params.id).then(function(t){e.configOptions=t.results,e.configOptions.push({name:"请选择"})})},getHost:function(){var e=this;this.$api.getAllHost(this.$route.params.id).then(function(t){e.hostOptions=t.results,e.hostOptions.push({name:"请选择"})})},updateTree:function(e){var t=this;this.$api.updateTree(this.treeId,{body:this.dataTree,node:this.currentNode.id,mode:e,type:1}).then(function(e){e.success?(t.dataTree=e.tree,t.maxId=e.max):t.$message.error(e.msg)})},deleteNode:function(){var e=this;this.$confirm("此操作将永久删除该节点下所有接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""===e.currentNode?e.$message.info("请选择一个节点"):0!==e.currentNode.children.length?e.$message.warning("此节点有子节点，不可删除！"):(e.remove(e.currentNode,e.data),e.updateTree(!0))})},renameNode:function(){var e=this;this.$prompt("请输入节点名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"节点名称不能为空"}).then(function(t){var a=t.value,n=e.data.parent,s=n.data.children||n.data;s[s.findIndex(function(t){return t.id===e.currentNode.id})].label=a,e.updateTree(!1)})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.append(t.currentNode),t.updateTree(!1),t.nodeForm.name="",t.dialogVisible=!1)})},handleNodeClick:function(e,t){this.addAPIFlag=!1,this.currentNode=e,this.data=t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},remove:function(e,t){var a=t.parent,n=a.data.children||a.data,s=n.findIndex(function(t){return t.id===e.id});n.splice(s,1)},append:function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var a={id:t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t(),label:this.nodeForm.name,children:[]};""!==e&&0!==this.dataTree.length&&"根节点"!==this.radio?(e.children||this.$set(e,"children",[]),e.children.push(a)):this.dataTree.push(a)}},name:"RecordApi",mounted:function(){this.getTree(),this.getConfig(),this.getHost()}},ka={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    新建分组\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"新建分组",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"nodeForm",staticClass:"project",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"根节点"}}),e._v(" "),a("el-radio-button",{attrs:{label:"子节点"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.quxiao()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("nodeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.deleteNode}},[e._v("删除分组\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"info",size:"small",icon:"el-icon-edit-outline"},on:{click:e.renameNode}},[e._v("重命名\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.initResponse=!0}}},[e._v("添加接口\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){return e.opentb()}}},[e._v("同步接口\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"同步swagger-ui接口",visible:e.tbdialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.tbdialogVisible=t}}},[a("el-form",{ref:"apiForm",staticClass:"project",attrs:{model:e.apiForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"API地址",prop:"swaggerurl"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入完整的API接口地址"},model:{value:e.apiForm.swaggerurl,callback:function(t){e.$set(e.apiForm,"swaggerurl",t)},expression:"apiForm.swaggerurl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"token",prop:"token"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入接口的token信息"},model:{value:e.apiForm.token,callback:function(t){e.$set(e.apiForm,"token",t)},expression:"apiForm.token"}})],1),e._v(" "),a("p",{staticStyle:{color:"red"}},[e._v("同步接口会覆盖现有的API组织架构及API接口，请谨慎操作！")])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tbdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.synchronizationAPIConfirm("apiForm")}}},[e._v("同 步")])],1)],1),e._v("\n\n\n                 环境:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px"},model:{value:e.currentHost,callback:function(t){e.currentHost=t},expression:"currentHost"}},e._l(e.hostOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1),e._v("\n                 配置:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px",filterable:""},model:{value:e.currentConfig,callback:function(t){e.currentConfig=t},expression:"currentConfig"}},e._l(e.configOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),e.addAPIFlag?e._e():a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.run=!e.run}}},[e._v("运行")]),e._v(" "),e.addAPIFlag?e._e():a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:!e.addAPIFlag,type:"text"},on:{click:e.handleBackList}},[e._v("返回列表\n                ")])],1)])]),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,draggable:"","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("api-body",{directives:[{name:"show",rawName:"v-show",value:e.addAPIFlag,expression:"addAPIFlag"}],attrs:{nodeId:e.currentNode.id,project:e.$route.params.id,response:e.response,config:e.currentConfig,host:e.currentHost},on:{addSuccess:e.handleAddSuccess}}),e._v(" "),a("api-list",{directives:[{name:"show",rawName:"v-show",value:!e.addAPIFlag,expression:"!addAPIFlag"}],attrs:{node:""!==e.currentNode?e.currentNode.id:"",project:e.$route.params.id,config:e.currentConfig,host:e.currentHost,del:e.del,back:e.back,run:e.run},on:{api:e.handleAPI}})],1)],1)],1)},staticRenderFns:[]};var xa=a("VU/8")(wa,ka,!1,function(e){a("Jp03")},"data-v-69ec3fc9",null).exports,Ta=a("mvHQ"),Sa=a.n(Ta),Ca=a("w/TU"),$a=a.n(Ca),Da={components:{Headers:L,Request:B,Extract:O,Validate:J,Variables:G,Hooks:Q,Report:te},props:{response:{require:!0},host:{require:!0}},methods:{handleHeader:function(e,t){this.header=t,this.tempBody.header=e},handleRequest:function(e,t){this.request=t,this.tempBody.request=e},handleValidate:function(e,t){this.validate=t,this.tempBody.validate=e},handleExtract:function(e,t){this.extract=t,this.tempBody.extract=e},handleVariables:function(e,t){this.variables=t,this.tempBody.variables=e},handleHooks:function(e,t){if(this.hooks=t,this.tempBody.hooks=e,this.tempBody.url=this.url,this.tempBody.method=this.method,this.tempBody.name=this.name,this.tempBody.times=this.times,this.validateData()){var a={header:this.header,request:this.request,extract:this.extract,validate:this.validate,variables:this.variables,hooks:this.hooks,url:this.url,method:this.method,name:this.name,times:this.times};this.$emit("getNewBody",a,this.tempBody),this.run=!1}},validateData:function(){return""===this.url?(this.$notify.error({title:"url错误",message:"接口请求地址不能为空",duration:1500}),!1):""!==this.name||(this.$notify.error({title:"name错误",message:"接口名称不能为空",duration:1500}),!1)}},watch:{esc:function(){this.$emit("escEdit")}},data:function(){return{loading:!1,run:!1,esc:!1,times:this.response.body.times,name:this.response.body.name,url:this.response.body.url,header:[],request:[],extract:[],validate:[],variables:[],hooks:[],tempBody:{},method:this.response.body.method,save:!1,summary:{},dialogTableVisible:!1,activeTag:"second",httpOptions:[{label:"GET"},{label:"POST"},{label:"PUT"},{label:"DELETE"},{label:"HEAD"},{label:"OPTIONS"},{label:"PATCH"}]}},name:"TestBody",mounted:function(){this.header=this.response.body.header,this.request=this.response.body.request,this.extract=this.response.body.extract,this.validate=this.response.body.validate,this.variables=this.response.body.variables,this.hooks=this.response.body.hooks}},Pa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{slot:"prepend"},[e._v("接口信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("保存\n                ")])],2),e._v(" "),a("el-button",{attrs:{slot:"append",type:"danger"},on:{click:function(t){e.esc=!e.esc}},slot:"append"},[e._v("返回\n            ")])],1),e._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入接口请求地址",clearable:""},model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[a("el-select",{attrs:{slot:"prepend",size:"small"},slot:"prepend",model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},e._l(e.httpOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)],1),e._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"循环次数",placement:"bottom"}},[a("el-input-number",{staticStyle:{width:"120px"},attrs:{"controls-position":"right",min:1,max:100},model:{value:e.times,callback:function(t){e.times=t},expression:"times"}})],1)],1),e._v(" "),e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"request"},[a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"请求头",name:"first"}},[a("headers",{attrs:{save:e.save,header:e.header},on:{header:e.handleHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"请求体",name:"second"}},[a("request",{attrs:{save:e.save,request:e.request},on:{request:e.handleRequest}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"提取器",name:"third"}},[a("extract",{attrs:{save:e.save,extract:e.extract},on:{extract:e.handleExtract}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"断言",name:"fourth"}},[a("validate",{attrs:{save:e.save,validate:e.validate},on:{validate:e.handleValidate}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"变量设置",name:"five"}},[a("variables",{attrs:{save:e.save,variables:e.variables},on:{variables:e.handleVariables}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"前后置方法设置",name:"six"}},[a("hooks",{attrs:{save:e.save,hooks:e.hooks},on:{hooks:e.handleHooks}})],1)],1)],1)])},staticRenderFns:[]};var Fa=a("VU/8")(Da,Pa,!1,function(e){a("E2U4")},"data-v-4abd7b6e",null).exports,Ia={components:{draggable:$a.a,HttpRunner:Fa,Report:te},computed:{isConfigExist:{get:function(){return this.testData.length>0&&"config"===this.testData[0].body.method&&"请选择"!==this.testData[0].body.name}}},props:{host:{require:!0},config:{require:!0},configdesc:{require:!0},project:{require:!0},node:{require:!0},testStepResp:{require:!1},back:Boolean},name:"EditTest",watch:{config:function(){console.log(this.configdesc);var e={body:{name:this.config,method:"config"}};0!==this.testData.length&&"config"===this.testData[0].body.method||"请选择"===this.config?"请选择"!==this.config&&this.testData.splice(0,1,e):this.testData.splice(0,0,e)},back:function(){this.editTestStepActivate=!1},filterText:function(e){this.$refs.tree2.filter(e)},testStepResp:function(){try{this.testName=this.testStepResp.case.name,this.testId=this.testStepResp.case.id,this.testTag=this.testStepResp.case.tag,this.relation=this.testStepResp.case.relation,this.testData=JSON.parse(Sa()(this.testStepResp.step))}catch(e){this.testName="",this.testId="",this.testTag="集成用例",this.testData=JSON.parse(Sa()(this.testStepResp))}}},data:function(){return{tagOptions:{1:"冒烟用例",2:"集成用例",3:"监控脚本",4:"回归用例",5:"系统用例",6:"空库用例"},suite_loading:!1,loading:!1,dialogTableVisible:!1,editTestStepActivate:!1,currentPage:1,length:0,testId:"",search:"",testName:"",relation:"",testTag:"集成用例",currentTest:"",currentNode:"",currentAPI:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],summary:{},apiData:{count:0,results:[]},testData:[]}},methods:{handleNewBody:function(e,t){this.editTestStepActivate=!1;var a=this.testData[this.currentTest].case,n=this.testData[this.currentTest].id;this.testData[this.currentTest]={body:e,newBody:t,case:a,id:n}},validateData:function(){return""===this.testName||this.testName.length>100?(this.$notify.warning({title:"提示",duration:1e3,message:"用例集名称必填，不能超过100个字符"}),!1):0===this.testData.length?(this.$notify.warning({title:"提示",duration:1e3,message:"测试用例集至少包含一个接口"}),!1):"config"!==this.testData[0].body.method||1!==this.testData.length||(this.$notify.warning({title:"提示",duration:1e3,message:"测试用例集至少包含一个接口"}),!1)},addTestSuite:function(){var e=this,t=this.testData.length;"config"===this.testData[0].body.method&&(t-=1),this.$api.addTestCase({length:t,project:this.project,relation:this.node,name:this.testName,body:this.testData,tag:this.testTag}).then(function(t){t.success?e.$emit("addSuccess"):e.$message({message:t.msg,type:"error",duration:1e3})})},updateTestSuite:function(){var e=this,t=this.testData.length;"config"===this.testData[0].body.method&&(t-=1),this.$api.updateTestCase(this.testId,{length:t,name:this.testName,tag:this.testTag,body:this.testData,project:this.project,relation:this.relation}).then(function(t){t.success?e.$emit("addSuccess"):e.$message({message:t.msg,type:"error",duration:1e3})})},handleClickSave:function(){this.validateData()&&(""===this.testId?this.addTestSuite():this.updateTestSuite())},handleClickRun:function(){var e=this;this.validateData()&&(this.suite_loading=!0,this.$api.runSingleTestSuite({host:this.host,name:this.testName,body:this.testData,project:this.project}).then(function(t){e.suite_loading=!1,e.summary=t,e.dialogTableVisible=!0}).catch(function(t){e.suite_loading=!1}))},handleSingleRun:function(){var e=this;this.loading=!0;var t=null;this.testData.length>0&&"config"===this.testData[0].body.method&&(t=this.testData[0].body),this.$api.runSingleTest({host:this.host,config:t,body:this.testData[this.currentTest],project:this.project}).then(function(t){e.loading=!1,e.summary=t,e.dialogTableVisible=!0}).catch(function(t){e.loading=!1})},handlePageChange:function(e){var t=this;this.$api.getPaginationBypage({params:{page:this.currentPage,node:this.currentNode,project:this.project,search:this.search}}).then(function(e){t.apiData=e})},getAPIList:function(){var e=this;this.$api.apiList({params:{node:this.currentNode,project:this.project,search:this.search}}).then(function(t){e.apiData=t})},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:1}}).then(function(t){e.dataTree=t.tree})},handleNodeClick:function(e,t){this.currentNode=e.id,this.data=t,this.getAPIList()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},dragEnd:function(e){this.testData.length>this.length&&this.testData.splice(this.length,1)},drop:function(e){e.preventDefault(),this.testData.push(this.currentAPI)},allowDrop:function(e){e.preventDefault()}},mounted:function(){this.getTree(),this.getAPIList()}},Na={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editTestStepActivate,expression:"!editTestStepActivate"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入接口名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getAPIList},slot:"append"})],1)],1),e._v(" "),a("el-col",{staticStyle:{right:"145px",position:"absolute"},attrs:{span:30}},[e.testData.length>0?a("el-input",{staticStyle:{width:"400px","text-align":"center"},attrs:{placeholder:"请输入测试用例名称",clearable:""},model:{value:e.testName,callback:function(t){e.testName=t},expression:"testName"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.testTag,callback:function(t){e.testTag=t},expression:"testTag"}},e._l(e.tagOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:e.handleClickSave},slot:"append"},[e._v("保存\n                        ")])],1):e._e(),e._v(" "),e.testData.length>0?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.suite_loading,expression:"suite_loading"}],attrs:{type:"primary"},on:{click:e.handleClickRun},model:{value:e.testName,callback:function(t){e.testName=t},expression:"testName"}},[e._v("发送\n                    ")]):e._e()],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editTestStepActivate,expression:"!editTestStepActivate"}],staticStyle:{"margin-top":"10px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[e._l(e.apiData.results,function(t,n){return a("div",{key:n,staticStyle:{cursor:"pointer","margin-top":"10px"},attrs:{draggable:"true"},on:{dragstart:function(a){e.currentAPI=JSON.parse(JSON.stringify(t))}}},["POST"===t.method.toUpperCase()?a("div",{staticClass:"block block_post"},[a("span",{staticClass:"block-method block_method_post block_method_color"},[e._v("POST")]),e._v(" "),a("el-tooltip",{attrs:{content:t.url,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.url))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.name))])])],1):e._e(),e._v(" "),"GET"===t.method.toUpperCase()?a("div",{staticClass:"block block_get"},[a("span",{staticClass:"block-method block_method_get block_method_color"},[e._v("GET")]),e._v(" "),a("el-tooltip",{attrs:{content:t.url,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.url))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.name))])])],1):e._e(),e._v(" "),"PUT"===t.method.toUpperCase()?a("div",{staticClass:"block block_put"},[a("span",{staticClass:"block-method block_method_put block_method_color"},[e._v("PUT")]),e._v(" "),a("el-tooltip",{attrs:{content:t.url,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.url))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.name))])])],1):e._e(),e._v(" "),"DELETE"===t.method.toUpperCase()?a("div",{staticClass:"block block_delete"},[a("span",{staticClass:"block-method block_method_delete block_method_color"},[e._v("DELETE")]),e._v(" "),a("el-tooltip",{attrs:{content:t.url,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.url))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.name))])])],1):e._e(),e._v(" "),"PATCH"===t.method.toUpperCase()?a("div",{staticClass:"block block_patch"},[a("span",{staticClass:"block-method block_method_patch block_method_color"},[e._v("PATCH")]),e._v(" "),a("el-tooltip",{attrs:{content:t.url,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.url))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.name))])])],1):e._e(),e._v(" "),"HEAD"===t.method.toUpperCase()?a("div",{staticClass:"block block_head"},[a("span",{staticClass:"block-method block_method_head block_method_color"},[e._v("HEAD")]),e._v(" "),a("el-tooltip",{attrs:{content:t.url,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.url))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.name))])])],1):e._e(),e._v(" "),"OPTIONS"===t.method.toUpperCase()?a("div",{staticClass:"block block_options"},[a("span",{staticClass:"block-method block_method_options block_method_color"},[e._v("OPTIONS")]),e._v(" "),a("el-tooltip",{attrs:{content:t.url,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.url))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.name))])])],1):e._e()])}),e._v(" "),a("el-footer",{staticStyle:{"padding-top":"30px","padding-left":"0px"}},[a("el-col",{attrs:{span:10}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.apiData.count,expression:"apiData.count !== 0"}],staticStyle:{"margin-top":"5px","text-align":"center"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.apiData.count},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],2),e._v(" "),a("el-col",{attrs:{span:12}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("div",{staticStyle:{"max-height":"600px",overflow:"auto"},on:{drop:function(t){return e.drop(t)},dragover:function(t){return e.allowDrop(t)}}},[a("div",{staticClass:"test-list"},[0===e.testData.length?a("span",{staticStyle:{color:"red"}},[e._v("温馨提示："),a("br"),e._v("选择左侧相应API节点显示可拖拽的API"),a("br"),e._v("从左边拖拽API至此区域组成业务用例"),a("br"),e._v("\n                                上下拖动此区域接口调整接口调用顺序\n                            ")]):e._e(),e._v(" "),e.isConfigExist?a("div",{staticClass:"block block_test",on:{mousemove:function(t){e.currentTest=-1}}},[a("span",{staticClass:"block-method block_method_config block_method_color"},[e._v(e._s(e.testData[0].body.method))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.testData[0].body.name,expression:"testData[0].body.name"}],staticClass:"block-test-name",attrs:{disabled:""},domProps:{value:e.testData[0].body.name},on:{input:function(t){t.target.composing||e.$set(e.testData[0].body,"name",t.target.value)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:-1===e.currentTest,expression:"currentTest === -1"}],staticStyle:{position:"absolute",right:"12px",top:"8px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.testData.splice(e.index,1)}}})],1):e._e(),e._v(" "),a("draggable",{attrs:{"v-model":e.testData,options:{animation:200}},on:{end:e.dragEnd,start:function(t){e.length=e.testData.length}}},e._l(e.testData,function(t,n){return"config"!==t.body.method?a("div",{key:n,staticClass:"block block_test",on:{mousemove:function(t){e.currentTest=n}}},[a("span",{staticClass:"block-method block_method_test block_method_color"},[e._v("A P I")]),e._v(" "),a("span",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis"}},[e._v(e._s(t.body.name))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"84px",top:"8px"},attrs:{type:"info",icon:"el-icon-edit",circle:"",size:"mini"},on:{click:function(t){e.editTestStepActivate=!0}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"48px",top:"8px"},attrs:{type:"success",icon:"el-icon-caret-right",circle:"",size:"mini"},on:{click:e.handleSingleRun}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"12px",top:"8px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.testData.splice(n,1)}}})],1):e._e()}),0)],1)])],1)],1)],1),e._v(" "),e.editTestStepActivate?a("http-runner",{attrs:{host:e.host,response:e.testData[e.currentTest],config:e.config,configdesc:e.configdesc},on:{escEdit:function(t){e.editTestStepActivate=!1},getNewBody:e.handleNewBody}}):e._e()],1)],1)},staticRenderFns:[]};var Ra=a("VU/8")(Ia,Na,!1,function(e){a("OI3U")},"data-v-35b5fcc9",null).exports,Va={name:"TestList",components:{Report:te},props:{run:Boolean,back:Boolean,project:{require:!0},host:{require:!0},node:{require:!1},del:Boolean},watch:{filterText:function(e){this.$refs.tree.filter(e)},run:function(){this.asyncs=!1,this.reportName="",this.getTree()},node:function(){this.search="",this.getTestList()},back:function(){this.getTestList()},del:function(){var e=this;0!==this.selectTest.length?this.$confirm("此操作将永久删除测试用例集，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllTest({data:e.selectTest}).then(function(t){e.getTestList()})}):this.$notify.warning({title:"提示",message:"请至少选择一个用例集",duration:1e3})}},data:function(){return{search:"",options:[{value:"",label:"全部"},{value:"1",label:"冒烟用例"},{value:"2",label:"集成用例"},{value:"3",label:"监控脚本"},{value:"4",label:"回归用例"},{value:"5",label:"系统用例"},{value:"6",label:"空库用例"}],value:"",reportName:"",asyncs:!1,filterText:"",expand:"&#xe65f;",dialogTreeVisible:!1,dataTree:{},loading:!1,dialogTableVisible:!1,selectTest:[],summary:{},currentRow:"",testData:{count:0,results:[]},currentPage:1,defaultProps:{children:"children",label:"label"}}},methods:{getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:2}}).then(function(t){e.dataTree=t.tree,e.dialogTreeVisible=!0})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},runTree:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys();0===t.length?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):this.$api.runSuiteTree({host:this.host,project:this.project,relation:t,async:this.asyncs,name:this.reportName}).then(function(t){t.hasOwnProperty("status")?e.$message.info({message:t.msg,duration:1500}):(e.summary=t,e.dialogTableVisible=!0)})},handleRunTest:function(e,t){var a=this;this.loading=!0,this.$api.runTestByPk(e,{params:{project:this.project,name:t,host:this.host}}).then(function(e){a.summary=e,a.dialogTableVisible=!0,a.loading=!1}).catch(function(e){a.loading=!1})},handleCurrentChange:function(e){var t=this;this.$api.getTestPaginationBypage({params:{page:this.currentPage,project:this.project,tag:this.value,node:this.node,search:this.search}}).then(function(e){t.testData=e})},handleEditTest:function(e){var t=this;this.$api.editTest(e).then(function(e){t.$emit("testStep",e)})},handleCopyTest:function(e){var t=this;this.$prompt("请输入用例集名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"用例集不能为空"}).then(function(a){var n=a.value;t.$api.coptTest(e,{name:n,relation:t.node,project:t.project}).then(function(e){e.success?t.getTestList():t.$message.error(e.msg)})})},handleSelectionChange:function(e){this.selectTest=e},handleDelTest:function(e){var t=this;this.$confirm("此操作将永久删除该测试用例集，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteTest(e).then(function(e){e.success?t.getTestList():t.$message.error(e.msg)})})},getTestList:function(){var e=this;this.$api.testList({params:{project:this.project,node:this.node,search:this.search,tag:this.value}}).then(function(t){e.testData=t})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},mounted:function(){this.getTestList()}},Aa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"padding-top":"10px",height:"50px"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{staticStyle:{"padding-left":"25px","padding-right":"0px",width:"25%"},attrs:{span:7}},[e._v("\n                      用例类型:                    \n                  "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getTestList},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入用例名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getTestList},slot:"append"})],1)],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px",height:"700px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"500px",top:"160px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"运行测试用例集",visible:e.dialogTreeVisible,width:"45%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[a("div",[a("div",[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:8}},[a("el-switch",{staticStyle:{"margin-top":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"异步执行","inactive-text":"同步执行"},model:{value:e.asyncs,callback:function(t){e.asyncs=t},expression:"asyncs"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.asyncs,expression:"asyncs"}],attrs:{clearable:"",placeholder:"请输入报告名称",disabled:!1},model:{value:e.reportName,callback:function(t){e.reportName=t},expression:"reportName"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{value:"",placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{"overflow-y":"scroll",height:"400px"},attrs:{data:e.dataTree,"check-strictly":!1,"filter-node-method":e.filterNode,"show-checkbox":"","check-on-click-node":"","node-key":"id","highlight-current":"",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.runTree}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{"highlight-current-row":"",data:e.testData.results,"show-header":0!==e.testData.count,stripe:"",height:"700px"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"用例名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"API个数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.length)+" 个")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用例类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["冒烟用例"===t.row.tag?a("el-tag",[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"集成用例"===t.row.tag?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"监控脚本"===t.row.tag?a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"回归用例"===t.row.tag?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"系统用例"===t.row.tag?a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"空库用例"===t.row.tag?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.tag))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.handleEditTest(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleRunTest(t.row.id,t.row.name)}}},[e._v("运行")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.handleCopyTest(t.row.id)}}},[e._v("复制\n                                ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelTest(t.row.id)}}},[e._v("删除\n                                ")])],1)]}}])})],1),e._v(" "),a("div",[a("el-footer",{staticStyle:{"padding-top":"30px"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:9}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.testData.count,expression:"testData.count !== 0 "}],attrs:{"current-page":e.currentPage,"page-size":11,background:"",layout:"total, prev, pager, next, jumper",total:e.testData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)],1)],1)])],1)],1)},staticRenderFns:[]};var ja={computed:{buttonActivate:{get:function(){return!this.addTestActivate||""===this.currentNode},set:function(e){this.addTestActivate=e,this.testStepResp=[]}}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{EditTest:Ra,TestList:a("VU/8")(Va,Aa,!1,function(e){a("5jK+")},"data-v-68049a0e",null).exports},data:function(){return{testStepResp:[],nodeForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}]},hostOptions:[],back:!1,del:!1,run:!1,radio:"根节点",addTestActivate:!0,currentConfig:"请选择",currentHost:"请选择",treeId:"",maxId:"",dialogVisible:!1,currentNode:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],configOptions:[]}},methods:{handleDragEnd:function(){this.updateTree(!1)},getConfig:function(){var e=this;this.$api.getAllConfig(this.$route.params.id).then(function(t){e.configOptions=t.results,e.configOptions.push({name:"请选择"})})},handleBackList:function(){this.addTestActivate=!0,this.back=!this.back},quxiao:function(){this.nodeForm.name="",this.dialogVisible=!1},handleTestStep:function(e){this.testStepResp=e,this.addTestActivate=!1},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:2}}).then(function(t){e.dataTree=t.tree,e.treeId=t.id,e.maxId=t.max})},updateTree:function(e){var t=this;this.$api.updateTree(this.treeId,{mode:e,body:this.dataTree,node:this.currentNode.id,type:2}).then(function(e){e.success?(t.dataTree=e.tree,t.maxId=e.max):t.$message.error(e.msg)})},renameNode:function(){var e=this;this.$prompt("请输入节点名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"节点名称不能为空"}).then(function(t){var a=t.value,n=e.data.parent,s=n.data.children||n.data;s[s.findIndex(function(t){return t.id===e.currentNode.id})].label=a,e.updateTree(!1)})},deleteNode:function(){var e=this;this.$confirm("此操作将永久删除该节点下所有用例, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""===e.currentNode?e.$message.info("请选择一个节点"):0!==e.currentNode.children.length?e.$message.warning("此节点有子节点，不可删除！"):(e.remove(e.currentNode,e.data),e.updateTree(!0))})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.append(t.currentNode),t.updateTree(!1),t.dialogVisible=!1,t.nodeForm.name="")})},handleNodeClick:function(e,t){this.currentNode=e,this.data=t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},remove:function(e,t){var a=t.parent,n=a.data.children||a.data,s=n.findIndex(function(t){return t.id===e.id});n.splice(s,1)},append:function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var a={id:t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t(),label:this.nodeForm.name,children:[]};""!==e&&0!==this.dataTree.length&&"根节点"!==this.radio?(e.children||this.$set(e,"children",[]),e.children.push(a)):this.dataTree.push(a)},getHost:function(){var e=this;this.$api.getAllHost(this.$route.params.id).then(function(t){e.hostOptions=t.results,e.hostOptions.push({name:"请选择"})})}},name:"AutoTest",mounted:function(){this.getTree(),this.getConfig(),this.getHost()}},La={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus",disabled:!e.addTestActivate},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    新建分组\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"新建分组",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"nodeForm",staticClass:"project",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"根节点"}}),e._v(" "),a("el-radio-button",{attrs:{label:"子节点"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.quxiao()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("nodeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.buttonActivate},on:{click:e.deleteNode}},[e._v("删除分组\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"info",size:"small",icon:"el-icon-edit-outline"},on:{click:e.renameNode}},[e._v("重命名\n                ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline",disabled:e.buttonActivate},on:{click:function(t){e.buttonActivate=!1}}},[e._v("添加用例\n                ")]),e._v("\n                 环境:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px"},model:{value:e.currentHost,callback:function(t){e.currentHost=t},expression:"currentHost"}},e._l(e.hostOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1),e._v("\n                 配置:\n                "),a("el-select",{attrs:{placeholder:"请选择",size:"small",tyle:"margin-left: -6px",filterable:"",disabled:e.addTestActivate},model:{value:e.currentConfig,callback:function(t){e.currentConfig=t},expression:"currentConfig"}},e._l(e.configOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1),e._v(" "),e.addTestActivate?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.run=!e.run}}},[e._v("运行")]):e._e(),e._v(" "),e.addTestActivate?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]):e._e(),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:e.addTestActivate,type:"text"},on:{click:e.handleBackList}},[e._v("返回列表\n                ")])],1)])]),e._v(" "),a("el-container",[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.addTestActivate,expression:"addTestActivate"}],staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!0,"expand-on-click-node":!1,draggable:"","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("test-list",{directives:[{name:"show",rawName:"v-show",value:e.addTestActivate,expression:"addTestActivate"}],attrs:{project:e.$route.params.id,node:""!==e.currentNode?e.currentNode.id:"",del:e.del,back:e.back,run:e.run,host:e.currentHost},on:{testStep:e.handleTestStep}}),e._v(" "),a("edit-test",{directives:[{name:"show",rawName:"v-show",value:!e.addTestActivate,expression:"!addTestActivate"}],attrs:{back:e.back,project:e.$route.params.id,node:e.currentNode.id,testStepResp:e.testStepResp,config:e.currentConfig,host:e.currentHost},on:{addSuccess:e.handleBackList}})],1)],1)],1)},staticRenderFns:[]};var Ea=a("VU/8")(ja,La,!1,function(e){a("QM1O")},"data-v-eba90bfe",null).exports,za={data:function(){return{search:"",selectVariables:[],currentRow:"",currentPage:1,variablesData:{count:0,results:[]},editdialogVisible:!1,dialogVisible:!1,tkdialogVisible:!1,variablesForm:{key:"",value:"",desc:"",project:this.$route.params.id},tokenForm:{project:this.$route.params.id,publickeyurl:"",loginurl:"",username:"",password:""},editVariablesForm:{key:"",value:"",desc:"",id:""},rules:{key:[{required:!0,message:"请输入变量名",trigger:"blur"},{min:1,max:100,message:"最多不超过100个字符",trigger:"blur"}],value:[{required:!0,message:"请输入变量值",trigger:"blur"},{min:1,max:1024,message:"最多不超过1024个字符",trigger:"blur"}],publickeyurl:[{required:!0,message:"请输入公钥接口",trigger:"blur"},{min:1,max:1024,message:"最多不超过1024个字符",trigger:"blur"}],loginurl:[{required:!0,message:"请输入登陆接口",trigger:"blur"},{min:1,max:1024,message:"最多不超过1024个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}]}}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEditVariables:function(e){this.editVariablesForm={key:e.key,value:e.value,desc:e.desc,id:e.id},this.editdialogVisible=!0},handlegettokenvariables:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.tkdialogVisible=!1,t.$api.gettokenmsg(t.tokenForm).then(function(e){t.tokenForm.username="",t.tokenForm.password="",t.tokenForm.loginurl="",t.tokenForm.publickeyurl="",t.getVariablesList()}))})},handleDelVariables:function(e){var t=this;this.$confirm("此操作将永久删除该全局变量，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteVariables(e).then(function(e){e.success?t.getVariablesList():t.$message.error(e.msg)})})},handleSelectionChange:function(e){this.selectVariables=e},handleCurrentChange:function(e){var t=this;this.$api.getVariablesPaginationBypage({params:{page:this.currentPage,project:this.variablesForm.project,search:this.search}}).then(function(e){t.variablesData=e})},delSelectionVariables:function(){var e=this;0!==this.selectVariables.length?this.$confirm("此操作将永久删除勾选的全局变量，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllVariabels({data:e.selectVariables}).then(function(t){e.getVariablesList()})}):this.$notify.warning({title:"提示",message:"请至少勾选一个全局变量",duration:1e3})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogVisible=!1,t.$api.addVariables(t.variablesForm).then(function(e){e.success?(t.variablesForm.key="",t.variablesForm.value="",t.variablesForm.desc="",t.getVariablesList()):t.$message.info({message:e.msg,duration:1e3})}))})},handleEditConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.editdialogVisible=!1,t.$api.updateVariables(t.editVariablesForm.id,t.editVariablesForm).then(function(e){e.success?t.getVariablesList():t.$message.info({message:e.msg,duration:1e3})}))})},getVariablesList:function(){var e=this;this.$api.variablesList({params:{project:this.variablesForm.project,search:this.search}}).then(function(t){console.log(t),e.variablesData=t})}},name:"GlobalEnv",mounted:function(){this.getVariablesList()}},Ba={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增变量\n                ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.tkdialogVisible=!0}}},[e._v("生成token变量\n                ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.variablesData.count,expression:"variablesData.count !== 0 "}],staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:e.delSelectionVariables}},[e._v("批量删除")]),e._v(" "),a("el-dialog",{attrs:{title:"添加变量",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"variablesForm",staticClass:"project",attrs:{model:e.variablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"变量名",prop:"key"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量名"},model:{value:e.variablesForm.key,callback:function(t){e.$set(e.variablesForm,"key",t)},expression:"variablesForm.key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量值",prop:"value"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量值"},model:{value:e.variablesForm.value,callback:function(t){e.$set(e.variablesForm,"value",t)},expression:"variablesForm.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量描述",prop:"desc"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入描述"},model:{value:e.variablesForm.desc,callback:function(t){e.$set(e.variablesForm,"desc",t)},expression:"variablesForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("variablesForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑变量",visible:e.editdialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.editdialogVisible=t}}},[a("el-form",{ref:"editVariablesForm",staticClass:"project",attrs:{model:e.editVariablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"变量名",prop:"key"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量名"},model:{value:e.editVariablesForm.key,callback:function(t){e.$set(e.editVariablesForm,"key",t)},expression:"editVariablesForm.key"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量值",prop:"value"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入变量值"},model:{value:e.editVariablesForm.value,callback:function(t){e.$set(e.editVariablesForm,"value",t)},expression:"editVariablesForm.value"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"变量描述",prop:"desc"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入描述"},model:{value:e.editVariablesForm.desc,callback:function(t){e.$set(e.editVariablesForm,"desc",t)},expression:"editVariablesForm.desc"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEditConfirm("editVariablesForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"生成token全局变量",visible:e.tkdialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.tkdialogVisible=t}}},[a("el-form",{ref:"tokenForm",staticClass:"project",attrs:{model:e.tokenForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"公钥接口",prop:"publickeyurl"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入公钥接口"},model:{value:e.tokenForm.publickeyurl,callback:function(t){e.$set(e.tokenForm,"publickeyurl",t)},expression:"tokenForm.publickeyurl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"登陆接口",prop:"loginurl"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入登陆接口"},model:{value:e.tokenForm.loginurl,callback:function(t){e.$set(e.tokenForm,"loginurl",t)},expression:"tokenForm.loginurl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户账号",prop:"username"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入用户账号"},model:{value:e.tokenForm.username,callback:function(t){e.$set(e.tokenForm,"username",t)},expression:"tokenForm.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户密码",prop:"password"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入用户密码"},model:{value:e.tokenForm.password,callback:function(t){e.$set(e.tokenForm,"password",t)},expression:"tokenForm.password"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tkdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handlegettokenvariables("tokenForm")}}},[e._v("确 定")])],1)],1)],1)])]),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-top":"8px","padding-left":"30px",overflow:"hidden"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入变量名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getVariablesList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.variablesData.count,expression:"variablesData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.variablesData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"150px"}},[a("el-table",{attrs:{"highlight-current-row":"",data:e.variablesData.results,"show-header":0!==e.variablesData.results.length,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"变量名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.key))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"变量值","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.value))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.desc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.handleEditVariables(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.variablesData.count,expression:"variablesData.count !== 0"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelVariables(t.row.id)}}},[e._v("删除\n                                    ")])],1)]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var qa=a("VU/8")(za,Ba,!1,function(e){a("Wc3O")},null,null).exports,Ua={data:function(){return{search:"",selectReports:[],currentRow:"",currentPage:1,reportData:{count:0,results:[]},loading:!0}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleWatchReports:function(e){var t=window.open("");window.focus(),this.$api.watchSingleReports(e,{params:{project:this.$route.params.id}}).then(function(e){t.focus(),t.document.open(),t.document.write(e.data),t.document.close()})},handleSelectionChange:function(e){this.selectReports=e},handleCurrentChange:function(e){var t=this;this.$api.getReportsPaginationBypage({params:{page:this.currentPage,project:this.$route.params.id,search:this.search}}).then(function(e){t.reportData=e})},handleDelReports:function(e){var t=this;this.$confirm("此操作将永久删除该测试报告，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteReports(e,{params:{project:t.$route.params.id}}).then(function(e){t.$notify.success("删除报告成功"),t.getReportList()})})},delSelectionReports:function(){var e=this;0!==this.selectReports.length?this.$confirm("此操作将永久删除勾选的测试报告，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllReports(e.selectReports,{project:e.$route.params.id}).then(function(t){e.$notify.success("批量删除报告成功"),e.getReportList()})}):this.$notify.warning("请至少勾选一个测试报告")},handleDownExcelReport:function(e,t){var a=this;this.$api.downloadTestdata({fileType:2,id:e,project:this.$route.params.id}).then(function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.style.display="none",n.href=a,n.setAttribute("download",t+".xlsx"),document.body.appendChild(n),n.click()}).catch(function(e){a.$notify.error("文件下载失败")})},getReportList:function(){var e=this;this.$api.reportList({params:{project:this.$route.params.id,search:this.search}}).then(function(t){e.reportData=t,e.loading=!1})}},name:"ReportList",mounted:function(){this.getReportList()}},Oa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"20px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.reportData.count,expression:"reportData.count !== 0"}],staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini",title:"批量删除"},on:{click:e.delSelectionReports}},[e._v("批量删除")])],1)])]),e._v(" "),a("el-container",[a("el-header",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("div",[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入报告名称",clearable:"",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"small",title:"搜索"},on:{click:e.getReportList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.reportData.count,expression:"reportData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.reportData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0px",right:"0",left:"230px",top:"150px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"medium","element-loading-text":"正在玩命加载","highlight-current-row":"",data:e.reportData.results,"show-header":0!==e.reportData.results.length,stripe:"",height:"600px","show-overflow-tooltip":""},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{color:"white"},attrs:{color:"#2C3E50",size:"small"}},[e._v(e._s(t.row.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报告名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:{pass:t.row.summary.success,fail:!t.row.summary.success},domProps:{textContent:e._s(!0===t.row.summary.success?"Pass":"Fail")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测试时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.summary.time.start_at)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用时",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{textContent:e._s(t.row.summary.time.duration.toFixed(3)+" 秒")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"总计",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small"}},[e._v(e._s(t.row.summary.stat.testsRun))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"通过",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",size:"small"}},[e._v(" "+e._s(t.row.summary.stat.successes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"失败",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(t.row.summary.stat.failures))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"异常",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"warning",size:"small"}},[e._v(e._s(t.row.summary.stat.errors))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"跳过",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",size:"small"}},[e._v(e._s(t.row.summary.stat.skipped))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"系统信息",width:"135",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.summary.platform.python_version))]),e._v(" "),a("p",[e._v("Platform: "+e._s(t.row.summary.platform.platform))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v("HttpRunner: "+e._s(t.row.summary.platform.httprunner_version))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",icon:"el-icon-view",circle:"",size:"mini",title:"查看"},on:{click:function(a){return e.handleWatchReports(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-download",circle:"",size:"mini",title:"下载"},on:{click:function(a){return e.handleDownExcelReport(t.row.id,t.row.name)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini",title:"删除"},on:{click:function(a){return e.handleDelReports(t.row.id)}}})],1)]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var Ma=a("VU/8")(Ua,Oa,!1,function(e){a("7C+M")},"data-v-869aa884",null).exports,Ha={props:{save:Boolean,parameters:{require:!1}},computed:{height:function(){return window.screen.height-440}},methods:{parseParameters:function(){var e={parameters:[],desc:{}},t=!0,a=!1,n=void 0;try{for(var s,i=V()(this.tableData);!(t=(s=i.next()).done);t=!0){var r=s.value,o=r.value,l=r.key,c={};if(""!==l&&""!==o){try{o=JSON.parse(o)}catch(e){}c[l]=o,e.parameters.push(c),e.desc[l]=r.desc}}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}return e},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({key:"",value:"",desc:""})},handleDelete:function(e,t){this.tableData.splice(e,1)}},watch:{save:function(){this.$emit("parameters",this.parseParameters(),this.tableData)},parameters:function(){0!==this.parameters.length&&(this.tableData=this.parameters)}},data:function(){return{currentRow:"",tableData:[{key:"",value:"",desc:""}]}},name:"Parameters"},Ja={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:e.height,data:e.tableData,border:!1,"cell-style":{paddingTop:"4px",paddingBottom:"4px"}},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"数据Key",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},clearable:"",placeholder:"key 、 key-key1"},model:{value:t.row.key,callback:function(a){e.$set(t.row,"key",a)},expression:"scope.row.key"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据内容",width:"700"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:8},clearable:"",placeholder:"${ fun() } 、 [ value ] 、 [ [ value1, value2 ] ]"},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"参数描述",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"参数简要描述"},model:{value:t.row.desc,callback:function(a){e.$set(t.row,"desc",a)},expression:"scope.row.desc"}})]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.row===e.currentRow,expression:"scope.row === currentRow"}]},[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var Ka={components:{Headers:L,Request:B,Variables:G,Hooks:Q,Parameters:a("VU/8")(Ha,Ja,!1,function(e){a("bnnx")},"data-v-60f60816",null).exports},props:{project:{require:!1},response:{require:!1}},watch:{response:function(){this.name=this.response.body.name,this.baseUrl=this.response.body.base_url,this.configdesc=this.response.configdesc,this.id=this.response.id}},methods:{handleHeader:function(e){this.header=e},handleRequest:function(e){this.request=e},handleVariables:function(e){this.variables=e},handleHooks:function(e){this.hooks=e},handleParameters:function(e){this.parameters=e,""===this.id?this.addConfig():this.updateConfig()},addConfig:function(){var e=this;this.validateData()&&this.$api.addConfig({parameters:this.parameters,header:this.header,request:this.request,variables:this.variables,hooks:this.hooks,base_url:this.baseUrl,configdesc:this.configdesc,name:this.name,project:this.project}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},updateConfig:function(){var e=this;this.validateData()&&this.$api.updateConfig(this.id,{parameters:this.parameters,header:this.header,request:this.request,variables:this.variables,hooks:this.hooks,base_url:this.baseUrl,configdesc:this.configdesc,name:this.name}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},validateData:function(){return""!==this.name||(this.$notify.error({title:"参数错误",message:"配置名称不能为空",duration:1500}),!1)}},data:function(){return{name:"",baseUrl:"",configdesc:"",id:"",header:[],request:[],variables:[],hooks:[],parameters:[],save:!1,activeTag:"third"}},name:"ConfigBody"},Wa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-left":"10px"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入配置名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{slot:"prepend"},[e._v("配置信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("保存\n            ")])],2)],1),e._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入 base_url 地址",clearable:""},model:{value:e.baseUrl,callback:function(t){e.baseUrl=t},expression:"baseUrl"}},[a("template",{slot:"prepend"},[e._v("配置请求地址")])],2)],1),e._v(" "),a("div",[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入配置描述信息",clearable:""},model:{value:e.configdesc,callback:function(t){e.configdesc=t},expression:"configdesc"}},[a("template",{slot:"prepend"},[e._v("配置描述信息")])],2)],1),e._v(" "),a("div",{staticClass:"request"},[a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"请求头",name:"first"}},[a("headers",{attrs:{save:e.save,header:e.response?e.response.body.header:[]},on:{header:e.handleHeader}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"请求体",name:"second"}},[a("request",{attrs:{save:e.save,request:e.response?e.response.body.request:[]},on:{request:e.handleRequest}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"变量设置",name:"third"}},[a("variables",{attrs:{save:e.save,variables:e.response?e.response.body.variables:[]},on:{variables:e.handleVariables}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"前后置方法设置",name:"fourth"}},[a("hooks",{attrs:{save:e.save,hooks:e.response?e.response.body.hooks:[]},on:{hooks:e.handleHooks}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"数据驱动参数设置",name:"five"}},[a("parameters",{attrs:{save:e.save,parameters:e.response?e.response.body.parameters:[]},on:{parameters:e.handleParameters}})],1)],1)],1)])},staticRenderFns:[]};var Ga=a("VU/8")(Ka,Wa,!1,function(e){a("7JSB")},"data-v-2034687f",null).exports,Za={name:"ConfigList",props:{back:Boolean,project:{require:!0},del:Boolean},data:function(){return{search:"",selectConfig:[],currentRow:"",currentPage:1,configdes:"",configData:{count:0,results:[]}}},watch:{back:function(){this.getConfigList()},del:function(){var e=this;0!==this.selectConfig.length?this.$confirm("此操作将永久删除配置，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllConfig({data:e.selectConfig}).then(function(t){e.getConfigList()})}):this.$notify.warning({title:"提示",message:"请至少勾选一个配置",duration:1e3})}},methods:{handleSelectionChange:function(e){this.selectConfig=e},handleCurrentChange:function(e){var t=this;this.$api.getConfigPaginationBypage({params:{page:this.currentPage,project:this.project,search:this.search}}).then(function(e){t.configData=e})},handleDelConfig:function(e){var t=this;this.$confirm("此操作将永久删除该配置，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteConfig(e).then(function(e){e.success?t.getConfigList():t.$message.error(e.msg)})})},handleEditConfig:function(e){this.$emit("respConfig",e)},handleCopyConfig:function(e){var t=this;this.$prompt("请输入配置名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"配置名称不能为空"}).then(function(a){var n=a.value;t.$api.copyConfig(e,{name:n}).then(function(e){e.success?t.getConfigList():t.$message.error(e.msg)})})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},getConfigList:function(){var e=this;this.$api.configList({params:{project:this.project,search:this.search}}).then(function(t){e.configData=t})}},mounted:function(){this.getConfigList()}},Xa={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"padding-top":"10px",height:"50px"}},[a("div",[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入配置名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getConfigList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.configData.count,expression:"configData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.configData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"150px"}},[a("el-table",{attrs:{"highlight-current-row":"",data:e.configData.results,"show-header":0!==e.configData.results.length,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"配置名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"基本请求地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{textContent:e._s(""===t.row.base_url?"无":t.row.base_url)}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"描述",width:"500"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"},attrs:{title:t.row.configdesc}},[e._v(e._s(t.row.configdesc))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.handleEditConfig(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.handleCopyConfig(t.row.id)}}},[e._v("复制\n                                ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelConfig(t.row.id)}}},[e._v("删除\n                                ")])],1)]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var Qa={components:{ConfigBody:Ga,ConfigList:a("VU/8")(Za,Xa,!1,function(e){a("KIIB")},"data-v-0133a3ea",null).exports},computed:{initResponse:{get:function(){return this.addConfigActivate},set:function(e){this.addConfigActivate=e,this.respConfig={id:"",body:{name:"",base_url:"",confdesc:"",header:[{key:"",value:"",desc:""}],request:{data:[{key:"",value:"",desc:"",type:1}],params:[{key:"",value:"",desc:"",type:1}],json_data:""},variables:[{key:"",value:"",desc:"",type:1}],hooks:[{setup:"",teardown:""}],parameters:[{key:"",value:"",desc:""}]}}}}},data:function(){return{back:!1,del:!1,addConfigActivate:!1,respConfig:""}},methods:{handleAddSuccess:function(){this.back=!this.back,this.addConfigActivate=!1},handleRespConfig:function(e){this.respConfig=e,this.addConfigActivate=!0}},name:"RecordConfig",mounted:function(){}},Ya={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.initResponse=!0}}},[e._v("新增配置\n                ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:!e.addConfigActivate,type:"text"},on:{click:function(t){e.addConfigActivate=!1}}},[e._v("返回列表")])],1)])]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("config-body",{directives:[{name:"show",rawName:"v-show",value:e.addConfigActivate,expression:"addConfigActivate"}],attrs:{project:e.$route.params.id,response:e.respConfig},on:{addSuccess:e.handleAddSuccess}}),e._v(" "),e.addConfigActivate?e._e():a("config-list",{attrs:{project:e.$route.params.id,del:e.del,back:e.back},on:{respConfig:e.handleRespConfig}})],1)],1)],1)},staticRenderFns:[]};var en=a("VU/8")(Qa,Ya,!1,function(e){a("y/oa")},null,null).exports,tn={components:{},props:{next:Boolean,testCase:{require:!0}},methods:{emitKwargsForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$emit("KwargsForm",t.kwargsForm)})},getHost:function(){var e=this;this.$api.hostList({params:{project:this.$route.params.id}}).then(function(t){e.hostOptions=t.data.results,e.hostOptions.push({name:"请选择"})})},getTestData:function(){var e=this;this.$api.testdataList({params:{project:this.$route.params.id}}).then(function(t){e.excelTreeOptions=[];var a=!0,n=!1,s=void 0;try{for(var i,r=V()(t.results);!(a=(i=r.next()).done);a=!0){var o=i.value;o.excel_tree&&e.excelTreeOptions.push(o.excel_tree)}}catch(e){n=!0,s=e}finally{try{!a&&r.return&&r.return()}finally{if(n)throw s}}})}},watch:{esc:function(){this.$emit("escEdit")}},data:function(){return{excelTreeOptions:[],esc:!1,hostOptions:[],testCaseName:this.testCase.name,kwargsForm:{testCaseName:"",hostInfo:"",excelTreeData:""},rules:{testCaseName:[{required:!0,message:"请输入用例名称",trigger:"blur"},{min:1,max:500,message:"长度在 1 到 500 个字符",trigger:"blur"}]}}},name:"EditTestCase",mounted:function(){this.getHost(),this.getTestData(),this.testCase.kwargs&&(this.kwargsForm=this.testCase.kwargs)}},an={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"padding-top":"0"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"kwargsForm",attrs:{model:e.kwargsForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用例名称",prop:"testCaseName"}},[a("el-input",{attrs:{placeholder:"请输入用例名称",clearable:"",size:"medium",type:"textarea",autosize:{minRows:1,maxRows:8}},model:{value:e.kwargsForm.testCaseName,callback:function(t){e.$set(e.kwargsForm,"testCaseName",t)},expression:"kwargsForm.testCaseName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"域名参数"}},[a("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"请选择",size:"medium"},model:{value:e.kwargsForm.hostInfo,callback:function(t){e.$set(e.kwargsForm,"hostInfo",t)},expression:"kwargsForm.hostInfo"}},e._l(e.hostOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"数据选择",width:"300px"}},[a("el-cascader",{staticStyle:{width:"50%"},attrs:{options:e.excelTreeOptions,"collapse-tags":"",placeholder:"试试搜索",clearable:"",filterable:"",size:"medium"},model:{value:e.kwargsForm.excelTreeData,callback:function(t){e.$set(e.kwargsForm,"excelTreeData",t)},expression:"kwargsForm.excelTreeData"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.esc=!e.esc}}},[e._v("返回")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.emitKwargsForm("kwargsForm")}}},[e._v("保存")])],1)],1)],1)],1)])},staticRenderFns:[]};var nn={name:"AddTasks",props:{ruleForm:{require:!0},args:{require:!0},scheduleId:{require:!0}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{EditTestCase:a("VU/8")(tn,an,!1,function(e){a("4ZFM")},"data-v-f4366014",null).exports,draggable:$a.a},data:function(){return{currentTest:"",length:0,currentSuite:"",search:"",next:!1,listPageShow:!0,node:"",currentPage:1,filterText:"",expand:"&#xe65f;",dataTree:[],suiteData:{count:0,results:[]},rules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],crontab:[{required:!0,message:"请输入正确的crontab表达式",trigger:"blur"}],receiver:[{required:!0,message:"请输入邮箱，邮箱不能为空"}]},editTestCaseActivate:!1}},methods:{handleEditTestCase:function(){this.editTestCaseActivate=!0,this.next=!1},saveTask:function(){var e=this,t=this.ruleForm;t.data=this.args,t.project=this.$route.params.id,""===this.scheduleId?this.$api.addTask({project:this.$route.params.id},t).then(function(t){201===t.status&&(e.$notify.success("添加定时任务成功"),e.$emit("changeStatus",!1))}):this.$api.updateTask(this.scheduleId,{project:this.$route.params.id},t).then(function(t){200===t.status&&(e.$notify.success("更新定时任务成功"),e.$emit("changeStatus",!1))})},dragEnd:function(e){this.args.length>this.length&&this.args.splice(this.length,1)},drop:function(e){e.preventDefault(),this.args.push(this.currentSuite)},allowDrop:function(e){e.preventDefault()},handlePageChange:function(e){var t=this;this.$api.getTestPaginationBypage({params:{page:this.currentPage,node:this.node,project:this.$route.params.id,tag:"",search:""}}).then(function(e){t.suiteData=e})},handleCurrentChange:function(e){var t=this;this.$api.getTestPaginationBypage({params:{page:this.currentPage,project:this.$route.params.id,node:this.node,tag:"",search:this.search}}).then(function(e){t.suiteData=e})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.next=!0})},resetForm:function(e){this.$refs[e].resetFields()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:2}}).then(function(t){e.dataTree=t.tree})},handleNodeClick:function(e){this.node=e.id,this.getTestList()},getTestList:function(){var e=this;this.$api.testList({params:{project:this.$route.params.id,node:this.node,tag:"",search:this.search}}).then(function(t){e.suiteData=t})}},mounted:function(){this.getTree(),this.getTestList()}},sn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[e.next?e._e():[a("el-main",{staticStyle:{"padding-top":"0"}},[a("div",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入任务名称",clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"时间配置",prop:"crontab"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入crontab表达式，例如 2 12 * * *"},model:{value:e.ruleForm.crontab,callback:function(t){e.$set(e.ruleForm,"crontab",t)},expression:"ruleForm.crontab"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"任务状态",prop:"switch"}},[a("el-switch",{model:{value:e.ruleForm.switch,callback:function(t){e.$set(e.ruleForm,"switch",t)},expression:"ruleForm.switch"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮件策略",prop:"strategy"}},[a("el-radio-group",{model:{value:e.ruleForm.strategy,callback:function(t){e.$set(e.ruleForm,"strategy",t)},expression:"ruleForm.strategy"}},[a("el-radio",{attrs:{label:"始终发送"}}),e._v(" "),a("el-radio",{attrs:{label:"仅失败发送"}}),e._v(" "),a("el-radio",{attrs:{label:"从不发送"}}),e._v(" "),a("el-radio",{attrs:{label:"监控邮件"}})],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"监控邮件"===e.ruleForm.strategy,expression:"ruleForm.strategy === '监控邮件'"}],attrs:{label:"报警次数",prop:"fail_count"}},[a("el-input-number",{attrs:{min:1,max:20,size:"small",precision:0},model:{value:e.ruleForm.fail_count,callback:function(t){e.$set(e.ruleForm,"fail_count",t)},expression:"ruleForm.fail_count"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"监控邮件"===e.ruleForm.strategy,expression:"ruleForm.strategy === '监控邮件'"}],attrs:{label:"关键字过滤",prop:"self_error"}},[a("el-input",{attrs:{type:"textarea",placeholder:'若用例失败的返回报错含有关键字则视为用例通过，多个关键字以";"分隔',clearable:"",size:"medium",autosize:{minRows:1,maxRows:4}},model:{value:e.ruleForm.self_error,callback:function(t){e.$set(e.ruleForm,"self_error",t)},expression:"ruleForm.self_error"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"敏感字过滤",prop:"sensitive_keys"}},[a("el-input",{attrs:{type:"textarea",placeholder:'将敏感字处理为******，多个敏感字以";"分隔',clearable:"",size:"medium",autosize:{minRows:1,maxRows:4}},model:{value:e.ruleForm.sensitive_keys,callback:function(t){e.$set(e.ruleForm,"sensitive_keys",t)},expression:"ruleForm.sensitive_keys"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"接收邮箱",prop:"receiver"}},[a("el-input",{attrs:{type:"textarea",placeholder:'多个邮箱以";"分隔',clearable:"",size:"medium",autosize:{minRows:1,maxRows:4}},model:{value:e.ruleForm.receiver,callback:function(t){e.$set(e.ruleForm,"receiver",t)},expression:"ruleForm.receiver"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"抄送邮箱",prop:"mail_cc"}},[a("el-input",{attrs:{type:"textarea",placeholder:'多个邮箱以";"分隔',clearable:"",size:"medium",autosize:{minRows:1,maxRows:4}},model:{value:e.ruleForm.mail_cc,callback:function(t){e.$set(e.ruleForm,"mail_cc",t)},expression:"ruleForm.mail_cc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("下一步")]),e._v(" "),a("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)],1)])],e._v(" "),e.next?[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}],null,!1,1890694903)})],1)])]),e._v(" "),a("el-main",{staticStyle:{"padding-top":"0px"}},[a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.suiteData.count,expression:"suiteData.count !== 0"}],staticStyle:{"text-align":"center"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.suiteData.count},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-col",{attrs:{span:12}},[e.args.length>0?a("el-button",{attrs:{type:"primary"},on:{click:e.saveTask}},[e._v("保存")]):e._e(),e._v(" "),e.args.length>0?a("el-button",{on:{click:function(t){e.next=!1}}},[e._v("上一步")]):e._e()],1)],1)],1),e._v(" "),a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},e._l(e.suiteData.results,function(t,n){return a("div",{key:n,staticStyle:{cursor:"pointer","margin-top":"10px",overflow:"auto"},attrs:{draggable:"true"},on:{dragstart:function(a){e.currentSuite=JSON.parse(JSON.stringify(t))}}},[a("div",{staticClass:"block block_options"},[a("span",{staticClass:"block-method block_method_options block_method_color"},[e._v("Case")]),e._v(" "),a("span",{staticClass:"block_name"},[e._v(e._s(t.name))])])])}),0),e._v(" "),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{"max-height":"600px",overflow:"auto"},on:{drop:function(t){return e.drop(t)},dragover:function(t){return e.allowDrop(t)}}},[0===e.args.length?a("span",{staticStyle:{color:"red"}},[e._v("温馨提示："),a("br"),e._v("选择左侧相应用例节点显示可拖拽的用例"),a("br"),e._v("从左边拖拽用例至此区域组成任务列表"),a("br"),e._v("\n                                上下拖动此区域任务调整监控调用顺序\n                            ")]):e._e(),e._v(" "),a("div",{staticClass:"test-list"},[a("draggable",{attrs:{"v-model":e.args,options:{animation:200}},on:{end:e.dragEnd,start:function(t){e.length=e.args.length}}},e._l(e.args,function(t,n){return a("div",{key:n,staticClass:"block block_test",on:{mousemove:function(t){e.currentTest=n}}},[a("span",{staticClass:"block-method block_method_test block_method_color"},[e._v("Tasks")]),e._v(" "),a("span",{staticClass:"block-test-name"},[e._v(e._s(t.name))]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"12px",top:"8px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini"},on:{click:function(t){return e.args.splice(n,1)}}})],1)}),0)],1)])])],1)],1)])]:e._e(),e._v(" "),[e.editTestCaseActivate?a("edit-test-case",{attrs:{testCase:e.args[e.currentTest],next:e.next},on:{escEdit:function(t){e.editTestCaseActivate=!1,e.next=!0},KwargsForm:e.handleNewTestCase}}):e._e()]],2)},staticRenderFns:[]};var rn={components:{AddTasks:a("VU/8")(nn,sn,!1,function(e){a("kJXW")},"data-v-1c75a5ea",null).exports},data:function(){return{addTasks:!1,currentPage:1,currentRow:"",tasksData:{count:0,results:[]},loading:!0,ruleForm:{switch:!0,crontab:"",strategy:"始终发送",receiver:"",mail_cc:"",name:"",sensitive_keys:"",self_error:"",fail_count:1},args:[],scheduleId:"",selectTasks:[]}},methods:{handleAddTask:function(){this.addTasks=!0,this.scheduleId="",this.ruleForm={switch:!0,crontab:"",strategy:"始终发送",receiver:"",mail_cc:"",name:"",sensitive_keys:"",self_error:"",fail_count:1},this.args=[]},handleSelectionChange:function(e){this.selectTasks=e},handleCopySchedule:function(e){var t=this;this.$prompt("请输入定时任务名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"定时任务名称不能为空"}).then(function(a){var n=a.value;t.$api.copySchedule({project:t.$route.params.id},{name:n,id:e}).then(function(e){201===e.status&&(t.$notify.success("复制定时任务成功"),t.getTaskList())})})},delTasks:function(e){var t=this;this.$confirm("此操作将永久删除该定时任务，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteTasks(e,{params:{project:t.$route.params.id}}).then(function(e){204===e.status&&(t.$notify.success("删除定时任务成功"),t.getTaskList())})})},delselectTasks:function(){var e=this;0!==this.selectTasks.length?this.$confirm("此操作将永久删除选中定时任务，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.deleteSelectTasks({project:e.$route.params.id},e.selectTasks).then(function(t){204===t.status&&(e.$notify.success("批量删除定时任务成功"),e.getTaskList())})}):this.$notify.error("没有勾选定时任务")},handleRunSchedule:function(e){var t=this;this.$confirm("此操作将运行此定时任务并发送邮件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,t.$api.runScheduleTest(e).then(function(e){t.$notify.success("执行成功，请稍后查看报告以及邮件"),t.loading=!1})})},handleCurrentChange:function(e){var t=this;this.$api.getTaskPaginationBypage({params:{page:this.currentPage,project:this.$route.params.id}}).then(function(e){t.tasksData=e})},handleEditSchedule:function(e,t){this.addTasks=!0,this.scheduleId=e,this.ruleForm.crontab=t.summary_kwargs.crontab,this.ruleForm.strategy=t.summary_kwargs.strategy,this.ruleForm.receiver=t.summary_kwargs.receiver,this.ruleForm.mail_cc=t.summary_kwargs.mail_cc,this.ruleForm.fail_count=t.summary_kwargs.fail_count,this.ruleForm.self_error=t.summary_kwargs.self_error,this.ruleForm.sensitive_keys=t.summary_kwargs.sensitive_keys,this.ruleForm.name=t.name,this.ruleForm.switch=t.enabled,this.args=t.summary_args,this.testData=t.summary_args},changeStatus:function(e){this.getTaskList(),this.addTasks=e,this.args=[],this.ruleForm={switch:!0,crontab:"",strategy:"始终发送",receiver:"",mail_cc:"",name:"",self_error:"",fail_count:"",sensitive_keys:""}},getTaskList:function(){var e=this;this.$api.taskList({params:{project:this.$route.params.id}}).then(function(t){e.tasksData=t,e.loading=!1})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},name:"Tasks",mounted:function(){this.getTaskList()}},on={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline",disabled:e.addTasks},on:{click:e.handleAddTask}},[e._v("添加任务\n                ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini",title:"批量删除",disabled:e.addTasks},on:{click:e.delselectTasks}},[e._v("批量删除")]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:!e.addTasks,type:"text"},on:{click:function(t){e.addTasks=!1}}},[e._v("返回列表\n                ")])],1)])]),e._v(" "),a("el-container",[e.addTasks?e._e():a("el-header",{staticStyle:{padding:"0",height:"50px","margin-top":"10px"}},[a("div",{staticStyle:{"padding-top":"8px","padding-left":"30px"}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.tasksData.count,expression:"tasksData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.tasksData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]),e._v(" "),a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"230px",top:"150px"}},[e.addTasks?e._e():a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",overflow:"auto"},attrs:{"AddTasks.vue":"","element-loading-text":"正在玩命加载",data:e.tasksData.results,"show-header":0!==e.tasksData.results.length,stripe:"","highlight-current-row":""},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"任务名称",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}],null,!1,1281056470)}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"时间配置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.summary_kwargs.crontab))])]}}],null,!1,3364208848)}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"邮件策略"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.summary_kwargs.strategy))])]}}],null,!1,3379139436)}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{disabled:"","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.row.enabled,callback:function(a){e.$set(t.row,"enabled",a)},expression:"scope.row.enabled"}})]}}],null,!1,1078573297)}),e._v(" "),a("el-table-column",{attrs:{label:"接收人","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.summary_kwargs.receiver))])]}}],null,!1,2122237646)}),e._v(" "),a("el-table-column",{attrs:{label:"抄送人","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.summary_kwargs.mail_cc))])]}}],null,!1,137736545)}),e._v(" "),a("el-table-column",{attrs:{width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",icon:"el-icon-edit",circle:"",size:"mini",title:"编辑"},on:{click:function(a){return e.handleEditSchedule(t.row.id,t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-caret-right",circle:"",size:"mini",title:"运行"},on:{click:function(a){return e.handleRunSchedule(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-document",circle:"",size:"mini",title:"复制"},on:{click:function(a){return e.handleCopySchedule(t.row.id)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini",title:"删除"},on:{click:function(a){return e.delTasks(t.row.id)}}})],1)]}}],null,!1,2858426621)})],1)],1)]),e._v(" "),e.addTasks?a("add-tasks",{attrs:{ruleForm:e.ruleForm,args:e.args,scheduleId:e.scheduleId},on:{changeStatus:e.changeStatus}}):e._e()],1)],1)},staticRenderFns:[]};var ln=a("VU/8")(rn,on,!1,function(e){a("eP9I")},null,null).exports,cn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增环境\n                    ")]),e._v(" "),a("el-dialog",{attrs:{title:"添加环境",visible:e.dialogVisible,width:"35%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"variablesForm",staticClass:"project",attrs:{model:e.variablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"环境名",prop:"name"}},[a("el-input",{attrs:{resize:"",clearable:"",placeholder:"请输入环境名"},model:{value:e.variablesForm.name,callback:function(t){e.$set(e.variablesForm,"name",t)},expression:"variablesForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP列表",prop:"value"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:16},placeholder:"127.0.0.1 localhost\n192.168.0.1 gateway",clearable:""},model:{value:e.variablesForm.value,callback:function(t){e.$set(e.variablesForm,"value",t)},expression:"variablesForm.value"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("variablesForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑环境",visible:e.editdialogVisible,width:"35%",align:"center"},on:{"update:visible":function(t){e.editdialogVisible=t}}},[a("el-form",{ref:"editVariablesForm",staticClass:"project",attrs:{model:e.editVariablesForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"环境名",prop:"name"}},[a("el-input",{attrs:{resize:"",clearable:"",placeholder:"请输入环境名"},model:{value:e.editVariablesForm.name,callback:function(t){e.$set(e.editVariablesForm,"name",t)},expression:"editVariablesForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"IP列表",prop:"value"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:16},placeholder:"127.0.0.1 localhost\n192.168.0.1 gateway",clearable:""},model:{value:e.editVariablesForm.value,callback:function(t){e.$set(e.editVariablesForm,"value",t)},expression:"editVariablesForm.value"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleEditConfirm("editVariablesForm")}}},[e._v("确 定")])],1)],1)],1)])]),e._v(" "),a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-top":"8px","padding-left":"30px",overflow:"hidden"}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.hostIPData.count,expression:"hostIPData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.hostIPData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px","margin-top":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"220px",top:"150px"}},[a("el-table",{attrs:{"highlight-current-row":"",data:e.hostIPData.results,"show-header":0!==e.hostIPData.results.length,stripe:"",height:"calc(100%)"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave}},[a("el-table-column",{attrs:{label:"环境名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Host列表"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:5},clearable:"",disabled:""},model:{value:t.row.value,callback:function(a){e.$set(t.row,"value",a)},expression:"scope.row.value"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.handleEditHostIP(t.row)}}},[e._v("编辑\n                                        ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.hostIPData.count,expression:"hostIPData.count !== 0"}],attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelHost(t.row.id)}}},[e._v("删除\n                                        ")])],1)]}}])})],1)],1)])],1)],1)],1)},staticRenderFns:[]};var un=a("VU/8")({data:function(){return{search:"",currentRow:"",currentPage:1,hostIPData:{count:0,results:[]},editdialogVisible:!1,dialogVisible:!1,variablesForm:{name:"",value:"",project:this.$route.params.id},editVariablesForm:{name:"",value:"",id:""},rules:{name:[{required:!0,message:"请输入变量名",trigger:"blur"},{min:1,max:100,message:"最多不超过100个字符",trigger:"blur"}],value:[{required:!0,message:"请输入变量值",trigger:"blur"}]}}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEditHostIP:function(e){this.editVariablesForm={name:e.name,value:e.value,id:e.id},this.editdialogVisible=!0},handleDelHost:function(e){var t=this;this.$confirm("此操作将永久删除该域名，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteHost(e).then(function(e){e.success?t.getHostIPList():t.$message.error(e.msg)})})},handleCurrentChange:function(e){var t=this;this.$api.getHostPaginationBypage({params:{page:this.currentPage,project:this.variablesForm.project}}).then(function(e){t.hostIPData=e})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.dialogVisible=!1,t.$api.addHostIP(t.variablesForm).then(function(e){e.success?(t.variablesForm.name="",t.variablesForm.value="",t.getHostIPList()):t.$message.info({message:e.msg,duration:1e3})}))})},handleEditConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.editdialogVisible=!1,t.$api.updateHost(t.editVariablesForm.id,t.editVariablesForm).then(function(e){e.success?t.getHostIPList():t.$message.info({message:e.msg,duration:1e3})}))})},getHostIPList:function(){var e=this;this.$api.hostList({params:{project:this.variablesForm.project}}).then(function(t){e.hostIPData=t})}},name:"HostAddress",mounted:function(){this.getHostIPList()}},cn,!1,function(e){a("4yIp")},null,null).exports,dn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"})]),e._v(" "),a("el-container",[a("el-header",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("div",[a("el-row",[a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.TaskMetaData.count,expression:"TaskMetaData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.TaskMetaData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[a("div",{staticStyle:{position:"fixed",bottom:"0px",right:"0",left:"230px",top:"150px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"medium","element-loading-text":"正在玩命加载","highlight-current-row":"",data:e.TaskMetaData.results,"show-header":0!==e.TaskMetaData.results.length,stripe:"",height:"600px"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:{pass:"SUCCESS"===t.row.status,fail:"FAILURE"===t.row.status},domProps:{textContent:e._s("SUCCESS"===t.row.status?"SUCCESS":"FAILURE")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"traceback"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"right",width:"600"}},[a("pre",{staticClass:"code-block"},[e._v(e._s(t.row.traceback))]),e._v(" "),t.row.traceback?a("el-button",{staticClass:"popoverFont",attrs:{slot:"reference",round:"",type:"text"},slot:"reference"},[e._v("TraceBack")]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"结束时间",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.date_done))])]}}])})],1)],1)])],1)],1)},staticRenderFns:[]};var pn=a("VU/8")({name:"TaskMeta",methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleSelectionChange:function(e){this.selectTaskMeta=e},handleCurrentChange:function(){this.getTaskMetaData()},getTaskMetaData:function(){var e=this;this.$api.getTaskMetaDataList({params:{page:this.currentPage,project:this.$route.params.id,search:this.search}}).then(function(t){e.TaskMetaData=t.data,e.loading=!1})}},mounted:function(){this.getTaskMetaData()},data:function(){return{search:"",selectTaskMeta:[],currentRow:"",currentPage:1,TaskMetaData:{count:0,results:[]},loading:!0}}},dn,!1,function(e){a("WtK+")},"data-v-4f82ae34",null).exports,hn=a("/dO2"),mn={props:{save:Boolean,testcase:{require:!1}},methods:{S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid:function(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()},rowDrop:function(){var e=this.$refs.table.$el.querySelector(".el-table__body-wrapper tbody"),t=this;hn.a.create(e,{draggable:".el-table__row",onEnd:function(e){var a=e.newIndex,n=e.oldIndex,s=t.tableData.splice(n,1)[0];t.tableData.splice(a,0,s)}})},columnDrop:function(){var e=this,t=document.querySelector(".el-table__header-wrapper tr");this.sortable=hn.a.create(t,{animation:180,delay:0,onEnd:function(t){var a=e.dropCol[t.oldIndex];e.dropCol.splice(t.oldIndex,1),e.dropCol.splice(t.newIndex,0,a)}})},handleEdit:function(e,t){this.tableData.push({rowkeyid:this.guid(),describe:"",action:"",locationType:"",locationValue:"",CheckValueOurce:"",AttributeName:"",CheckType:"",DataItem:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parsetestcase:function(){return console.log(this.tableData),this.tableData}},watch:{save:function(){this.$emit("testcase",this.parsetestcase(),this.tableData)},testcase:function(){0!==this.testcase.length&&(this.tableData=this.testcase)}},mounted:function(){this.rowDrop(),this.columnDrop()},computed:{height:function(){return window.screen.height-440}},data:function(){return{disabled:!1,actionOptions:[{value:"地址栏跳转"},{value:"跳转窗口"},{value:"点击"},{value:"等待"},{value:"输入"},{value:"截图"},{value:"断言"},{value:"跳转iframe"},{value:"返回父iframe"}],locationTypeOptions:[{value:"XPATH"},{value:"ID"},{value:"NAME"},{value:"CLASS_NAME"},{value:"CSS"},{value:"LINK_TEXT"},{value:"PARTIAL_LINK_TEXT"},{value:"TAG_NAME"}],CheckValueOurceOptions:[{value:"普通文本"},{value:"属性值"}],CheckTypeOptions:[{value:"等于"},{value:"小于"},{value:"小于或等于"},{value:"大于"},{value:"大于或等于"},{value:"不等于"},{value:"字符串相等"},{value:"长度相等"},{value:"长度大于或相等"},{value:"长度小于"},{value:"长度小于或相等"},{value:"列表相等"}],currentRow:"",tableData:[{rowkeyid:this.guid(),describe:"",action:"",locationType:"",locationValue:"",CheckValueOurce:"",AttributeName:"",CheckType:"",DataItem:""}]}},name:"Testcases"},fn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableData,"row-key":"rowkeyid",height:e.height,border:!1}},[a("el-table-column",{attrs:{width:"60px",label:"顺序",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"步骤描述",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入步骤描述"},model:{value:t.row.describe,callback:function(a){e.$set(t.row,"describe",a)},expression:"scope.row.describe"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"动作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.row.action,callback:function(a){e.$set(t.row,"action",a)},expression:"scope.row.action"}},e._l(e.actionOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"定位方式",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",disabled:""===t.row.action},model:{value:t.row.locationType,callback:function(a){e.$set(t.row,"locationType",a)},expression:"scope.row.locationType"}},e._l(e.locationTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"定位值",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入定位值",disabled:""===t.row.locationType},model:{value:t.row.locationValue,callback:function(a){e.$set(t.row,"locationValue",a)},expression:"scope.row.locationValue"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"校验值来源",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",disabled:"断言"!==t.row.action},model:{value:t.row.CheckValueOurce,callback:function(a){e.$set(t.row,"CheckValueOurce",a)},expression:"scope.row.CheckValueOurce"}},e._l(e.CheckValueOurceOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"属性名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入属性名",disabled:"属性值"!==t.row.CheckValueOurce},model:{value:t.row.AttributeName,callback:function(a){e.$set(t.row,"AttributeName",a)},expression:"scope.row.AttributeName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"校验方式",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",disabled:"断言"!==t.row.action},model:{value:t.row.CheckType,callback:function(a){e.$set(t.row,"CheckType",a)},expression:"scope.row.CheckType"}},e._l(e.CheckTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据项",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入数据项"},model:{value:t.row.DataItem,callback:function(a){e.$set(t.row,"DataItem",a)},expression:"scope.row.DataItem"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var vn=a("VU/8")(mn,fn,!1,function(e){a("ODmK")},"data-v-1918f921",null).exports,gn={name:"DebugReport",data:function(){return{srcList:["https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg"]}},methods:{srcListtest:function(e){return[e]},handleRequest:function(e){["start_timestamp"].forEach(function(t){delete e[t]});try{e.body=JSON.parse(e.body)}catch(e){}return e},handleContent:function(e){try{e=JSON.parse(e)}catch(e){}return e},handleResponse:function(e){return["response_time_ms","encoding","ok","reason","url","text","json","content_size","content_type"].forEach(function(t){delete e[t]}),e}},props:{summary:{require:!0}}},bn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-y":"scroll",height:"800px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.summary],size:"medium",border:"",stripe:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"测试时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("timestampToTime")(t.row.time.start_at)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"持续时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.time.duration.toFixed(3)+" 秒")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.stat.testsRun))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成功",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.stat.successes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"失败",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.stat.failures))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"系统环境"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("Python: "+e._s(t.row.platform.python_version))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.platform.platform))])],1)])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),e._l(e.summary.details,function(t){return e._t("default",function(){return[a("div",[a("span",{staticStyle:{"font-weight":"bold","font-size":"medium"}},[e._v(e._s(t.name))])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.detail,border:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"名 称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"用例描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.casedescribe))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"持续时间 (秒)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.time.duration.toFixed(3)+" 秒"))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"测试结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:t.row.status},[e._v(e._s(t.row.status))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tabs",[a("el-tab-pane",{attrs:{label:"用例脚本信息"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(e.handleRequest(t.row.casebody))}})]),e._v(" "),null!==t.row.casesteps?a("el-tab-pane",{attrs:{label:"用例执行情况"}},e._l(t.row.casesteps,function(t){return a("div",{key:t.rowkeyid},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("div",{staticStyle:{width:"95%"}},["passed"==t.status?a("i",{staticClass:"el-icon-success",staticStyle:{color:"green","padding-left":"100px"}}):e._e(),e._v(" "),"failed"==t.status?a("i",{staticClass:"el-icon-error",staticStyle:{color:"red","padding-left":"100px"}}):e._e(),e._v(" "),a("span",{staticStyle:{widht:"70%"}},[e._v(e._s(t.stepname))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#999"}},[e._v(e._s(t.time.duration)+" ms")])])]),e._v(" "),""!==t.parameters?a("div",[e._v("                                       \n                                            "+e._s(t.parameters)+"\n                                        ")]):e._e(),e._v(" "),0!==t.attachments.length?a("div",{staticClass:"demo-image__preview",staticStyle:{widht:"1000px"}},e._l(t.attachments,function(t){return a("div",{key:t.uid,staticStyle:{widht:"1000px"}},[a("el-image",{staticStyle:{width:"800px",height:"500px"},attrs:{src:t.path,"preview-src-list":[t.path]}},[e._v("\n\n                                                    >\n                                                    "),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                                                        加载中"),a("span",{staticClass:"dot"},[e._v("...")])])])],1)}),0):e._e()],2)],1)],1)}),0):e._e(),e._v(" "),""!==t.row.errormessage?a("el-tab-pane",{attrs:{label:"异常信息"}},[a("pre",{staticClass:"code-block",domProps:{textContent:e._s(e.handleResponse(t.row.errormessage))}})]):e._e()],1)]}}],null,!0)})],1)]})})],2)},staticRenderFns:[]};var _n=a("VU/8")(gn,bn,!1,function(e){a("JGkj")},"data-v-75595a7c",null).exports,yn={components:{Testcase:vn,Report:_n},props:{nodeId:{require:!1},project:{require:!1},response:{require:!1}},methods:{reverseStatus:function(){this.save=!this.save,this.run=!0},handleHeader:function(e){this.testcase=e,this.run?(this.runuicase(),this.run=!1):""===this.id?this.addUICase():this.updateUIcase()},validateData:function(){return""===this.casedescribe?(this.$notify.error({title:"用例描述错误",message:"用例描述不能为空",duration:1500}),!1):""!==this.name||(this.$notify.error({title:"name错误",message:"用例名称不能为空",duration:1500}),!1)},updateUIcase:function(){var e=this;this.validateData()&&this.$api.updateuicase(this.id,{testcase:this.testcase,casedescribe:this.casedescribe,name:this.name}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})})},runuicase:function(){var e=this;this.validateData()&&(this.loading=!0,this.$api.runuicase({project:this.$route.params.id,name:this.name,casedescribe:this.casedescribe,testcase:this.testcase}).then(function(t){e.summary=t,e.dialogTableVisible=!0,e.loading=!1}).catch(function(t){e.loading=!1}))},addUICase:function(){var e=this;this.validateData()&&(console.log(this.testcase),this.$api.adduicase({testcase:this.testcase,casedescribe:this.casedescribe,name:this.name,nodeId:this.nodeId,project:this.project}).then(function(t){t.success?e.$emit("addSuccess"):e.$message.error({message:t.msg,duration:1e3})}))}},watch:{response:function(){this.name=this.response.name,this.casedescribe=this.response.casedescribe,this.id=this.response.id,this.testcase=this.response.body}},data:function(){return{loading:!1,name:"",casedescribe:"",id:"",testcase:[],dialogTableVisible:!1,save:!1,run:!1,summary:{},activeTag:"first"}},name:"CaseBody"},wn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入用例名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{slot:"prepend"},[e._v("用例名称")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("保存\n                ")])],2),e._v(" "),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{type:"primary",disabled:e.loading},on:{click:e.reverseStatus}},[e._v("运行\n            ")])],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"600px","margin-top":"10px"},attrs:{placeholder:"请输入用例描述",clearable:""},model:{value:e.casedescribe,callback:function(t){e.casedescribe=t},expression:"casedescribe"}},[a("template",{slot:"prepend"},[e._v("用例描述")])],2)],1)]),e._v(" "),a("div",{staticClass:"request"},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"用例步骤",name:"first"}},[a("testcase",{attrs:{save:e.save,testcase:e.response?e.response.body:[]},on:{testcase:e.handleHeader}})],1)],1)],1)])},staticRenderFns:[]};var kn=a("VU/8")(yn,wn,!1,function(e){a("soJJ")},"data-v-2d32c77c",null).exports,xn={components:{Report:_n},name:"CaseList",props:{run:Boolean,back:Boolean,node:{require:!0},project:{require:!0},del:Boolean},data:function(){return{checked:!1,search:"",reportName:"",asyncs:!1,filterText:"",loading:!1,expand:"&#xe65f;",dataTree:{},dialogTreeVisible:!1,dialogTableVisible:!1,summary:{},selectUIcase:[],currentRow:"",currentPage:1,apiData:{count:0,results:[]}}},watch:{filterText:function(e){this.$refs.tree.filter(e)},run:function(){this.asyncs=!1,this.reportName="",this.getTree()},back:function(){this.getUIcaseList()},node:function(){this.search="",this.getUIcaseList()},checked:function(){this.checked?this.toggleAll():this.toggleClear()},del:function(){var e=this;0!==this.selectUIcase.length?this.$confirm("此操作将永久删除用例，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAlluicase({data:e.selectUIcase}).then(function(t){e.getUIcaseList()})}):this.$notify.warning({title:"提示",message:"请至少选择一个用例",duration:1e3})}},methods:{handleCopyUIcase:function(e){var t=this;this.$prompt("请输入用例名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"用例名称不能为空"}).then(function(a){var n=a.value;t.$api.copyuicase(e,{name:n}).then(function(e){e.success?t.getUIcaseList():t.$message.error(e.msg)})})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},runTree:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys();0===t.length?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):this.$api.runUIcaseTree({project:this.project,relation:t,async:this.asyncs,name:this.reportName}).then(function(t){t.hasOwnProperty("status")?e.$message.info({message:t.msg,duration:1500}):(e.summary=t,e.dialogTableVisible=!0)})},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:3}}).then(function(t){e.dataTree=t.tree,e.dialogTreeVisible=!0})},handleSelectionChange:function(e){this.selectUIcase=e},toggleAll:function(){this.$refs.multipleTable.toggleAllSelection()},toggleClear:function(){this.$refs.multipleTable.clearSelection()},getUIcaseList:function(){var e=this;this.$api.getuicase({params:{node:this.node,project:this.project,search:this.search}}).then(function(t){e.apiData=t})},handleCurrentChange:function(e){var t=this;this.$api.geuicasePaginationBypage({params:{page:this.currentPage,node:this.node,project:this.project,search:this.search}}).then(function(e){t.apiData=e})},handleDelUIcase:function(e){var t=this;this.$confirm("此操作将永久删除该用例，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deluicase(e).then(function(e){e.success?t.getUIcaseList():t.$message.error(e.msg)})})},handleRowClick:function(e){var t=this;this.$api.getuicaseSingle(e.id).then(function(e){e.success?t.$emit("api",e):t.$message.error(e.msg)})},handleRunAPI:function(e){var t=this;this.loading=!0,this.$api.runAPIByPk(e,{params:{host:this.host,config:this.config}}).then(function(e){t.summary=e,t.dialogTableVisible=!0,t.loading=!1}).catch(function(e){t.loading=!1})},handleRunUIcase:function(e){var t=this;this.loading=!0,this.$api.runUIcaseByPk(e,{params:{project:this.$route.params.id}}).then(function(e){t.summary=e,t.dialogTableVisible=!0,t.loading=!1}).catch(function(e){t.loading=!1})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},mounted:function(){this.getUIcaseList()}},Tn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{padding:"0",height:"50px"}},[a("div",{staticStyle:{"padding-left":"10px"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:1}},[e.apiData.count>0?a("el-checkbox",{staticStyle:{"padding-top":"14px","padding-left":"2px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}}):e._e()],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入用例名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUIcaseList},slot:"append"})],1)],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"运行用例",visible:e.dialogTreeVisible,width:"45%"},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[a("div",[a("div",[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:8}},[a("el-switch",{staticStyle:{"margin-top":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"异步执行","inactive-text":"同步执行"},model:{value:e.asyncs,callback:function(t){e.asyncs=t},expression:"asyncs"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.asyncs,expression:"asyncs"}],attrs:{clearable:"",placeholder:"请输入报告名称",disabled:!1},model:{value:e.reportName,callback:function(t){e.reportName=t},expression:"reportName"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{placeholder:"输入节点名称进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{"overflow-y":"scroll",height:"400px"},attrs:{"filter-node-method":e.filterNode,data:e.dataTree,"show-checkbox":"","node-key":"id","expand-on-click-node":!1,"check-on-click-node":"","check-strictly":!0,"highlight-current":!0},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.runTree}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"500px",top:"160px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",height:"700px",data:e.apiData.results,"show-header":!0},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{label:"用例名称",width:"200",prop:"name","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"用例描述",prop:"describe",width:"300","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.handleRowClick(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.handleCopyUIcase(t.row.id)}}},[e._v("复制\n                                ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleRunUIcase(t.row.id)}}},[e._v("运行")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelUIcase(t.row.id)}}},[e._v("删除\n                                ")])],1)]}}])})],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.apiData.count,expression:"apiData.count !== 0 "}],staticStyle:{"margin-top":"5px"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.apiData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var Sn={watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{CaseBody:kn,CaseList:a("VU/8")(xn,Tn,!1,function(e){a("Q3xI")},"data-v-5f541c83",null).exports},computed:{initResponse:{get:function(){return this.addCaseFlag},set:function(e){this.addCaseFlag=e,this.response={id:"",name:"",casedescribe:"",body:[{rowkeyid:this.guid(),describe:"",action:"",locationType:"",locationValue:"",CheckValueOurce:"",AttributeName:"",CheckType:"",DataItem:""}]}}}},data:function(){return{loading:!1,configOptions:[],hostOptions:[],currentConfig:"请选择",currentHost:"请选择",back:!1,del:!1,run:!1,response:"",nodeForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}]},radio:"根节点",addCaseFlag:!1,treeId:"",maxId:"",rmid:"",dialogVisible:!1,currentNode:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[]}},methods:{quxiao:function(){this.nodeForm.name="",this.dialogVisible=!1},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid:function(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()},handleBackList:function(){this.addCaseFlag=!1,this.back=!this.back},handleDragEnd:function(){this.updateTree(!1)},handleAddSuccess:function(){this.back=!this.back,this.addCaseFlag=!1},handleAPI:function(e){this.addCaseFlag=!0,this.response=e},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:3}}).then(function(t){e.dataTree=t.tree,e.treeId=t.id,e.maxId=t.max})},getConfig:function(){var e=this;this.$api.getAllConfig(this.$route.params.id).then(function(t){e.configOptions=t,e.configOptions.push({name:"请选择"})})},getHost:function(){var e=this;this.$api.getAllHost(this.$route.params.id).then(function(t){e.hostOptions=t,e.hostOptions.push({name:"请选择"})})},updateTree:function(e){var t=this;this.$api.updateTree(this.treeId,{body:this.dataTree,node:this.currentNode.id,mode:e,type:3}).then(function(e){e.success?(t.dataTree=e.tree,t.maxId=e.max):t.$message.error(e.msg)})},deleteNode:function(){var e=this;this.$confirm("此操作将永久删除该节点下所有接口, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""===e.currentNode?e.$message.info("请选择一个节点"):0!==e.currentNode.children.length?e.$message.warning("此节点有子节点，不可删除！"):(e.remove(e.currentNode,e.data),e.updateTree(!0))})},renameNode:function(){var e=this;this.$prompt("请输入节点名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"节点名称不能为空"}).then(function(t){var a=t.value,n=e.data.parent,s=n.data.children||n.data;s[s.findIndex(function(t){return t.id===e.currentNode.id})].label=a,e.updateTree(!1)})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.append(t.currentNode),t.updateTree(!1),t.nodeForm.name="",t.dialogVisible=!1)})},handleNodeClick:function(e,t){this.addCaseFlag=!1,this.currentNode=e,this.data=t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},remove:function(e,t){var a=t.parent,n=a.data.children||a.data,s=n.findIndex(function(t){return t.id===e.id});n.splice(s,1)},append:function(e){var t={id:this.guid(),label:this.nodeForm.name,children:[]};""!==e&&0!==this.dataTree.length&&"根节点"!==this.radio?(e.children||this.$set(e,"children",[]),e.children.push(t)):this.dataTree.push(t)}},name:"webtestcaselist",mounted:function(){this.getTree(),this.getConfig(),this.getHost()}},Cn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    新建分组\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"新建分组",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"nodeForm",staticClass:"project",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"根节点"}}),e._v(" "),a("el-radio-button",{attrs:{label:"子节点"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.quxiao()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("nodeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"danger",size:"small",icon:"el-icon-delete"},on:{click:e.deleteNode}},[e._v("删除分组\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"info",size:"small",icon:"el-icon-edit-outline"},on:{click:e.renameNode}},[e._v("重命名\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.initResponse=!0}}},[e._v("添加用例\n                ")]),e._v(" "),e.addCaseFlag?e._e():a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.run=!e.run}}},[e._v("运行")]),e._v(" "),e.addCaseFlag?e._e():a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:!e.addCaseFlag,type:"text"},on:{click:e.handleBackList}},[e._v("返回列表\n                ")])],1)])]),e._v(" "),a("el-container",[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,draggable:"","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("case-body",{directives:[{name:"show",rawName:"v-show",value:e.addCaseFlag,expression:"addCaseFlag"}],attrs:{nodeId:e.currentNode.id,project:e.$route.params.id,response:e.response,config:e.currentConfig,host:e.currentHost},on:{addSuccess:e.handleAddSuccess}}),e._v(" "),a("case-list",{directives:[{name:"show",rawName:"v-show",value:!e.addCaseFlag,expression:"!addCaseFlag"}],attrs:{node:""!==e.currentNode?e.currentNode.id:"",project:e.$route.params.id,config:e.currentConfig,host:e.currentHost,del:e.del,back:e.back,run:e.run},on:{api:e.handleAPI}})],1)],1)],1)},staticRenderFns:[]};var $n=a("VU/8")(Sn,Cn,!1,function(e){a("SDJo")},"data-v-f045edd4",null).exports,Dn={props:{save:Boolean,testcase:{require:!1}},methods:{S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid:function(){return this.S4()+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()},rowDrop:function(){var e=this.$refs.table.$el.querySelector(".el-table__body-wrapper tbody"),t=this;hn.a.create(e,{draggable:".el-table__row",onEnd:function(e){var a=e.newIndex,n=e.oldIndex,s=t.tableData.splice(n,1)[0];t.tableData.splice(a,0,s)}})},columnDrop:function(){var e=this,t=document.querySelector(".el-table__header-wrapper tr");this.sortable=hn.a.create(t,{animation:180,delay:0,onEnd:function(t){var a=e.dropCol[t.oldIndex];e.dropCol.splice(t.oldIndex,1),e.dropCol.splice(t.newIndex,0,a)}})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleEdit:function(e,t){this.tableData.push({rowkeyid:this.guid(),describe:"",action:"",locationType:"",locationValue:"",CheckValueOurce:"",AttributeName:"",CheckType:"",DataItem:""})},handleDelete:function(e,t){this.tableData.splice(e,1)},parsetestcase:function(){return console.log(this.tableData),this.tableData}},watch:{save:function(){this.$emit("testcase",this.parsetestcase(),this.tableData)},testcase:function(){0!==this.testcase.length&&(this.tableData=this.testcase)}},mounted:function(){this.rowDrop(),this.columnDrop()},computed:{height:function(){return window.screen.height-440}},data:function(){return{actionOptions:[{value:"地址栏跳转"},{value:"跳转窗口"},{value:"点击"},{value:"等待"},{value:"输入"},{value:"截图"},{value:"断言"},{value:"跳转iframe"},{value:"返回父iframe"}],locationTypeOptions:[{value:"XPATH"},{value:"ID"},{value:"NAME"},{value:"CLASS_NAME"},{value:"CSS"},{value:"LINK_TEXT"},{value:"PARTIAL_LINK_TEXT"},{value:"TAG_NAME"}],CheckValueOurceOptions:[{value:"普通文本"},{value:"属性值"}],CheckTypeOptions:[{value:"等于"},{value:"小于"},{value:"小于或等于"},{value:"大于"},{value:"大于或等于"},{value:"不等于"},{value:"字符串相等"},{value:"长度相等"},{value:"长度大于或相等"},{value:"长度小于"},{value:"长度小于或相等"},{value:"列表相等"}],currentRow:"",tableData:[{rowkeyid:this.guid(),describe:"",action:"",locationType:"",locationValue:"",CheckValueOurce:"",AttributeName:"",CheckType:"",DataItem:""}]}},name:"Testcases"},Pn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{"highlight-current-row":"",data:e.tableData,"row-key":"rowkeyid",height:e.height,border:!1}},[a("el-table-column",{attrs:{width:"60px",label:"顺序",type:"index"}}),e._v(" "),a("el-table-column",{attrs:{label:"步骤描述",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入步骤描述"},model:{value:t.row.describe,callback:function(a){e.$set(t.row,"describe",a)},expression:"scope.row.describe"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"动作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:""},model:{value:t.row.action,callback:function(a){e.$set(t.row,"action",a)},expression:"scope.row.action"}},e._l(e.actionOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"定位方式",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",disabled:""===t.row.action},model:{value:t.row.locationType,callback:function(a){e.$set(t.row,"locationType",a)},expression:"scope.row.locationType"}},e._l(e.locationTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"定位值",width:"400px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入定位值",disabled:""===t.row.locationType},model:{value:t.row.locationValue,callback:function(a){e.$set(t.row,"locationValue",a)},expression:"scope.row.locationValue"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"校验值来源",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",disabled:"断言"!==t.row.action},model:{value:t.row.CheckValueOurce,callback:function(a){e.$set(t.row,"CheckValueOurce",a)},expression:"scope.row.CheckValueOurce"}},e._l(e.CheckValueOurceOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"属性名",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入属性名",disabled:"属性值"!==t.row.CheckValueOurce},model:{value:t.row.AttributeName,callback:function(a){e.$set(t.row,"AttributeName",a)},expression:"scope.row.AttributeName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"校验方式",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",placeholder:"请选择",clearable:"",disabled:"断言"!==t.row.action},model:{value:t.row.CheckType,callback:function(a){e.$set(t.row,"CheckType",a)},expression:"scope.row.CheckType"}},e._l(e.CheckTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数据项",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{clearable:"",placeholder:"请输入数据项"},model:{value:t.row.DataItem,callback:function(a){e.$set(t.row,"DataItem",a)},expression:"scope.row.DataItem"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",[a("el-button",{attrs:{icon:"el-icon-circle-plus-outline",size:"mini",type:"info"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==t.$index,expression:"scope.$index !== 0"}],attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})],1)]}}])})],1)},staticRenderFns:[]};var Fn={components:{Testcase:a("VU/8")(Dn,Pn,!1,function(e){a("W/um")},"data-v-2aa42cc5",null).exports,Report:te},props:{response:{require:!0}},methods:{handleHeader:function(e,t){if(this.testcase=t,this.tempBody.describe=this.describe,this.tempBody.body=e,this.tempBody.name=this.name,this.validateData()){var a={body:this.testcase,describe:this.describe,name:this.name};this.$emit("getNewBody",a,this.tempBody),this.run=!1}},validateData:function(){return""===this.describe?(this.$notify.error({title:"用例描述错误",message:"用例描述不能为空",duration:1500}),!1):""!==this.name||(this.$notify.error({title:"name错误",message:"用例名称不能为空",duration:1500}),!1)}},watch:{esc:function(){this.$emit("escEdit")}},data:function(){return{loading:!1,run:!1,esc:!1,name:this.response.name,describe:this.response.describe,testcase:[],tempBody:{},save:!1,summary:{},dialogTableVisible:!1,activeTag:"first"}},name:"TestBody",mounted:function(){this.testcase=this.response.body}},In={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入用例名称",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[a("template",{slot:"prepend"},[e._v("用例信息录入")]),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:function(t){e.save=!e.save}},slot:"append"},[e._v("保存\n                ")])],2),e._v(" "),a("el-button",{attrs:{slot:"append",type:"danger"},on:{click:function(t){e.esc=!e.esc}},slot:"append"},[e._v("返回\n            ")])],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"600px","margin-top":"10px"},attrs:{placeholder:"请输入用例描述",clearable:""},model:{value:e.describe,callback:function(t){e.describe=t},expression:"describe"}},[a("template",{slot:"prepend"},[e._v("用例描述")])],2)],1),e._v(" "),e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"request"},[a("el-tabs",{staticStyle:{"margin-left":"20px"},model:{value:e.activeTag,callback:function(t){e.activeTag=t},expression:"activeTag"}},[a("el-tab-pane",{attrs:{label:"用例步骤",name:"first"}},[a("testcase",{attrs:{save:e.save,testcase:e.testcase},on:{testcase:e.handleHeader}})],1)],1)],1)])},staticRenderFns:[]};var Nn=a("VU/8")(Fn,In,!1,function(e){a("8VFD")},"data-v-07a18cdb",null).exports,Rn={components:{draggable:$a.a,TestBody:Nn,Report:_n},computed:{},props:{project:{require:!0},node:{require:!0},testStepResp:{require:!1},back:Boolean},name:"EditTest",watch:{back:function(){this.editTestStepActivate=!1},filterText:function(e){this.$refs.tree2.filter(e)},testStepResp:function(){try{this.testName=this.testStepResp.case.name,this.testId=this.testStepResp.case.id,this.testTag=this.testStepResp.case.tag,this.relation=this.testStepResp.case.relation,this.testData=JSON.parse(Sa()(this.testStepResp.step))}catch(e){this.testName="",this.testId="",this.testTag="集成用例",this.testData=JSON.parse(Sa()(this.testStepResp))}}},data:function(){return{tagOptions:{1:"冒烟用例",2:"集成用例",3:"监控脚本",4:"回归用例",5:"系统用例",6:"空库用例"},suite_loading:!1,loading:!1,dialogTableVisible:!1,editTestStepActivate:!1,currentPage:1,length:0,testId:"",search:"",testName:"",relation:"",testTag:"集成用例",currentTest:"",currentNode:"",currentAPI:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],summary:{},caseData:{count:0,results:[]},testData:[]}},methods:{handleNewBody:function(e,t){this.editTestStepActivate=!1;var a=this.testData[this.currentTest].testplan,n=this.testData[this.currentTest].id;this.testData[this.currentTest]={body:e,newBody:t,testplan:a,id:n,name:t.name,describe:t.describe}},validateData:function(){return""===this.testName||this.testName.length>100?(this.$notify.warning({title:"提示",duration:1e3,message:"用例集名称必填，不能超过100个字符"}),!1):0!==this.testData.length||(this.$notify.warning({title:"提示",duration:1e3,message:"测试用例集至少包含一个接口"}),!1)},addTestSuite:function(){var e=this,t=this.testData.length;this.$api.addUITestPlan({length:t,project:this.project,relation:this.node,name:this.testName,body:this.testData,tag:this.testTag}).then(function(t){t.success?e.$emit("addSuccess"):e.$message({message:t.msg,type:"error",duration:1e3})})},updateTestSuite:function(){var e=this,t=this.testData.length;this.$api.updateUITestPlan(this.testId,{length:t,name:this.testName,tag:this.testTag,body:this.testData,project:this.project,relation:this.relation}).then(function(t){t.success?e.$emit("addSuccess"):e.$message({message:t.msg,type:"error",duration:1e3})})},handleClickSave:function(){this.validateData()&&(""===this.testId?this.addTestSuite():this.updateTestSuite())},handleClickRun:function(){var e=this;this.validateData()&&(this.suite_loading=!0,this.$api.runSingleTestPlanSuite({name:this.testName,body:this.testData,project:this.project}).then(function(t){e.suite_loading=!1,e.summary=t,e.dialogTableVisible=!0}).catch(function(t){e.suite_loading=!1}))},handleSingleRun:function(){var e=this;this.loading=!0,this.$api.runSingleTestPlanSuite({body:this.testData[this.currentTest],project:this.project}).then(function(t){e.loading=!1,e.summary=t,e.dialogTableVisible=!0}).catch(function(t){e.loading=!1})},handlePageChange:function(e){var t=this;this.$api.geuicasePaginationBypage({params:{page:this.currentPage,node:this.currentNode,project:this.project,search:this.search}}).then(function(e){t.caseData=e})},getUIcaseList:function(){var e=this;this.$api.getuicase({params:{node:this.currentNode,project:this.project,search:this.search}}).then(function(t){e.caseData=t})},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:3}}).then(function(t){e.dataTree=t.tree})},handleNodeClick:function(e,t){this.currentNode=e.id,this.data=t,this.getUIcaseList()},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},dragEnd:function(e){this.testData.length>this.length&&this.testData.splice(this.length,1)},drop:function(e){e.preventDefault(),this.testData.push(this.currentAPI)},allowDrop:function(e){e.preventDefault()}},mounted:function(){this.getTree(),this.getUIcaseList()}},Vn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!1,"expand-on-click-node":!1,"highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editTestStepActivate,expression:"!editTestStepActivate"}]},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:7}},[a("el-input",{attrs:{placeholder:"请输入用例名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUIcaseList},slot:"append"})],1)],1),e._v(" "),a("el-col",{staticStyle:{right:"145px",position:"absolute"},attrs:{span:30}},[e.testData.length>0?a("el-input",{staticStyle:{width:"400px","text-align":"center"},attrs:{placeholder:"请输入测试用例名称",clearable:""},model:{value:e.testName,callback:function(t){e.testName=t},expression:"testName"}},[a("el-select",{staticStyle:{width:"105px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.testTag,callback:function(t){e.testTag=t},expression:"testTag"}},e._l(e.tagOptions,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),e._v(" "),a("el-button",{attrs:{slot:"append",type:"success",plain:""},on:{click:e.handleClickSave},slot:"append"},[e._v("保存\n                        ")])],1):e._e(),e._v(" "),e.testData.length>0?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.suite_loading,expression:"suite_loading"}],attrs:{type:"primary"},on:{click:e.handleClickRun},model:{value:e.testName,callback:function(t){e.testName=t},expression:"testName"}},[e._v("运行\n                    ")]):e._e()],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.editTestStepActivate,expression:"!editTestStepActivate"}],staticStyle:{"margin-top":"10px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[e._l(e.caseData.results,function(t,n){return a("div",{key:n,staticStyle:{cursor:"pointer","margin-top":"10px"},attrs:{draggable:"true"},on:{dragstart:function(a){e.currentAPI=JSON.parse(JSON.stringify(t))}}},[a("div",{staticClass:"block block_post"},[a("span",{staticClass:"block-method block_method_post block_method_color"},[e._v("CASE")]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-method block_url test_demo_ellipsis"},[e._v(e._s(t.name))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.describe,placement:"top"}},[a("span",{staticClass:"block-summary-description test_demo_ellipsis"},[e._v(e._s(t.describe))])])],1)])}),e._v(" "),a("el-footer",{staticStyle:{"padding-top":"30px","padding-left":"0px"}},[a("el-col",{attrs:{span:10}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.caseData.count,expression:"caseData.count !== 0"}],staticStyle:{"margin-top":"5px","text-align":"center"},attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.caseData.count},on:{"current-change":e.handlePageChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],2),e._v(" "),a("el-col",{attrs:{span:12}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("div",{staticStyle:{"max-height":"600px",overflow:"auto"},on:{drop:function(t){return e.drop(t)},dragover:function(t){return e.allowDrop(t)}}},[a("div",{staticClass:"test-list"},[0===e.testData.length?a("span",{staticStyle:{color:"red"}},[e._v("温馨提示："),a("br"),e._v("选择左侧相应用例节点显示可拖拽的CASE"),a("br"),e._v("从左边拖拽CASE至此区域组成业务用例"),a("br"),e._v("\n                                上下拖动此区域接口调整接口调用顺序\n                            ")]):e._e(),e._v(" "),a("draggable",{attrs:{"v-model":e.testData,options:{animation:200}},on:{end:e.dragEnd,start:function(t){e.length=e.testData.length}}},e._l(e.testData,function(t,n){return a("div",{key:n,staticClass:"block block_test",on:{mousemove:function(t){e.currentTest=n}}},[a("span",{staticClass:"block-method block_method_test block_method_color"},[e._v("CASE")]),e._v(" "),a("el-tooltip",{attrs:{content:t.name,placement:"top"}},[a("span",{staticClass:"block-test-name test_demo_ellipsis"},[e._v(e._s(t.name))])]),e._v(" "),a("el-tooltip",{attrs:{content:t.describe,placement:"top"}},[a("span",{staticClass:"block-test-name test_demo_ellipsis"},[e._v(e._s(t.describe))])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"84px",top:"8px"},attrs:{type:"info",icon:"el-icon-edit",circle:"",size:"mini",title:"编辑"},on:{click:function(t){e.editTestStepActivate=!0}}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"48px",top:"8px"},attrs:{type:"success",icon:"el-icon-caret-right",circle:"",size:"mini",title:"运行"},on:{click:e.handleSingleRun}}),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.currentTest===n,expression:"currentTest === index"}],staticStyle:{position:"absolute",right:"12px",top:"8px"},attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"mini",title:"删除"},on:{click:function(t){return e.testData.splice(n,1)}}})],1)}),0)],1)])],1)],1)],1),e._v(" "),e.editTestStepActivate?a("test-body",{attrs:{response:e.testData[e.currentTest]},on:{escEdit:function(t){e.editTestStepActivate=!1},getNewBody:e.handleNewBody}}):e._e()],1)],1)},staticRenderFns:[]};var An=a("VU/8")(Rn,Vn,!1,function(e){a("5Fdu")},"data-v-2d3ca27b",null).exports,jn={name:"TestList",components:{Report:_n},props:{run:Boolean,back:Boolean,project:{require:!0},host:{require:!0},node:{require:!1},del:Boolean},watch:{filterText:function(e){this.$refs.tree.filter(e)},run:function(){this.asyncs=!1,this.reportName="",this.getTree()},node:function(){this.search="",this.getUItestPlanList()},back:function(){this.getUItestPlanList()},del:function(){var e=this;0!==this.selectTest.length?this.$confirm("此操作将永久删除测试用例集，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.delAllUITest({data:e.selectTest}).then(function(t){e.getUItestPlanList()})}):this.$notify.warning({title:"提示",message:"请至少选择一个用例集",duration:1e3})}},data:function(){return{search:"",asdialogVisible:!1,asynform:{isasynchronous:!0,id:"",name:""},options:[{value:"",label:"全部"},{value:"1",label:"冒烟用例"},{value:"2",label:"集成用例"},{value:"3",label:"监控脚本"},{value:"4",label:"回归用例"},{value:"5",label:"系统用例"},{value:"6",label:"空库用例"}],rules:{isasynchronous:[{required:!0,message:"请选择运行方式",trigger:"blur"}]},value:"",reportName:"",asyncs:!1,filterText:"",expand:"&#xe65f;",dialogTreeVisible:!1,dataTree:{},loading:!1,dialogTableVisible:!1,selectTest:[],summary:{},currentRow:"",testData:{count:0,results:[]},currentPage:1,defaultProps:{children:"children",label:"label"}}},methods:{getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:4}}).then(function(t){e.dataTree=t.tree,e.dialogTreeVisible=!0})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},runTree:function(){var e=this;this.dialogTreeVisible=!1;var t=this.$refs.tree.getCheckedKeys();0===t.length?this.$notify.error({title:"提示",message:"请至少选择一个节点",duration:1500}):this.$api.runUIPlanSuiteTree({project:this.project,relation:t,async:this.asyncs,name:this.reportName}).then(function(t){t.hasOwnProperty("status")?e.$message.info({message:t.msg,duration:1500}):(e.summary=t,e.dialogTableVisible=!0)})},showtable:function(e,t){this.asynform={isasynchronous:!0,id:e,name:t},this.asdialogVisible=!0},handleRunTest:function(){var e=this;this.loading=!0,this.asdialogVisible=!1,this.$api.runTestPlanByPk(this.asynform.id,{params:{project:this.project,name:this.asynform.name,async:this.asynform.isasynchronous}}).then(function(t){t.hasOwnProperty("status")?(e.loading=!1,e.$message.info({message:t.msg,duration:1500})):(e.summary=t,e.dialogTableVisible=!0,e.loading=!1)}).catch(function(t){e.loading=!1}),this.asynform={isasynchronous:"",id:"",name:""}},handleCurrentChange:function(e){var t=this;this.$api.getUITestPaginationBypage({params:{page:this.currentPage,project:this.project,tag:this.value,node:this.node,search:this.search}}).then(function(e){t.testData=e})},handleEditTest:function(e){var t=this;this.$api.editUITest(e).then(function(e){t.$emit("testStep",e)})},handleCopyTest:function(e){var t=this;this.$prompt("请输入测试计划名称","提示",{confirmButtonText:"确定",inputPattern:/^[\s\S]*.*[^\s][\s\S]*$/,inputErrorMessage:"名称不能为空"}).then(function(a){var n=a.value;t.$api.copyUITest(e,{name:n,relation:t.node,project:t.project}).then(function(e){e.success?t.getUItestPlanList():t.$message.error(e.msg)})})},handleSelectionChange:function(e){this.selectTest=e},handleDelTest:function(e){var t=this;this.$confirm("此操作将永久删除该测试计划，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteUITest(e).then(function(e){e.success?t.getUItestPlanList():t.$message.error(e.msg)})})},getUItestPlanList:function(){var e=this;this.$api.UItestPlanList({params:{project:this.project,node:this.node,search:this.search,tag:this.value}}).then(function(t){e.testData=t})},cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""}},mounted:function(){this.getUItestPlanList()}},Ln={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"padding-top":"10px",height:"50px"}},[a("div",{staticStyle:{overflow:"hidden"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{staticStyle:{"padding-left":"25px","padding-right":"0px",width:"25%"},attrs:{span:7}},[e._v("\n                      用例类型:                    \n                  "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.getUItestPlanList},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入测试计划名称",clearable:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUItestPlanList},slot:"append"})],1)],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px",height:"700px"}},[a("el-dialog",{attrs:{title:"请选择运行方式",visible:e.asdialogVisible,width:"20%",align:"center"},on:{"update:visible":function(t){e.asdialogVisible=t}}},[a("p",{staticStyle:{color:"red"}},[e._v("计划调试运行时间较长，建议使用异步执行")]),e._v(" "),a("el-form",{ref:"asynform",staticClass:"project",attrs:{model:e.asynform,rules:e.rules,"label-width":"100px"}},[a("div",{staticStyle:{"margin-top":"20px"}},[a("el-radio",{attrs:{label:!1,border:"",size:"medium",prop:"isasynchronous"},model:{value:e.asynform.isasynchronous,callback:function(t){e.$set(e.asynform,"isasynchronous",t)},expression:"asynform.isasynchronous"}},[e._v("调试")]),e._v(" "),a("el-radio",{attrs:{label:!0,border:"",size:"medium",prop:"isasynchronous"},model:{value:e.asynform.isasynchronous,callback:function(t){e.$set(e.asynform,"isasynchronous",t)},expression:"asynform.isasynchronous"}},[e._v("异步")])],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.asdialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleRunTest()}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticStyle:{position:"fixed",bottom:"0",right:"0",left:"500px",top:"160px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"运行测试用例集",visible:e.dialogTreeVisible,width:"45%","modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogTreeVisible=t}}},[a("div",[a("div",[a("el-row",{attrs:{gutter:2}},[a("el-col",{attrs:{span:8}},[a("el-switch",{staticStyle:{"margin-top":"10px"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"异步执行","inactive-text":"同步执行"},model:{value:e.asyncs,callback:function(t){e.asyncs=t},expression:"asyncs"}})],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.asyncs,expression:"asyncs"}],attrs:{clearable:"",placeholder:"请输入报告名称",disabled:!1},model:{value:e.reportName,callback:function(t){e.reportName=t},expression:"reportName"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"20px"}},[a("el-input",{attrs:{value:"",placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree",staticStyle:{"overflow-y":"scroll",height:"400px"},attrs:{data:e.dataTree,"check-strictly":!1,"filter-node-method":e.filterNode,"show-checkbox":"","check-on-click-node":"","node-key":"id","highlight-current":"",props:e.defaultProps},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTreeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.runTree}},[e._v("确 定")])],1)]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{"highlight-current-row":"",data:e.testData.results,"show-header":0!==e.testData.count,stripe:"",height:"700px"},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"70"}}),e._v(" "),a("el-table-column",{attrs:{label:"计划名称","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用例个数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.length)+" 个")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用例类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["冒烟用例"===t.row.tag?a("el-tag",[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"集成用例"===t.row.tag?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"监控脚本"===t.row.tag?a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"回归用例"===t.row.tag?a("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"系统用例"===t.row.tag?a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(t.row.tag))]):e._e(),e._v(" "),"空库用例"===t.row.tag?a("el-tag",{attrs:{type:"warning"}},[e._v(e._s(t.row.tag))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"更新时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("datetimeFormat")(t.row.update_time)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return e.handleEditTest(t.row.id)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.showtable(t.row.id,t.row.name)}}},[e._v("运行")]),e._v(" "),a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.handleCopyTest(t.row.id)}}},[e._v("复制\n                                ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelTest(t.row.id)}}},[e._v("删除\n                                ")])],1)]}}])})],1),e._v(" "),a("div",[a("el-footer",{staticStyle:{"padding-top":"30px"}},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{span:9}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.testData.count,expression:"testData.count !== 0 "}],attrs:{"current-page":e.currentPage,"page-size":11,background:"",layout:"total, prev, pager, next, jumper",total:e.testData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var En={computed:{buttonActivate:{get:function(){return!this.addTestActivate||""===this.currentNode},set:function(e){this.addTestActivate=e,this.testStepResp=[]}}},watch:{filterText:function(e){this.$refs.tree2.filter(e)}},components:{EditTest:An,TestList:a("VU/8")(jn,Ln,!1,function(e){a("vUuM")},"data-v-0751599a",null).exports},data:function(){return{testStepResp:[],nodeForm:{name:""},rules:{name:[{required:!0,message:"请输入节点名称",trigger:"blur"},{min:1,max:50,message:"最多不超过50个字符",trigger:"blur"}]},hostOptions:[],back:!1,del:!1,run:!1,radio:"根节点",addTestActivate:!0,currentConfig:"请选择",currentHost:"请选择",treeId:"",maxId:"",dialogVisible:!1,currentNode:"",data:"",filterText:"",expand:"&#xe65f;",dataTree:[],configOptions:[]}},methods:{handleDragEnd:function(){this.updateTree(!1)},getConfig:function(){var e=this;this.$api.getAllConfig(this.$route.params.id).then(function(t){e.configOptions=t,e.configOptions.push({name:"请选择"})})},handleBackList:function(){this.addTestActivate=!0,this.back=!this.back},quxiao:function(){this.nodeForm.name="",this.dialogVisible=!1},handleTestStep:function(e){this.testStepResp=e,this.addTestActivate=!1},getTree:function(){var e=this;this.$api.getTree(this.$route.params.id,{params:{type:4}}).then(function(t){e.dataTree=t.tree,e.treeId=t.id})},updateTree:function(e){var t=this;this.$api.updateTree(this.treeId,{mode:e,body:this.dataTree,node:this.currentNode.id,type:4}).then(function(e){e.success?t.dataTree=e.tree:t.$message.error(e.msg)})},renameNode:function(){var e=this;this.$prompt("请输入节点名","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/\S/,inputErrorMessage:"节点名称不能为空"}).then(function(t){var a=t.value,n=e.data.parent,s=n.data.children||n.data;s[s.findIndex(function(t){return t.id===e.currentNode.id})].label=a,e.updateTree(!1)})},deleteNode:function(){var e=this;this.$confirm("此操作将永久删除该节点下所有用例, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){""===e.currentNode?e.$message.info("请选择一个节点"):0!==e.currentNode.children.length?e.$message.warning("此节点有子节点，不可删除！"):(e.remove(e.currentNode,e.data),e.updateTree(!0))})},handleConfirm:function(e){var t=this;this.$refs[e].validate(function(e){e&&(t.append(t.currentNode),t.updateTree(!1),t.dialogVisible=!1,t.nodeForm.name="")})},handleNodeClick:function(e,t){this.currentNode=e,this.data=t},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},remove:function(e,t){var a=t.parent,n=a.data.children||a.data,s=n.findIndex(function(t){return t.id===e.id});n.splice(s,1)},append:function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}var a={id:t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t(),label:this.nodeForm.name,children:[]};""!==e&&0!==this.dataTree.length&&"根节点"!==this.radio?(e.children||this.$set(e,"children",[]),e.children.push(a)):this.dataTree.push(a)},getHost:function(){var e=this;this.$api.getAllHost(this.$route.params.id).then(function(t){e.hostOptions=t,e.hostOptions.push({name:"请选择"})})}},name:"UICaseTestPlan",mounted:function(){this.getTree(),this.getConfig(),this.getHost()}},zn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus",disabled:!e.addTestActivate},on:{click:function(t){e.dialogVisible=!0}}},[e._v("\n                    新建分组\n                ")]),e._v(" "),a("el-dialog",{attrs:{title:"新建分组",visible:e.dialogVisible,width:"30%",align:"center"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"nodeForm",staticClass:"project",attrs:{model:e.nodeForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[a("el-input",{model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),e._v(" "),a("el-radio-group",{attrs:{size:"small"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio-button",{attrs:{label:"根节点"}}),e._v(" "),a("el-radio-button",{attrs:{label:"子节点"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.quxiao()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("nodeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-button",{attrs:{type:"danger",size:"small",icon:"el-icon-delete",disabled:e.buttonActivate},on:{click:e.deleteNode}},[e._v("删除分组\n                ")]),e._v(" "),a("el-button",{attrs:{disabled:""===e.currentNode,type:"info",size:"small",icon:"el-icon-edit-outline"},on:{click:e.renameNode}},[e._v("重命名\n                ")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline",disabled:e.buttonActivate},on:{click:function(t){e.buttonActivate=!1}}},[e._v("添加测试计划\n                ")]),e._v(" "),e.addTestActivate?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"mini"},on:{click:function(t){e.run=!e.run}}},[e._v("运行")]):e._e(),e._v(" "),e.addTestActivate?a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"danger",size:"mini"},on:{click:function(t){e.del=!e.del}}},[e._v("批量删除")]):e._e(),e._v(" "),a("el-button",{staticStyle:{position:"absolute",right:"30px"},attrs:{disabled:e.addTestActivate,type:"text"},on:{click:e.handleBackList}},[e._v("返回列表\n                ")])],1)])]),e._v(" "),a("el-container",[a("el-aside",{directives:[{name:"show",rawName:"v-show",value:e.addTestActivate,expression:"addTestActivate"}],staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"nav-api-side"},[a("div",{staticClass:"api-tree"},[a("el-input",{attrs:{placeholder:"输入关键字进行过滤",size:"medium",clearable:"","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),e._v(" "),a("el-tree",{ref:"tree2",attrs:{data:e.dataTree,"node-key":"id","default-expand-all":!0,"expand-on-click-node":!1,draggable:"","highlight-current":"","filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick,"node-drag-end":e.handleDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return t.data,a("span",{staticClass:"custom-tree-node"},[a("span",[a("i",{staticClass:"iconfont",domProps:{innerHTML:e._s(e.expand)}}),e._v("  "+e._s(n.label))])])}}])})],1)])]),e._v(" "),a("el-main",{staticStyle:{padding:"0"}},[a("test-list",{directives:[{name:"show",rawName:"v-show",value:e.addTestActivate,expression:"addTestActivate"}],attrs:{project:e.$route.params.id,node:""!==e.currentNode?e.currentNode.id:"",del:e.del,back:e.back,run:e.run,host:e.currentHost},on:{testStep:e.handleTestStep}}),e._v(" "),a("edit-test",{directives:[{name:"show",rawName:"v-show",value:!e.addTestActivate,expression:"!addTestActivate"}],attrs:{back:e.back,project:e.$route.params.id,node:e.currentNode.id,testStepResp:e.testStepResp,config:e.currentConfig,host:e.currentHost},on:{addSuccess:e.handleBackList}})],1)],1)],1)},staticRenderFns:[]};var Bn=a("VU/8")(En,zn,!1,function(e){a("xyyk")},"data-v-1fe5dca0",null).exports,qn={name:"DebugReport",data:function(){return{srcList:["https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg"]}},methods:{srcListtest:function(e){return[e]},handleRequest:function(e){["start_timestamp"].forEach(function(t){delete e[t]});try{e.body=JSON.parse(e.body)}catch(e){}return e},handleContent:function(e){try{e=JSON.parse(e)}catch(e){}return e},handleResponse:function(e){return["response_time_ms","encoding","ok","reason","url","text","json","content_size","content_type"].forEach(function(t){delete e[t]}),e}},props:{summary:{require:!0}}},Un={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-y":"scroll",height:"800px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.summary],size:"medium",border:"",stripe:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"测试时间",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("timestampToTime")(t.row.time.start_at)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"持续时间",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(t.row.time.duration.toFixed(3)+" 秒")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"总数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",[e._v(e._s(t.row.stat.testsRun))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成功",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success"}},[e._v(e._s(t.row.stat.successes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"失败",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.stat.failures))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"系统环境"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("Python: "+e._s(t.row.platform.python_version))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.platform.platform))])],1)])]}}])})],1),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),e._l(e.summary.details,function(t){return e._t("default",function(){return[a("div",[a("span",{staticStyle:{"font-weight":"bold","font-size":"medium"}},[e._v(e._s(t.name))])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.detail,border:"","header-cell-style":{textAlign:"center",background:"#F8F8FA"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"名 称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"用例描述"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.casedescribe))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"持续时间 (秒)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.time.duration.toFixed(3)+" 秒"))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{label:"测试结果"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:t.row.status},[e._v(e._s(t.row.status))])]}}],null,!0)}),e._v(" "),a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tabs",[a("el-tab-pane",{attrs:{label:"用例脚本信息"}},[a("pre",{staticClass:"code-block",domProps:{innerHTML:e._s(e.handleRequest(t.row.casebody))}})]),e._v(" "),null!==t.row.casesteps?a("el-tab-pane",{attrs:{label:"用例执行情况"}},e._l(t.row.casesteps,function(t){return a("div",{key:t.rowkeyid},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("div",{staticStyle:{width:"95%"}},["passed"==t.status?a("i",{staticClass:"el-icon-success",staticStyle:{color:"green","padding-left":"100px"}}):e._e(),e._v(" "),"failed"==t.status?a("i",{staticClass:"el-icon-error",staticStyle:{color:"red","padding-left":"100px"}}):e._e(),e._v(" "),a("span",{staticStyle:{widht:"70%"}},[e._v(e._s(t.stepname))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#999"}},[e._v(e._s(t.time.duration)+" ms")])])]),e._v(" "),""!==t.parameters?a("div",[e._v("                                       \n                                    "+e._s(t.parameters))]):e._e(),e._v(" "),0!==t.attachments.length?a("div",{staticClass:"demo-image__preview",staticStyle:{widht:"1000px"}},e._l(t.attachments,function(t){return a("div",{key:t.uid,staticStyle:{widht:"1000px"}},[a("el-image",{staticStyle:{width:"800px",height:"500px"},attrs:{src:t.path,"preview-src-list":[t.path]}},[e._v("\n\n                                            >\n                                            "),a("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("\n                                                加载中"),a("span",{staticClass:"dot"},[e._v("...")])])])],1)}),0):e._e()],2)],1)],1)}),0):e._e(),e._v(" "),""!==t.row.errormessage?a("el-tab-pane",{attrs:{label:"异常信息"}},[a("pre",{staticClass:"code-block",domProps:{textContent:e._s(e.handleResponse(t.row.errormessage))}})]):e._e()],1)]}}],null,!0)})],1)]})})],2)},staticRenderFns:[]};var On={components:{Report:a("VU/8")(qn,Un,!1,function(e){a("xvRz")},"data-v-33d1c74d",null).exports},data:function(){return{search:"",selectReports:[],currentRow:"",currentPage:1,reportData:{count:0,results:[]},summary:{},loading:!0,dialogTableVisible:!1}},methods:{cellMouseEnter:function(e){this.currentRow=e},cellMouseLeave:function(e){this.currentRow=""},handleWatchReports:function(e){var t=window.open("");window.focus(),this.$api.watchSingleReports(e,{params:{project:this.$route.params.id}}).then(function(e){t.focus(),t.document.open(),t.document.write(e.data),t.document.close()})},getreportdetail:function(e){var t=this;this.$api.getUIReportsdetail(e,{params:{project:this.$route.params.id}}).then(function(e){t.summary=e.summary,t.loading=!1,t.dialogTableVisible=!0})},handleSelectionChange:function(e){this.selectReports=e},handleCurrentChange:function(e){var t=this;this.$api.getUIReportsPaginationBypage({params:{page:this.currentPage,project:this.$route.params.id,search:this.search}}).then(function(e){t.reportData=e})},handleDelReports:function(e){var t=this;this.$confirm("此操作将永久删除该测试报告，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$api.deleteUIReports(e,{params:{project:t.$route.params.id}}).then(function(e){t.$notify.success("删除报告成功"),t.getReportList()})})},delSelectionReports:function(){var e=this;0!==this.selectReports.length?this.$confirm("此操作将永久删除勾选的测试报告，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.deleteAllUIReports(e.selectReports,{project:e.$route.params.id}).then(function(t){e.$notify.success("批量删除报告成功"),e.getReportList()})}):this.$notify.warning("请至少勾选一个测试报告")},handleDownExcelReport:function(e,t){var a=this;this.$api.downloadTestdata({fileType:2,id:e,project:this.$route.params.id}).then(function(e){var a=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.style.display="none",n.href=a,n.setAttribute("download",t+".xlsx"),document.body.appendChild(n),n.click()}).catch(function(e){a.$notify.error("文件下载失败")})},getReportList:function(){var e=this;this.$api.uireportList({params:{project:this.$route.params.id,search:this.search}}).then(function(t){e.reportData=t,e.loading=!1})}},name:"UIReportList",mounted:function(){this.getReportList()}},Mn={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{background:"#fff",padding:"0",height:"50px"}},[a("div",{staticClass:"nav-api-header"},[a("div",{staticStyle:{"padding-top":"10px","margin-left":"20px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!==e.reportData.count,expression:"reportData.count !== 0"}],staticStyle:{"margin-left":"10px"},attrs:{type:"danger",icon:"el-icon-delete",size:"mini",title:"批量删除"},on:{click:e.delSelectionReports}},[e._v("批量删除")])],1)])]),e._v(" "),a("el-container",[a("el-header",{staticStyle:{"padding-top":"10px","margin-left":"10px"}},[a("div",[a("el-row",[a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{placeholder:"请输入报告名称",clearable:"",size:"small"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"small",title:"搜索"},on:{click:e.getReportList},slot:"append"})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:0!==e.reportData.count,expression:"reportData.count !== 0 "}],attrs:{"page-size":11,background:"","current-page":e.currentPage,layout:"total, prev, pager, next, jumper",total:e.reportData.count},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1)],1)]),e._v(" "),a("el-container",[a("el-main",{staticStyle:{padding:"0","margin-left":"10px"}},[e.dialogTableVisible?a("el-dialog",{attrs:{visible:e.dialogTableVisible,width:"70%"},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("report",{attrs:{summary:e.summary}})],1):e._e(),e._v(" "),a("div",{staticStyle:{position:"fixed",bottom:"0px",right:"0",left:"230px",top:"150px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{size:"medium","element-loading-text":"正在玩命加载","highlight-current-row":"",data:e.reportData.results,"show-header":0!==e.reportData.results.length,stripe:"",height:"600px","show-overflow-tooltip":""},on:{"cell-mouse-enter":e.cellMouseEnter,"cell-mouse-leave":e.cellMouseLeave,"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{label:"类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{staticStyle:{color:"white"},attrs:{color:"#2C3E50",size:"small"}},[e._v(e._s(t.row.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"报告名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"状态",width:"60",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{class:{pass:t.row.summary.success,fail:!t.row.summary.success},domProps:{textContent:e._s(!0===t.row.summary.success?"Pass":"Fail")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"测试时间",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(e._f("timestampToTime")(t.row.summary.time.start_at)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"用时",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{textContent:e._s(t.row.summary.time.duration.toFixed(3)+" 秒")}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"总计",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"small"}},[e._v(e._s(t.row.summary.stat.testsRun))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"通过",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",size:"small"}},[e._v(" "+e._s(t.row.summary.stat.successes))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"60",label:"失败",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v(e._s(t.row.summary.stat.failures))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"系统信息",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.summary.platform.python_version))]),e._v(" "),a("p",[e._v("Platform: "+e._s(t.row.summary.platform.platform))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v("系统 "+e._s(t.row.summary.platform.platform))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.currentRow===t.row,expression:"currentRow === scope.row"}]},[a("el-button",{attrs:{type:"info",size:"mini",title:"查看"},on:{click:function(a){return e.getreportdetail(t.row.id)}}},[e._v("查看\n                                    ")]),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",title:"删除"},on:{click:function(a){return e.handleDelReports(t.row.id)}}},[e._v("删除\n                                    ")])],1)]}}])})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var Hn=a("VU/8")(On,Mn,!1,function(e){a("yD+r")},"data-v-28ea0443",null).exports;s.default.use(c.a);var Jn=new c.a({mode:"history",routes:[{path:"/testrunner/register",name:"Register",component:_,meta:{title:"用户注册"}},{path:"/testrunner/login",name:"Login",component:k,meta:{title:"用户登录"}},{path:"/testrunner",name:"Index",component:g,meta:{title:"首页",requireAuth:!1},children:[{name:"ProjectList",path:"project_list",component:T,meta:{title:"项目列表"}},{name:"ProjectDetail",path:"project/:id/dashbord",component:$,meta:{title:"项目预览"}},{name:"DebugTalk",path:"debugtalk/:id",component:N,meta:{title:"编辑驱动"}},{name:"RecordApi",path:"api_record/:id",component:xa,meta:{title:"接口模板"}},{name:"AutoTest",path:"auto_test/:id",component:Ea,meta:{title:"自动化测试"}},{name:"RecordConfig",path:"record_config/:id",component:en,meta:{title:"配置管理"}},{name:"GlobalEnv",path:"global_env/:id",component:qa,meta:{title:"全局变量"}},{name:"Reports",path:"reports/:id",component:Ma,meta:{title:"历史报告"}},{name:"Task",path:"tasks/:id",component:ln,meta:{title:"定时任务"}},{name:"HostIP",path:"host_ip/:id",component:un,meta:{title:"HOST配置"}},{name:"TaskMeta",path:"taskmeta/:id",component:pn,meta:{title:"异步回执"}},{name:"webtestcaselist",path:"webtestcaselist/:id",component:$n,meta:{title:"Web测试用例"}},{name:"UICaseTestPlan",path:"UICaseTestPlan/:id",component:Bn,meta:{title:"UI测试计划"}},{name:"UIReportList",path:"UIReportList/:id",component:Hn,meta:{title:"UI测试报告"}}]}]}),Kn=(a("TzC8"),a("6Qis"),a("uyVo"),a("dj7y"),a("d5T6"),a("NYxO"));s.default.use(Kn.a);var Wn=new Kn.a.Store({state:pe,mutations:{isLogin:function(e,t){e.token=t},setUser:function(e,t){e.user=t},setRouterName:function(e,t){e.routerName=t},setUseractualname:function(e,t){e.useractualname=t}}}),Gn=a("XLwt");s.default.config.productionTip=!1,s.default.use(r.a),s.default.prototype.$api=n,s.default.prototype.$echarts=Gn,s.default.filter("datetimeFormat",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YY-MM-DD hh:mm:ss",a=new Date(e),n=a.getFullYear(),s=a.getMonth()+1,i=a.getDate(),r=a.getHours(),o=a.getMinutes(),l=a.getSeconds(),c=Array.apply(null,Array(10)).map(function(e,t){return"0"+t});return t.replace(/YY/g,n).replace(/MM/g,c[s]||s).replace(/DD/g,c[i]||i).replace(/hh/g,c[r]||r).replace(/mm/g,c[o]||o).replace(/ss/g,c[l]||l)}),s.default.filter("timestampToTime",function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+(t.getHours()+":")+(t.getMinutes()+":")+t.getSeconds()}),s.default.prototype.setLocalValue=function(e,t){window.localStorage?localStorage.setItem(e,t):alert("This browser does NOT support localStorage")},s.default.prototype.getLocalValue=function(e){var t=localStorage.getItem(e);return t||""},Jn.beforeEach(function(e,t,a){setTimeout(function(t){e.meta.title&&(document.title=e.meta.title),e.meta.requireAuth?""!==Wn.state.token?a():a({name:"Login"}):a()})}),new s.default({el:"#app",router:Jn,store:Wn,components:{App:l},template:"<App/>",created:function(){null===this.getLocalValue("token")&&this.setLocalValue("token",""),null===this.getLocalValue("user")&&this.setLocalValue("user",""),null===this.getLocalValue("routerName")&&this.setLocalValue("routerName","ProjectList"),null===this.getLocalValue("useractualname")&&this.setLocalValue("useractualname",""),this.$store.commit("isLogin",this.getLocalValue("token")),this.$store.commit("setUser",this.getLocalValue("user")),this.$store.commit("setRouterName",this.getLocalValue("routerName")),this.$store.commit("setUseractualname",this.getLocalValue("useractualname"))}})},NI1z:function(e,t){},O7CB:function(e,t,a){e.exports=a.p+"static/img/login-left-night.f43356b5.f43356b.png"},ODmK:function(e,t){},OI3U:function(e,t){},Q3xI:function(e,t){},QM1O:function(e,t){},R7pj:function(e,t){},SDJo:function(e,t){},TI4a:function(e,t){},TzC8:function(e,t){},UD7K:function(e,t){},VZlN:function(e,t){},"W/um":function(e,t){},W0BZ:function(e,t){},Wc3O:function(e,t){},"WtK+":function(e,t){},bRCp:function(e,t){},bnnx:function(e,t){},d5T6:function(e,t){},dj7y:function(e,t){},eP9I:function(e,t){},iipv:function(e,t){},kJXW:function(e,t){},m2dO:function(e,t){},n4kb:function(e,t){},ntRI:function(e,t){},qpjN:function(e,t){},qzGr:function(e,t){},soJJ:function(e,t){},tpsR:function(e,t){},tvR6:function(e,t){},"uM/c":function(e,t){},uyVo:function(e,t){},vUuM:function(e,t){},xvRz:function(e,t){},xyyk:function(e,t){},"y/oa":function(e,t){},y3eU:function(e,t){},"yD+r":function(e,t){},zkLq:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.1d7d0e7608693612a5cf.js.map